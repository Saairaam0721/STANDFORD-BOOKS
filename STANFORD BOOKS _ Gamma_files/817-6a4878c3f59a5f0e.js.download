"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{10817:(e,t,r)=>{r.d(t,{b:()=>tL});var o=r(6029),n=r(26420),i=r(34732),s=r(55729),a=r(74158),l=r(91938),d=r(80116),c=r(75074),u=r(48094),p=r(32617),m=r(15342),g=r(85011),h=r(40452),x=r(12514),b=r(47412),f=r(36936),j=r(91792),v=r(84431),C=r(85684),y=r(24302),w=r(89122),E=r(26385),S=r(96500),k=r(68301),I=r(87827),R=r(94740),T=r(66199),B=r(16936),D=r(74676),A=r(18078),_=r(48810),z=r(99492),U=r(48621),W=r(19564),F=r(80180);let L="0px 1px 0px rgba(0,0,0,0)",G="insert-widget-popover";var N=r(58959),O=r(56570),M=r(37243),P=r(88586),V=r(95889),H=r(76083),q=r(64642),K=r(94922),X=r(43182),Z=r(47665),Y=r(15607),J=r(84672);let $=(0,s.memo)(e=>{let{subcategory:t,items:r,editor:n,badge:i,itemGroupLength:s,closeFn:a,hideTooltips:l,smallTitle:d}=e,{isInOfflineMode:c}=(0,P.utY)();return(0,o.jsxs)(E.B,{spacing:2,children:[s>1&&(0,o.jsx)(b._x,{flex:"1",textAlign:"start",ms:1,fontSize:d?"xs":"sm",children:(0,o.jsxs)(N.z,{children:[(0,o.jsx)(_.E,{children:t}),"beta"===i&&(0,o.jsx)(D.E,{colorScheme:"trueblue",children:(0,o.jsx)(W.x6,{id:"YBt9YP"})})]})}),(0,o.jsx)(O.x,{gap:"1.5",gridTemplateColumns:"1fr 1fr 1fr",maxW:"100%",children:r.map(e=>(0,H.gT)(n,e,!1,c)?null:(0,o.jsx)(J.p,{item:e,onDragStart:()=>et(e,n,a,l),onDragEnd:t=>ee(e,n,t),onClick:()=>Q(e,n,a,c)},e.key))})]})});$.displayName="InsertWidgetSubcategory";let Q=function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=()=>{r(),(0,H.Jb)(e,V.oU.INSERT_WIDGET),"cardTemplate"===e.type&&(0,q.B)(e.key),e.execute(t)},i=t.view,s=t.state.selection,a=t.state.doc.resolve(s.from),l=(0,M.eL)(a,Z.jg),{mostVisible:d,visibleCards:c}=(0,Z.lA)(t),u=c.some(e=>e.pos===(null==l?void 0:l.pos)),p=(0,H.gT)(t,e,void 0,o);if(u&&!p)return void n();if(!(0,H.gT)(t,e,!1,o))try{let r=(null==d?void 0:d.pos)?(0,K.dg)(i.state.tr,d.pos):null,o=null==r?void 0:r.body;if(o){let r=o.pos+o.node.nodeSize-1;if(t.commands.setTextSelection(r),!(0,Y.Bi)(t,e.nodeName)){let e=o.pos+2;t.commands.setTextSelection(e)}if(!(0,Y.Bi)(t,e.nodeName))return}n(),i.dispatch(i.state.tr.scrollIntoView())}catch(e){console.error("[InsertWidget] error in click to insert:",e)}},ee=(e,t,r)=>{r.preventDefault(),r.stopPropagation();let{dragEndFn:o}=e;try{o&&o(t),(0,H.Jb)(e,V.oU.INSERT_WIDGET),"cardTemplate"===e.type&&(0,q.B)(e.key)}catch(e){console.error("[InsertWidget] dragEndFn error:",e)}},et=(e,t,r,o)=>{setTimeout(()=>{r()});let n="card"===e.nodeName?(0,X.iM)((0,H.GO)()[e.key]):(0,H.GO)()[e.key],i=e.dragStartFn?e.dragStartFn:n?()=>(0,H.fS)(t,n):void 0;if(!i)return void console.error("[InsertWidget] dragStartFn undefined",e);i(t),null==o||o()};var er=r(51684),eo=r(77650),en=r(7957),ei=r(27856),es=r(54678),ea=r(34555),el=r(19250),ed=r(88145),ec=r(11215);let eu="search";var ep=function(e){return e.Cards="cards",e.Images="images",e.Apps="apps",e.Videos="videos",e.Layouts="layouts",e.Text="text",e.Forms="forms",e.Charts="charts",e.SmartDiagrams="Smart diagrams",e}({});let em={Other:(0,o.jsx)(W.x6,{id:"/IX/7x"}),Tables:(0,o.jsx)(W.x6,{id:"8+4V8D"}),Columns:(0,o.jsx)(W.x6,{id:"jEu4bB"}),"Smart layouts":(0,o.jsx)(W.x6,{id:"uNnHCK"}),Lists:(0,o.jsx)(W.x6,{id:"h16FyT"}),Interactive:(0,o.jsx)(W.x6,{id:"jijeT/"}),Text:(0,o.jsx)(W.x6,{id:"xeiujy"}),Diagrams:(0,o.jsx)(W.x6,{id:"wYoFon"}),"Smart diagrams":(0,o.jsx)(W.x6,{id:"djbazg"}),New:(0,o.jsx)(W.x6,{id:"isRobC"}),"Callout boxes":(0,o.jsx)(W.x6,{id:"uJ8xrP"}),Charts:(0,o.jsx)(W.x6,{id:"A4tHrb"})},eg=()=>{let e=(0,H.Vo)(),t=k.of.get("smartDiagrams"),r={cards:{key:"cards",name:eo.Ru._({id:"4z8XKi"}),shortName:eo.Ru._({id:"Ccpbzh"}),subtitle:eo.Ru._({id:"b2o2+V"}),icon:er.HuL,itemGroups:(0,ei.D)()},images:{key:"images",name:eo.Ru._({id:"an5hVd"}),shortName:eo.Ru._({id:"an5hVd"}),subtitle:eo.Ru._({id:"BbyCbN"}),icon:er.Cyq,itemGroups:[{subcategory:em.Other,items:[...(0,el.D)().filter(e=>"image"===e.nodeName),e.gallery]}]},charts:{key:"charts",name:eo.Ru._({id:"2x61T5"}),shortName:eo.Ru._({id:"A4tHrb"}),subtitle:eo.Ru._({id:"sp3a5R"}),icon:er.s67,itemGroups:[{subcategory:em.Charts,items:(0,es.V)()},{subcategory:em.Diagrams,items:(0,ea.A)()}]},apps:{key:"apps",name:eo.Ru._({id:"Nz7jbx"}),shortName:eo.Ru._({id:"aTofd0"}),icon:er.c9S,subtitle:eo.Ru._({id:"iC/G6e"}),itemGroups:[{subcategory:em.Other,items:[...(0,el.D)().filter(e=>"embed"===e.nodeName&&(!e.categories||e.categories.includes("app")))]}]},videos:{key:"videos",name:eo.Ru._({id:"86kBVB"}),shortName:eo.Ru._({id:"RKuImK"}),subtitle:eo.Ru._({id:"hCcWLL"}),icon:er.OxR,itemGroups:[{subcategory:em.Other,items:[e.gallery,...(0,el.D)().filter(e=>"video"===e.nodeName)]}]},layouts:{key:"layouts",name:eo.Ru._({id:"uNnHCK"}),shortName:eo.Ru._({id:"yU0QVO"}),subtitle:eo.Ru._({id:"HXUYWx"}),icon:er.sUV,itemGroups:[{subcategory:em.Columns,items:[e.columns2,e.columns3,e.columns4]},...(0,ec.KF)()]},text:{key:"text",name:eo.Ru._({id:"8nVVMR"}),shortName:eo.Ru._({id:"7s3WlU"}),subtitle:eo.Ru._({id:"l6pR8S"}),icon:er.tiU,itemGroups:[{subcategory:em.Text,items:[e.title,e.h1,e.h2,e.h3,e.h4,e.blockquote]},{subcategory:em.Tables,items:[e.table2,e.table3,e.table4]},{subcategory:em.Lists,items:[e.bulletedList,e.numberedList,e.todoList]},{subcategory:em["Callout boxes"],items:(0,en.A3)()},{subcategory:em.Interactive,items:[e.buttonGroup,e.toggle]},{subcategory:em.Other,items:[e.codeBlock,e.mathBlock,e.footnote,e.contributors,e.tableOfContents,e.divider]}]},forms:{key:"forms",name:eo.Ru._({id:"4Kic3M"}),shortName:eo.Ru._({id:"CiIFml"}),subtitle:eo.Ru._({id:"Gsox27"}),icon:er.tAZ,itemGroups:[{subcategory:em.Other,items:[e.buttonGroup,...(0,el.D)().filter(e=>{var t;return"embed"===e.nodeName&&(null==(t=e.categories)?void 0:t.includes("form"))})]}]}};return t&&(r["Smart diagrams"]={key:"Smart diagrams",name:eo.Ru._({id:"djbazg"}),shortName:eo.Ru._({id:"muZ1GG"}),subtitle:eo.Ru._({id:"GlXcA3"}),icon:er.Gmj,itemGroups:[{subcategory:em["Smart diagrams"],items:(0,ed.b)(),badge:"beta",featureFlag:"smartDiagrams"}]}),r},eh=()=>[["text","images","layouts",...k.of.get("smartDiagrams")?["Smart diagrams"]:[],"charts","videos","apps","forms"]],ex=()=>{let e=eg();return eh().map(t=>t.map(t=>e[t]).filter(e=>void 0!==e))},eb=()=>({iconColor:(0,y.dU)("deepocean.600","deepocean.200"),hoverColor:(0,y.dU)("gray.50","whiteAlpha.100"),activeColor:(0,y.dU)("gray.200","whiteAlpha.200"),popoverBackgroundColor:(0,y.dU)("titanium.50","titanium.900"),popoverBorderColor:(0,y.dU)("gray.200","whiteAlpha.300"),searchInputIconColor:(0,y.dU)("gray.500","gray.500"),searchInputBorderColor:(0,y.dU)("gray.200","whiteAlpha.200"),searchInputBackgroundColor:(0,y.dU)("whiteAlpha.900","blackAlpha.900"),searchInputTextColor:(0,y.dU)("gray.800","gray.50"),searchInputCloseColorScheme:(0,y.dU)("blackAlpha","gray"),scrollGradientStart:(0,y.dU)("rgba(249, 246, 246, 0)","rgba(0,0,0,0)"),scrollGradientEnd:(0,y.dU)("rgba(249, 246, 246, 1)","rgba(0,0,0,0.9)"),attentionColor:(0,y.dU)("trueblue.200","gray.800"),attentionTextColor:(0,y.dU)("whiteAlpha.900","gray.50")}),ef=(0,s.memo)(e=>{let{icon:t,name:r,subtitle:i,itemGroups:a,editor:l,setOpenButton:d,isOpen:c,insertableCategories:u}=e,p=(0,s.useRef)(null),{GammaTooltipHiderContext:m,hideTooltips:g}=(0,b.ku)(),f=eb(),j=(0,s.useCallback)(()=>{d(null)},[d]);return(0,s.useEffect)(()=>{c&&p.current&&p.current.scrollTo({top:0})},[c]),(0,o.jsxs)(R.A,{placement:"start",isOpen:c,isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,modifiers:[{name:"preventOverflow",enabled:!0,options:{padding:20}}],autoFocus:!1,children:[(0,o.jsx)(b.Tz,{label:r,modifiers:[{name:"offset",options:{offset:[0,-2]}}],shouldWrapChildren:!0,"aria-label":r,placement:"left",portalProps:{appendToParentPortal:!0},children:(0,o.jsx)(T.W,{children:(0,o.jsxs)(n.a,{position:"relative",children:[(0,o.jsx)(B.K,{"aria-label":r,"data-testid":"".concat(r.toLowerCase().split(" ").join("-"),"-widget-inner-button"),size:"md",icon:(0,o.jsx)(U.g,{icon:t}),color:f.iconColor,fontWeight:"500",borderRadius:"md",backdropFilter:"blur(20px)",variant:"undefined",bg:c?f.activeColor:void 0,_hover:{bg:c?f.activeColor:f.hoverColor},textShadow:L,onMouseDown:e=>(l.isFocused&&(0,F.Fw)(e),d(e=>e===r?null:r),!0)}),"Smart diagrams"===r&&(0,o.jsx)(D.E,{position:"absolute",top:"-2px",left:"-10px",colorScheme:"green",fontSize:"2xs",px:1,py:0,borderRadius:"full",pointerEvents:"none",children:(0,o.jsx)(W.x6,{id:"isRobC"})})]})})}),(0,o.jsx)(x.Z,{children:(0,o.jsxs)(A.h,{bg:f.popoverBackgroundColor,borderRadius:"xl",borderColor:f.popoverBorderColor,shadow:"xl",zIndex:"overlay",overflow:"hidden",maxH:"90vh",w:"400px",p:0,me:-.5,className:G,position:"relative","data-insert-widget-popover":!0,children:[(0,o.jsxs)(m,{children:[(0,o.jsx)(n.a,{p:2,borderBottom:"1px solid",borderColor:f.searchInputBorderColor,children:(0,o.jsxs)(b._x,{flex:"1",textAlign:"start",ms:1,children:[(0,o.jsxs)(h.s,{alignItems:"center",children:[(0,o.jsx)(U.g,{icon:t}),(0,o.jsx)(_.E,{ms:2,children:r}),1===a.length&&(0,o.jsx)(o.Fragment,{children:"beta"===a[0].badge&&(0,o.jsx)(D.E,{colorScheme:"trueblue",ms:2,children:(0,o.jsx)(W.x6,{id:"YBt9YP"})})})]}),(0,o.jsx)(_.E,{fontSize:"xs",children:i})]})}),(0,o.jsx)(E.B,{ref:p,overflow:"hidden auto",p:2,pb:a.length>1?8:2,spacing:3,children:a.map((e,t)=>{let{subcategory:r,items:n,badge:i,featureFlag:s}=e;return s&&!k.of.get(s)?null:(0,o.jsx)($,{subcategory:r,items:n,badge:i,editor:l,itemGroupLength:a.length,closeFn:j,hideTooltips:g},t)})})]}),u[ep.Layouts].name===r&&(0,o.jsxs)(h.s,{alignItems:"center",gap:2,paddingX:4,paddingY:3,zIndex:1,backgroundColor:f.attentionColor,color:f.attentionTextColor,children:[(0,o.jsx)(U.g,{"aria-label":"Tip",icon:z.mEO}),(0,o.jsx)(_.E,{fontSize:"xs",children:(0,o.jsx)(W.x6,{id:"HVl8F3"})})]}),a.length>1&&(0,o.jsx)(n.a,{h:"12",w:"100%",position:"absolute",bottom:"0",bg:"linear-gradient(to bottom, ".concat(f.scrollGradientStart,", ").concat(f.scrollGradientEnd," 90%)"),pointerEvents:"none"})]})})]})});ef.displayName="InsertWidgetButtons";var ej=r(78686),ev=r(22832),eC=r(72470),ey=r(77979),ew=r(38036),eE=r(24351);let eS=(0,s.memo)(e=>{let{isOpen:t,setOpenButton:r,editor:n,insertableCategoriesListLocalized:i,allFlags:a}=e,l=eb(),d=(0,s.useMemo)(()=>{let e=i.flat().filter(e=>{let{featureFlag:t}=e;return!t||a[t]}),t=e.findIndex(e=>e.key===ep.Cards);if(t>-1){let[r]=e.splice(t,1);e.push(r)}return e},[i,a]),c=(0,s.useCallback)(()=>{r(null)},[r]);return(0,o.jsxs)(R.A,{placement:"start",isOpen:t,isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,modifiers:[{name:"preventOverflow",enabled:!0,options:{padding:20}}],autoFocus:!1,children:[(0,o.jsx)(b.Tz,{label:"Search",modifiers:[{name:"offset",options:{offset:[0,-2]}}],shouldWrapChildren:!0,"aria-label":eo.Ru._({id:"A1taO8"}),placement:"left",portalProps:{appendToParentPortal:!0},children:(0,o.jsx)(T.W,{children:(0,o.jsx)(B.K,{"aria-label":eo.Ru._({id:"A1taO8"}),"data-testid":"".concat(eu,"-widget-inner-button"),size:"md",icon:(0,o.jsx)(U.g,{icon:er.MjD}),color:l.iconColor,fontWeight:"500",borderRadius:"md",backdropFilter:"blur(20px)",variant:"undefined",bg:t?l.activeColor:void 0,_hover:{bg:t?l.activeColor:l.hoverColor},textShadow:L,onMouseDown:e=>(n.isFocused&&(0,F.Fw)(e),r(e=>e===eu?null:eu),!0)})})}),(0,o.jsx)(x.Z,{children:(0,o.jsxs)(A.h,{bg:l.popoverBackgroundColor,borderRadius:"xl",borderColor:l.popoverBorderColor,shadow:"xl",zIndex:"overlay",overflow:"hidden",maxH:"90vh",w:"400px",p:0,me:-.5,className:G,position:"relative","data-insert-widget-popover":!0,children:[(0,o.jsx)(eI,{editor:n,closeFn:c,isOpen:t,insertableCategoriesForSearch:d}),(0,o.jsxs)(h.s,{alignItems:"center",gap:2,paddingX:4,paddingY:3,zIndex:1,backgroundColor:l.attentionColor,color:l.attentionTextColor,children:[(0,o.jsx)(U.g,{"aria-label":eo.Ru._({id:"rm2Cxd"}),icon:z.mEO}),(0,o.jsx)(_.E,{fontSize:"xs",children:(0,o.jsx)(W.x6,{id:"4jZKOY",components:{0:(0,o.jsx)(ev.C,{})}})})]})]})})]})});eS.displayName="SearchAllWidgets";let ek=(0,s.memo)(e=>{let{query:t,onChange:r,isOpen:i}=e,a=eb(),l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{i&&l.current&&setTimeout(()=>{var e;null==l||null==(e=l.current)||e.focus()})},[i]),(0,o.jsx)(n.a,{p:4,borderBottom:"1px solid",borderColor:a.searchInputBorderColor,children:(0,o.jsxs)(eC.M,{size:"md",variant:"outline",children:[(0,o.jsx)(ey.W,{pointerEvents:"none",children:(0,o.jsx)(ej.W,{color:a.searchInputIconColor})}),(0,o.jsx)(ew.p,{ref:l,placeholder:eo.Ru._({id:"W/TXwD"}),value:t,onChange:r,backgroundColor:a.searchInputBackgroundColor,color:a.searchInputTextColor}),t&&(0,o.jsx)(ey.t,{p:4,children:(0,o.jsx)(B.K,{variant:"ghost",colorScheme:a.searchInputCloseColorScheme,size:"xs","aria-label":eo.Ru._({id:"V8yTm6"}),icon:(0,o.jsx)(U.g,{icon:z.Jyw}),onClick:()=>r({target:{value:""}})})})]})})});ek.displayName="SearchInput";let eI=(0,s.memo)(e=>{let{editor:t,closeFn:r,isOpen:n,insertableCategoriesForSearch:i}=e,{GammaTooltipHiderContext:a,hideTooltips:l}=(0,b.ku)(),d=(0,s.useRef)(null),[c,u]=(0,s.useState)(""),p=(0,s.useMemo)(()=>i.map(e=>{let{name:t,itemGroups:r,icon:o,featureFlag:n,subtitle:i}=e,s=r.map(e=>({...e,items:e.items.filter(e=>{let{name:t,keywords:r=[]}=e;return t().toLowerCase().includes(c.toLowerCase())||r.find(e=>e.startsWith(c.toLowerCase()))})})).filter(e=>e.items.length>0);return s.length>0?{name:t,subtitle:i,icon:o,featureFlag:n,itemGroups:s}:null}).filter(Boolean),[i,c]);return(0,s.useEffect)(()=>{n&&d.current&&d.current.scrollTo({top:0})},[n]),(0,s.useEffect)(()=>{n||u("")},[n]),(0,o.jsxs)(a,{children:[(0,o.jsx)(ek,{query:c,onChange:e=>u(e.target.value),isOpen:n}),(0,o.jsxs)(E.B,{p:2,pb:8,spacing:6,h:"100%",overflow:"hidden auto",ref:d,children:[!p.length&&(0,o.jsx)(E.B,{alignItems:"center",justifyContent:"center",h:"100%",pt:20,pb:20,children:(0,o.jsx)(eE.p,{size:"xs",title:(0,o.jsx)(W.x6,{id:"X+k8ml"}),description:(0,o.jsx)(W.x6,{id:"BcZ5cE"})})}),p.map(e=>{let{name:n,itemGroups:i,icon:s,subtitle:a}=e;return(0,o.jsxs)(E.B,{spacing:2,children:[(0,o.jsxs)(b._x,{flex:"1",textAlign:"start",ms:1,children:[(0,o.jsxs)(h.s,{alignItems:"center",children:[(0,o.jsx)(U.g,{icon:s}),(0,o.jsx)(_.E,{ms:2,children:n})]}),(0,o.jsx)(_.E,{fontSize:"xs",children:a})]}),i.map((e,n)=>{let{subcategory:s,items:a}=e;return(0,o.jsx)($,{smallTitle:!0,subcategory:s,items:a,editor:t,itemGroupLength:i.length,closeFn:r,hideTooltips:l},n)})]},n)})]})]})});eI.displayName="SearchAllWidgetsContent";let eR=e=>{let{editor:t}=e,r=(0,I.n)(ex),n=(0,k.mt)(),[i,a]=s.useState(null),l=(0,s.useRef)(null),d={bg:(0,y.dU)("white","elevation.3"),border:(0,y.dU)("titanium.100","titanium.900"),text:(0,y.dU)("titanium.900","titanium.300")},c=(0,s.useMemo)(()=>eg(),[]);return(0,w.j)({ref:l,handler:e=>{e.target.closest("[data-insert-widget-popover]")||a(null)}}),(0,o.jsxs)(E.B,{bg:d.bg,color:d.text,p:.5,borderWidth:"1px",borderColor:d.border,borderRadius:"md",shadow:"lg",ref:l,spacing:1,children:[(0,o.jsx)(eS,{setOpenButton:a,isOpen:"search"===i,editor:t,insertableCategoriesListLocalized:r,allFlags:n}),r.map((e,r)=>(0,o.jsxs)(s.Fragment,{children:[r>0&&(0,o.jsx)(S.c,{}),e.map(e=>{let{name:r,shortName:n,itemGroups:s,icon:l,subtitle:d,key:u}=e;return(0,o.jsx)(ef,{itemGroups:s,icon:l,name:r,shortName:n,subtitle:d,editor:t,setOpenButton:a,isOpen:i===r,insertableCategories:c},u)})]},r))]})},eT=e=>{let{editor:t}=e;return(0,C.R)()?(0,o.jsx)(h.s,{position:"fixed",w:"0%",h:"0%",insetInlineEnd:4,top:"50%",alignItems:"center",zIndex:v.$.insertWidget,"data-testid":"insert-widget-wrapper",children:(0,o.jsx)(h.s,{position:"absolute",insetInlineEnd:0,"data-guider-highlight":"insert-widget",direction:"column",className:"insert-widget",children:(0,o.jsx)(eR,{editor:t})})}):null},eB=(0,s.memo)(e=>{let{editor:t}=e,[r,n]=(0,s.useState)(!1),i=(0,j.rd)();return((0,s.useEffect)(()=>f.R.on("bringInsertWidgetToFront",e=>{let{inFront:t}=e;n(t)}),[]),r)?(0,o.jsx)(b.L8,{isDark:i,children:(0,o.jsx)(x.Z,{children:(0,o.jsx)(eT,{editor:t})})}):(0,o.jsx)(b.L8,{isDark:i,children:(0,o.jsx)(eT,{editor:t})})});var eD=r(22249),eA=r(26886),e_=r(34807),ez=r(43634),eU=r(85235);let eW=(e,t,r)=>{let[o,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),l=(0,s.useRef)(),d=(0,s.useCallback)(t=>{n(!0),e(t)},[e]),c=(0,s.useCallback)(e=>{n(!1),a(!1),t(e)},[t]),u=(0,s.useCallback)(e=>{l.current instanceof HTMLElement&&l.current.focus(),r(e)},[r]);return{isDragging:o,isMouseDown:i,handleDragStart:d,handleDragEnd:c,handleClick:u,onMouseDown:(0,s.useCallback)(()=>{a(!0),l.current=document.activeElement||void 0},[]),onMouseUp:(0,s.useCallback)(()=>{a(!1)},[])}},eF=()=>{let[e]=(0,eA.U)(["(max-height: 400px)","(min-height: 401px"]),t=(0,m.GV)(ez.nD),r=(0,m.GV)(ez.cS),o=(0,e_.A)({base:!1,lg:!0}),n=(0,m.GV)(ez.wC);return t&&!e&&!r&&o&&n!==eU.w.SLIDE_VIEW};var eL=r(72316);let eG="insert-widget-popover";var eN=r(49611);let eO=()=>({textColor:(0,y.dU)("gray.800","gray.50"),iconColor:(0,y.dU)("trueblue.600","trueblue.200"),hoverColor:(0,y.dU)("gray.50","whiteAlpha.100"),activeColor:(0,y.dU)("gray.200","whiteAlpha.200"),popoverBackgroundColor:(0,y.dU)("titanium.50","titanium.900"),popoverBorderColor:(0,y.dU)("gray.200","whiteAlpha.300"),searchInputIconColor:(0,y.dU)("gray.500","gray.500"),searchInputBorderColor:(0,y.dU)("gray.200","whiteAlpha.200"),searchInputBackgroundColor:(0,y.dU)("whiteAlpha.900","blackAlpha.900"),searchInputTextColor:(0,y.dU)("gray.800","gray.50"),searchInputCloseColorScheme:(0,y.dU)("blackAlpha","gray"),scrollGradientStart:(0,y.dU)("rgba(249, 246, 246, 0)","rgba(0,0,0,0)"),scrollGradientEnd:(0,y.dU)("rgba(249, 246, 246, 1)","rgba(0,0,0,0.9)"),attentionColor:(0,y.dU)("trueblue.200","gray.800"),attentionTextColor:(0,y.dU)("whiteAlpha.900","gray.50"),bg:(0,y.dU)("gray.50","gray.800"),border:(0,y.dU)("blackAlpha.100","whiteAlpha.200"),dividerColor:(0,y.dU)("blackAlpha.200","whiteAlpha.200")}),eM=(0,s.forwardRef)((e,t)=>{let{testId:r,icon:n,label:i,onClick:s,isOpen:a,editor:l}=e,d=eO();return(0,o.jsxs)(eN.$,{ref:t,"aria-label":i,"data-testid":"".concat(r,"-widget-inner-button"),size:"lg",color:d.iconColor,fontWeight:"500",borderRadius:"md",variant:"undefined",bg:a?d.activeColor:void 0,_hover:{bg:a?d.activeColor:d.hoverColor},textShadow:"0px 1px 0px rgba(0,0,0,0)",onMouseDown:e=>(l.isFocused&&(0,F.Fw)(e),s(),!0),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:2,width:65,height:65,transition:"height 0.2s ease-in-out",role:"button",children:[(0,o.jsx)(U.g,{icon:n,size:"lg","aria-hidden":"true"}),(0,o.jsx)(_.E,{fontSize:"xs",fontWeight:"medium",mt:2,color:d.textColor,textAlign:"center",maxW:"60px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxHeight:"20px","aria-hidden":"true",children:i})]})});eM.displayName="InsertWidgetButton";var eP=r(33787),eV=r(55597),eH=r(50507),eq=r(9455);let eK=e=>{let{item:t}=e,{name:r,image:i,icon:s,key:a,previewImage:l,shortcut:d,badge:c}=t,u=(0,eH.iT)(),{colorMode:p}=(0,y.G6)(),m={iconColor:(0,y.dU)("trueblue.600","trueblue.100"),bgColor:(0,y.dU)("white","gray.800"),textColor:(0,y.dU)("gray.700","gray.50"),borderColor:(0,y.dU)("gray.200","gray.600"),invertFilter:(0,y.dU)("invert(0)","invert(.7) brightness(1.4) hue-rotate(180deg)"),iconBgColor:(0,y.dU)("white","gray.700"),gripDotsColor:(0,y.dU)("gray.500","gray.500")};return(0,o.jsxs)(E.B,{h:"100%",bg:m.bgColor,p:2.5,pt:2,spacing:1.5,alignItems:"center",shadow:"sm",borderRadius:"xl",border:"1px",borderColor:m.borderColor,role:"group",children:[(0,o.jsx)(h.s,{justifyContent:"center",alignItems:"center",minH:"7",w:"100%",children:"cardTemplate"===t.type&&u[a]?(0,o.jsx)(eq.LK,{templateContent:u[a].jsonContent,isDark:"dark"===p}):l?(0,o.jsx)(h.s,{bg:m.iconBgColor,borderRadius:"md",children:(0,o.jsx)(eP._,{filter:m.invertFilter,src:l.src,w:"100%",maxW:"100%",alt:r(),pointerEvents:"none"})}):i?(0,o.jsx)(eP._,{src:i.src,borderRadius:"sm",h:"1.5em",w:"1.5em",objectFit:"contain",pointerEvents:"none"}):(0,o.jsx)(n.a,{color:m.iconColor,fontSize:"xl",children:s&&(0,o.jsx)(U.g,{icon:s})})}),c&&(0,o.jsx)(D.E,{position:"absolute",top:"1",insetEnd:"2",colorScheme:"green",children:c()}),(0,o.jsxs)(E.B,{spacing:0,whiteSpace:"break-spaces",flex:"1",textAlign:"center",children:[(0,o.jsx)(_.E,{color:m.textColor,fontWeight:"600",fontSize:"xs",lineHeight:1.2,noOfLines:2,children:r()}),d&&(0,o.jsx)(_.E,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:d})]})]})},eX=e=>{let{item:t,onDragStart:r,onDragEnd:i,onClick:s}=e,{isDragging:a,isMouseDown:l,handleDragStart:d,handleDragEnd:c,handleClick:u,onMouseDown:p,onMouseUp:m}=eW(r,i,s),{key:g,description:h}=t,x={gripDotsBg:(0,y.dU)("white","gray.800"),gripDotsColor:(0,y.dU)("gray.500","gray.500")};return(0,o.jsx)(b.Tz,{closeOnMouseDown:!0,closeOnClick:!0,isOpen:!a&&void 0,label:(0,o.jsxs)(n.a,{as:"span",display:"inline",children:[(0,o.jsx)(U.g,{icon:z.bFI})," ",(0,o.jsx)(_.E,{display:"inline",children:(0,o.jsx)(W.x6,{id:"Dd9uag"})}),h&&(0,o.jsx)(_.E,{textAlign:"start",color:"gray.300",maxW:"170px",children:h()})]}),"aria-label":eo.Ru._({id:"Dd9uag"}),placement:"top",children:(0,o.jsxs)(E.B,{"data-testid":"".concat(g,"-insert-button"),draggable:!0,onDragStart:d,onDragEnd:c,onClick:u,onMouseDown:p,onMouseUp:m,onMouseLeave:m,cursor:"grab",_hover:{transform:"scale(1.05) rotate(-0.25deg)",shadow:"lg"},transitionProperty:"common",transitionDuration:"normal",transform:"rotate(".concat(l&&!a?-1:0,"deg) translate(0, 0);"),role:"group",borderRadius:"xl",children:[(0,o.jsx)(eK,{item:t}),(0,o.jsx)(n.a,{opacity:0,_groupHover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal",position:"absolute",top:"0",insetStart:"1.5",bg:x.gripDotsBg,color:x.gripDotsColor,borderRadius:"sm",fontSize:"sm",children:(0,o.jsx)(U.g,{icon:eV.IMq,fixedWidth:!0})})]})})},eZ=(0,s.memo)(e=>{let{subcategory:t,items:r,editor:n,itemGroupLength:i,closeFn:s,hideTooltips:a}=e,{isInOfflineMode:l}=(0,P.utY)();return(0,o.jsxs)(E.B,{spacing:2,children:[(0,o.jsx)(b._x,{flex:"1",textAlign:"start",ms:1,fontSize:"xs",children:i>1&&t}),(0,o.jsx)(O.x,{gap:"1.5",gridTemplateColumns:"1fr 1fr 1fr 1fr",maxW:"100%",children:r.map(e=>(0,H.gT)(n,e,!1,l)?null:(0,o.jsx)(eX,{item:e,onDragStart:()=>et(e,n,s,a),onDragEnd:t=>ee(e,n,t),onClick:()=>Q(e,n,s,l)},e.key))})]})});eZ.displayName="InsertWidgetSubcategory";let eY=(0,s.memo)(e=>{let{icon:t,name:r,shortName:i,subtitle:a,itemGroups:l,editor:d,setOpenButton:c,isOpen:u,containerRef:p}=e,[m,g]=(0,s.useState)(null),f=(0,s.useRef)(null),{GammaTooltipHiderContext:j,hideTooltips:v}=(0,b.ku)(),C=eO(),{styles:y,attributes:w}=(0,eL.E)(p.current,m,{placement:"top-start",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:20,boundary:document.body}},{name:"flip",options:{fallbackPlacements:["bottom-start","right-start","left-start"]}}]}),S=(0,s.useCallback)(()=>{c(null)},[c]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.Tz,{label:a,shouldWrapChildren:!0,"aria-label":a,placement:"bottom",portalProps:{appendToParentPortal:!0},children:(0,o.jsx)("div",{ref:f,children:(0,o.jsx)(eM,{testId:r,icon:t,label:i,onClick:()=>{u?S():c(r)},isOpen:u,editor:d})})}),u&&(0,o.jsx)(x.Z,{children:(0,o.jsxs)(E.B,{ref:g,style:{...y.popper},backgroundColor:C.popoverBackgroundColor,borderRadius:"var(--chakra-radii-xl)",borderColor:C.popoverBorderColor,borderWidth:"1px",boxShadow:"var(--chakra-shadows-xl)",zIndex:"var(--chakra-zIndices-overlay)",overflow:"hidden",maxHeight:"50vh",width:"625px",padding:0,marginEnd:"-0.5rem",position:"relative",className:eG,"data-insert-widget-popover":!0,...w.popper,children:[(0,o.jsxs)(j,{children:[(0,o.jsx)(n.a,{p:2,borderBottom:"1px solid",borderColor:C.searchInputBorderColor,children:(0,o.jsx)(b._x,{flex:"1",textAlign:"start",ms:1,children:(0,o.jsxs)(h.s,{alignItems:"center",children:[(0,o.jsx)(U.g,{icon:t}),(0,o.jsxs)(_.E,{ms:2,fontSize:"xs",children:[r,"\xa0"]}),(0,o.jsxs)(_.E,{fontSize:"xxs",color:"gray.500",children:["| ",a]})]})})}),(0,o.jsx)(E.B,{ref:e=>{e&&u&&setTimeout(()=>{e&&e.scrollTo({top:0})},0)},overflow:"hidden auto",p:2,pb:l.length>1?8:2,spacing:3,children:l.map((e,t)=>{let{subcategory:r,items:n}=e;return(0,o.jsx)(eZ,{subcategory:r,items:n,editor:d,itemGroupLength:l.length,closeFn:S,hideTooltips:v},t)})})]}),l.length>1&&(0,o.jsx)(n.a,{h:"12",w:"100%",position:"absolute",bottom:"0",bg:"linear-gradient(to bottom, ".concat(C.scrollGradientStart,", ").concat(C.scrollGradientEnd," 90%)"),pointerEvents:"none"})]})})]})});eY.displayName="InsertWidgetButtons";let eJ=(0,s.memo)(e=>{let{isOpen:t,setOpenButton:r,editor:n,insertableCategoriesListLocalized:i,allFlags:a,containerRef:l}=e,d=eO(),c=(0,s.useRef)(null),[u,p]=(0,s.useState)(null),{styles:m,attributes:g}=(0,eL.E)(l.current,u,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),h=(0,s.useMemo)(()=>{let e=i.flat().filter(e=>{let{featureFlag:t}=e;return!t||a[t]}),t=e.findIndex(e=>e.key===ep.Cards);if(t>-1){let[r]=e.splice(t,1);e.push(r)}return e},[i,a]),f=(0,s.useCallback)(()=>{r(null)},[r]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.Tz,{label:"Search",shouldWrapChildren:!0,"aria-label":eo.Ru._({id:"A1taO8"}),placement:"top",portalProps:{appendToParentPortal:!0},children:(0,o.jsx)("div",{ref:c,children:(0,o.jsx)(eM,{testId:eu,icon:er.MjD,label:eo.Ru._({id:"A1taO8"}),onClick:()=>{t?f():r(eu)},isOpen:t,editor:n})})}),t&&(0,o.jsx)(x.Z,{children:(0,o.jsx)(E.B,{ref:p,style:{...m.popper},backgroundColor:d.popoverBackgroundColor,borderRadius:"var(--chakra-radii-xl)",borderColor:d.popoverBorderColor,borderWidth:"1px",boxShadow:"var(--chakra-shadows-xl)",zIndex:"var(--chakra-zIndices-overlay)",overflow:"hidden",maxHeight:"50vh",width:"625px",padding:0,marginEnd:"-0.5rem",position:"relative",className:eG,"data-insert-widget-popover":!0,...g.popper,children:(0,o.jsx)(eQ,{editor:n,closeFn:f,isOpen:t,insertableCategoriesForSearch:h})})})]})});eJ.displayName="SearchAllWidgets";let e$=(0,s.memo)(e=>{let{query:t,onChange:r,isOpen:i}=e,a=eO(),l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{i&&l.current&&setTimeout(()=>{var e;null==l||null==(e=l.current)||e.focus()})},[i]),(0,o.jsx)(n.a,{p:4,borderBottom:"1px solid",borderColor:a.searchInputBorderColor,children:(0,o.jsxs)(eC.M,{size:"md",variant:"outline",children:[(0,o.jsx)(ey.W,{pointerEvents:"none",children:(0,o.jsx)(ej.W,{color:a.searchInputIconColor})}),(0,o.jsx)(ew.p,{ref:l,placeholder:eo.Ru._({id:"W/TXwD"}),value:t,onChange:r,backgroundColor:a.searchInputBackgroundColor,color:a.searchInputTextColor}),t&&(0,o.jsx)(ey.t,{p:4,children:(0,o.jsx)(B.K,{variant:"ghost",colorScheme:a.searchInputCloseColorScheme,size:"xs","aria-label":eo.Ru._({id:"V8yTm6"}),icon:(0,o.jsx)(U.g,{icon:z.Jyw}),onClick:()=>r({target:{value:""}})})})]})})});e$.displayName="SearchInput";let eQ=(0,s.memo)(e=>{let{editor:t,closeFn:r,isOpen:i,insertableCategoriesForSearch:a}=e,{GammaTooltipHiderContext:l,hideTooltips:d}=(0,b.ku)(),c=eO(),u=(0,s.useRef)(null),[p,m]=(0,s.useState)(""),g=(0,s.useMemo)(()=>a.map(e=>{let{name:t,itemGroups:r,icon:o,featureFlag:n,subtitle:i}=e,s=r.map(e=>({...e,items:e.items.filter(e=>{let{name:t,keywords:r=[]}=e;return t().toLowerCase().includes(p.toLowerCase())||r.find(e=>e.startsWith(p.toLowerCase()))})})).filter(e=>e.items.length>0);return s.length>0?{name:t,subtitle:i,icon:o,featureFlag:n,itemGroups:s}:null}).filter(Boolean),[a,p]);return(0,s.useEffect)(()=>{i&&u.current&&u.current.scrollTo({top:0})},[i]),(0,s.useEffect)(()=>{i||m("")},[i]),(0,o.jsxs)(l,{children:[(0,o.jsx)(e$,{query:p,onChange:e=>m(e.target.value),isOpen:i}),(0,o.jsxs)(E.B,{ref:e=>{e&&i&&setTimeout(()=>{e&&e.scrollTo({top:0})},0)},overflow:"hidden auto",p:2,pb:8,spacing:3,children:[!g.length&&(0,o.jsx)(E.B,{alignItems:"center",justifyContent:"center",h:"100%",pt:20,pb:20,children:(0,o.jsx)(eE.p,{size:"xs",title:(0,o.jsx)(W.x6,{id:"X+k8ml"}),description:(0,o.jsx)(W.x6,{id:"kXnLEt"})})}),g.map(e=>{let{name:n,itemGroups:i,icon:s,subtitle:a}=e;return(0,o.jsxs)(E.B,{spacing:2,children:[(0,o.jsx)(b._x,{flex:"1",textAlign:"start",ms:1,children:(0,o.jsxs)(h.s,{alignItems:"center",children:[(0,o.jsx)(U.g,{icon:s}),(0,o.jsxs)(_.E,{ms:2,fontSize:"xs",children:[n,"\xa0"]}),(0,o.jsxs)(_.E,{fontSize:"xxs",color:"gray.500",children:["| ",a]})]})}),i.map((e,n)=>{let{subcategory:s,items:a}=e;return(0,o.jsx)(eZ,{subcategory:s,items:a,editor:t,itemGroupLength:i.length,closeFn:r,hideTooltips:d},n)})]},n)})]}),(0,o.jsx)(n.a,{h:"12",w:"100%",position:"absolute",bottom:"0",bg:"linear-gradient(to bottom, ".concat(c.scrollGradientStart,", ").concat(c.scrollGradientEnd," 90%)"),pointerEvents:"none"})]})});eQ.displayName="SearchAllWidgetsContent";let e0=e=>{let{editor:t}=e,r=(0,I.n)(ex),n=(0,k.mt)(),[i,a]=s.useState(null),l=(0,s.useRef)(null),d=eO();return(0,w.j)({ref:l,handler:e=>{e.target.closest("[data-insert-widget-popover]")||a(null)}}),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(N.z,{bg:d.bg,color:d.iconColor,p:.5,borderWidth:"1px",borderColor:d.border,borderRadius:"md",shadow:"lg",ref:l,overflow:"hidden",spacing:1,"data-testid":"insert-widget-inner",pointerEvents:"auto",children:[(0,o.jsx)(eJ,{setOpenButton:a,isOpen:"search"===i,editor:t,insertableCategoriesListLocalized:r,allFlags:n,containerRef:l}),r.map((e,r)=>(0,o.jsxs)(s.Fragment,{children:[r>0&&(0,o.jsx)(S.c,{borderColor:d.dividerColor}),e.map(e=>{let{name:r,shortName:s,itemGroups:d,icon:c,featureFlag:u,subtitle:p,key:m}=e;return u&&!n[u]?null:(0,o.jsx)(eY,{itemGroups:d,icon:c,name:r,shortName:s,subtitle:p,editor:t,setOpenButton:a,isOpen:i===r,containerRef:l},m)})]},r))]})})},e1=e=>{let{editor:t}=e,r=eF(),n=(0,m.GV)((0,eD.lp)("left")),i=(0,m.GV)((0,eD.lp)("right"));return r?(0,o.jsx)(h.s,{position:"fixed",paddingLeft:"calc(var(--doc-padding-left) + ".concat(n,"px)"),paddingRight:"calc(var(--doc-padding-right) + ".concat(i,"px)"),bottom:"30px",insetStart:0,insetEnd:0,align:"center",alignItems:"center",justifyContent:"center",zIndex:"sticky","data-testid":"insert-widget-wrapper",pointerEvents:"none",children:(0,o.jsx)(h.s,{position:"relative","data-guider-highlight":"insert-widget",direction:"row",className:"insert-widget",children:(0,o.jsx)(e0,{editor:t})})}):null},e2=(0,s.memo)(e=>{let{editor:t}=e,[r,n]=(0,s.useState)(!1),i=(0,j.rd)();return((0,s.useEffect)(()=>f.R.on("bringInsertWidgetToFront",e=>{let{inFront:t}=e;n(t)}),[]),r)?(0,o.jsx)(b.L8,{isDark:i,children:(0,o.jsx)(x.Z,{children:(0,o.jsx)(e1,{editor:t})})}):(0,o.jsx)(b.L8,{isDark:i,children:(0,o.jsx)(e1,{editor:t})})});var e5=r(91242),e6=r(82927),e4=r(11403),e8=r(49251),e7=r(45373),e9=r(90184),e3=r(62590),te=r(77711);let tt=(0,s.memo)(e=>{let{editor:t}=e,r=k.of.get("arrowAutocomplete"),[n,i]=(0,s.useState)(null),[a,l]=(0,s.useState)(null),{hideTooltips:d,GammaTooltipHiderContext:c}=(0,b.ku)();return((0,s.useEffect)(()=>{t&&t.commands.command(e=>{let{tr:t}=e;return t.setMeta(te.f,{buttonElement:a,tippyTarget:n,onHide:d}),!0})},[t,n,a,d]),r)?(0,o.jsx)("div",{ref:i,style:{visibility:"hidden"},children:(0,o.jsx)(h.s,{ref:l,children:(0,o.jsx)(c,{children:(0,o.jsx)(tr,{editor:t})})})}):null});tt.displayName="AutocompleteButton";let tr=e=>{let{editor:t}=e,r=(0,m.GV)(ez.SJ),n=(0,j.rd)(),[i,a]=(0,s.useState)(n);return(0,s.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,e3.e)(t,r);a(void 0!==e?e:n)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t,n,r]),(0,o.jsx)(b.L8,{isDark:i,children:(0,o.jsx)(b.Tz,{label:(0,o.jsxs)(N.z,{gap:.5,children:[(0,o.jsx)(_.E,{children:eo.Ru._({id:"ZyVTQp"})}),(0,o.jsx)(e9.G,{type:"autocomplete",bg:"transparent",p:0}),(0,o.jsx)(b.iM,{shortcut:"Tab"})]}),placement:"top",children:(0,o.jsx)(eN.$,{variant:"plain",size:"xs",padding:"1px 2px",borderRadius:"4px",background:"none",fontSize:"0.7em",transition:"var(--chakra-transition-property-colors)",children:(0,o.jsx)(U.g,{icon:z.up_})})})})};var to=r(12417),tn=r(17859),ti=r(24037);let ts=(0,s.memo)(e=>{let{editor:t,getNodePos:r,children:n,tippyOptions:i}=e,[a,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(null);return(0,s.useEffect)(()=>{t&&t.commands.command(e=>{let{tr:t}=e;return t.setMeta(ti.X,{element:d,tippyTarget:a,getNodePos:r,tippyOptions:i}),!0})},[t,d,a,r,i]),(0,o.jsx)("div",{ref:l,style:{visibility:"hidden"},id:"gamma-bubble-menu",children:(0,o.jsx)("div",{ref:c,children:n})})});ts.displayName="GammaBubbleMenu";var ta=r(23050);let tl=(0,s.memo)(e=>{let{editor:t}=e;return k.of.get("arrowAutocomplete")?(0,o.jsx)(ts,{editor:t,getNodePos:()=>{let e=ta.nD.getState(t.view.state),r=t.view.state.selection;return e&&e.insertedRange&&null!==e.insertedRange.to&&e.insertedRange.to===r.from?e.insertedRange.to:null},tippyOptions:{placement:"bottom",hideOnClick:!1,offset:[0,5]},children:(0,o.jsx)(td,{editor:t})}):null});tl.displayName="AutocompleteFeedback";let td=e=>{let{editor:t}=e,r=(0,m.GV)(ez.SJ),n=(0,j.rd)(),[i,a]=(0,s.useState)(n),[l,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!t)return;let e=()=>{d(null);let e=(0,e3.e)(t,r);a(void 0!==e?e:n);let o=ta.nD.getState(t.view.state),i=o&&o.insertedRange&&null!==o.insertedRange.from;u(null!=i&&i)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t,n,r]),(0,w.j)({ref:p,handler:e=>{let r=e.target.closest("[data-rating-buttons]"),o=e.target.closest("[data-rating-popover]");if(r||o)return;let n=ta.nD.getState(t.view.state);n&&n.insertedRange&&null!==n.insertedRange.from&&t.commands.setMeta("autocompleteEvent",{type:"reset"})}});let g=(0,s.useCallback)((e,r,o)=>{var n;let i=null==(n=te.f.getState(t.state))?void 0:n.interactionId;(0,tn.xj)({feedback:r,tags:o,rating:e,interactionId:i})},[t]),x=(0,s.useCallback)(e=>{var r;let o=null==(r=te.f.getState(t.state))?void 0:r.interactionId;d(e),(0,tn.Dx)({rating:e,interactionId:o})},[t]);return(console.log("shouldShow",c),c)?(0,o.jsx)(b.L8,{isDark:i,children:(0,o.jsx)(h.s,{ref:p,backgroundColor:i?"gray.800":"gray.200",p:1,borderRadius:"md",position:"relative",_before:{content:'""',position:"absolute",top:"-4px",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:"4px solid ".concat(i?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)")},children:(0,o.jsx)(to.f3,{rating:l||void 0,setRating:x,trackFeedback:g,RatingButtons:to.Ep,feedbackTags:tc(),size:"xs"})})}):null},tc=()=>[{key:"too-long",label:(0,o.jsx)(W.x6,{id:"yIsdT7"})},{key:"too-short",label:(0,o.jsx)(W.x6,{id:"CALFDl"})},{key:"didnt-follow-prompt",label:(0,o.jsx)(W.x6,{id:"xZPdUv"})},{key:"wrong-formatting",label:(0,o.jsx)(W.x6,{id:"4xQrPc"})}];var tu=r(72688),tp=r(61385),tm=r(87930);let tg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";(0,s.useEffect)(()=>{let t,r=document.querySelector(e);if(!r)return;let o=e=>{var o,n;(null==(o=document.activeElement)?void 0:o.tagName)==="IFRAME"&&document.activeElement instanceof HTMLIFrameElement&&!t?(console.debug("[EditorCore] Prevented scrolling at page load from iframe",e,document.activeElement),r.scrollTo(0,0),document.activeElement.blur()):(null==(n=document.activeElement)?void 0:n.tagName)==="IFRAME"&&0===e.target.scrollTop&&t>50?(console.debug("[EditorCore] Prevented scrolling to top from iframe",e,t,document.activeElement),r.scrollTo(0,t)):t=e.target.scrollTop};return r.addEventListener("scroll",o,{passive:!0}),()=>r.removeEventListener("scroll",o)},[e])};var th=r(43607),tx=r(30524),tb=r(18934),tf=r(73071),tj=r(41896),tv=r(95081),tC=r(53996),ty=r(80314),tw=r(24926),tE=r(83004),tS=r(55452),tk=r(30645),tI=r(1079),tR=r(49337),tT=r(37605);class tB extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message}}componentDidCatch(e,t){this.errorEventId=tS.Cp(e,{extra:{info:null==t?void 0:t.componentStack}}),tw.yf.logger.error("[EditorCoreErrorBoundary]",{event:tT.ng.EDITOR_CORE_ERROR,docId:this.props.docId},e)}render(){return this.state.hasError?(0,o.jsx)(tA,{errMessage:this.state.errMessage,errorId:this.errorEventId,isInsideDrawer:this.props.isInsideDrawer}):this.props.children}constructor(e){super(e),this.errorEventId=null,this.state={hasError:!1,errMessage:""}}}let tD=["collaborative-editor-wrapper","public-static-editor-wrapper-inner","example-static-editor-wrapper-inner","custom-theme-tabs","custom-theme-tab-panels","custom-theme-preview-editor"].map(e=>'[data-testid="'.concat(e,'"]')).join(", "),tA=e=>{let{errMessage:t,errorId:r,isInsideDrawer:n=!1}=e,i=(0,p.u)("intercom"),s=(0,tR.k)();return(0,o.jsxs)(h.s,{minH:"100%",direction:"column","data-editor-error-component":!0,align:"center",children:[(0,o.jsx)(tE.mL,{styles:{[tD]:{height:"100%"},html:{height:"100%"},body:{height:"100%"}}}),(0,o.jsx)(tC.o,{flex:1,w:"100%",px:6,children:(0,o.jsxs)(tk.K,{title:(0,o.jsx)(W.x6,{id:"q54tkL"}),message:(0,o.jsx)(W.x6,{id:"qeLWZE"}),stackProps:{maxWidth:"min(450px, 100%)"},children:[t&&(0,o.jsxs)(ev.C,{display:"block",py:1,px:{base:4,md:12},maxW:"100%",children:[t,r&&(0,o.jsx)(W.x6,{id:"sS1P4/",values:{errorId:r},components:{0:(0,o.jsx)("br",{})}})]}),!n&&(0,o.jsxs)(N.z,{wrap:"wrap",justifyContent:"center",pb:4,spacing:3,mt:2,children:[(0,o.jsx)(eN.$,{variant:"solid",onClick:()=>{window.location.reload()},leftIcon:(0,o.jsx)(U.g,{fixedWidth:!0,icon:z.lLb}),children:(0,o.jsx)(W.x6,{id:"SnHWX8"})}),(0,o.jsx)(eN.$,{variant:"plain",onClick:i?s:void 0,leftIcon:(0,o.jsx)(U.g,{fixedWidth:!0,icon:i?z.gSF:z.y_8}),as:i?ty.N:void 0,href:i?void 0:"mailto:".concat(tI.J),children:(0,o.jsx)(W.x6,{id:"mpby9d"})})]})]})})]})};var t_=r(82957),tz=r(76610);let tU=e=>new Promise(t=>{setTimeout(()=>{requestAnimationFrame(()=>{let r=e.state.doc.resolve(1),o=(0,e5.s)(r,1,!0);o&&e.commands.command(e=>{let{tr:t}=e;return t.setSelection(o),!0}),t()})})}),tW=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,g.O2)("editor"),o=(0,m.GV)(t=>{let r=(0,ez.wC)(t),o=(0,ez.$i)(t);return r===eU.w.SLIDE_VIEW&&o?(0,tp.OB)(o):e});(0,s.useEffect)(()=>{t&&o&&r.setScrollSelector(o)},[t,r,o])},tF=e=>{let{onCreate:t=()=>{},extensions:r=[],readOnly:g=!0,shouldSupportComments:h=!1,shouldSupportMenus:x=!1,initialContent:b,doc:f,docId:j,isStatic:v=!1,animationsEnabled:C=!0,scrollingParentSelector:y,theme:w,editorId:E,isThumbnail:S}=e,k=(0,e6.Iy)("edit",f),I=(null==f?void 0:f.organization)&&f.organization.id,[R]=(0,s.useState)(x),[T,B]=(0,s.useState)(!1),D=(0,a.wA)(),A=(0,m.GV)(ez.Cl),_=(0,s.useMemo)(()=>(0,t_.C)(),[]),z=(0,i.I)(),U=(0,p.u)("debugLogging"),W=!!(null==f?void 0:f.site),{setEditorRendered:F,onEditorUnload:L}=(0,tf.f)(E);tg(y),tW(y,!v);let G=(0,tj.hG)({async onCreate(e){let{editor:t}=e;console.debug("[EditorCore][onCreate] TipTap editor is now ready"),(0,tz.m)(t,D),B(!0)},onUpdate(e){var t,r;let{editor:o}=e;null==(t=tm.U.getState(o.state))||t.processChanges(D),null==(r=tu.Jl.getState(o.state))||r.processChanges(D)},onSelectionUpdate(e){let{editor:t}=e;console.debug("[EditorCore][onSelectionUpdate] selection updated",t.state.selection.from,t.state.selection.to,t.state.selection)},onDestroy(){U&&console.warn("[EditorCore][onDestroy] This should only happen on page navigation."),L(),D((0,ez.cL)()),D((0,c.qq)())},extensions:_.concat(r),content:b,editable:!1});S&&(G.isThumbnail=!0),G.isReadOnly=!!g,(0,u.GZ)(G);let N=!!(G&&T);return((0,s.useEffect)(()=>{w&&D((0,ez.Yl)({theme:w}))},[w,D]),(0,e4.Vg)(()=>{G&&N&&(G.commands.migrateNativeEmojis(),tU(G).then(()=>{console.debug("[EditorCore][fullyReady] Menus initialized & focused at start - fully ready"),t({editor:G}),requestAnimationFrame(()=>{requestIdleCallback(()=>{F()})})}))},[G,N,t,F],[N]),(0,s.useEffect)(()=>{D((0,ez.Rs)({isStatic:v})),G.isStatic=v},[G,v,D]),(0,s.useEffect)(()=>{D((0,ez.$j)({animationsEnabled:C&&!1===z}))},[C,z,D]),(0,s.useEffect)(()=>{D((0,ez.yJ)({commentsEnabled:h}))},[h,D]),(0,s.useEffect)(()=>{if(G)return l.$.DEBUG_ENABLED&&void 0===window.gammaEditorCore&&(window.gammaEditorCore=G,window.contentToAIHTML=function(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,o=void 0===r?null==G||null==(e=G.state.doc.firstChild)?void 0:e.content:null==G||null==(t=G.state.doc.firstChild)?void 0:t.content.content[r];if(G&&o)return(0,d.KC)(G,o)},window.hashCard=e=>{let t=performance.now(),r=window.contentToAIHTML(e);if(G&&r)return{content:r,hash:function(e){let t=0x811c9dc5;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return(t>>>0).toString(16)}(r),duration:performance.now()-t}}),G.gammaOrgId=I,G.gammaDocId=j,G.editorId=E,G.multipageEnabled=W,()=>{delete window.gammaEditorCore}},[G,j,I,E,W]),(0,s.useEffect)(()=>{G&&D((0,ez.kd)({isAllowedToEdit:k&&!g}))},[G,D,g,k]),(0,s.useEffect)(()=>{G&&N&&requestAnimationFrame(()=>{G.setOptions({editable:A})})},[G,D,A,N,F]),(0,th.gp)(G),(0,th.l3)(G),(0,th.eb)(G,A),(0,th.WS)(G),G&&T)?(0,o.jsx)(tb.Q,{value:E,children:(0,o.jsxs)(n.a,{id:"editor-core-root",className:"editor-core-root","data-testid":"editor-core-root",width:"100%",position:"relative",sx:tv.q,children:[(0,o.jsx)(tj.$Z,{editor:G,style:{width:"100%",height:"100%"},"data-testid":"tiptap-react-root-wrapper",className:"highlight-mask"}),R&&(0,o.jsx)(tx.A,{editorId:E,children:(0,o.jsx)(tG,{editor:G,scrollingParentSelector:y})})]})}):(0,o.jsx)(o.Fragment,{})},tL=e=>{let{isInsideDrawer:t,...r}=e;return(0,o.jsx)(tB,{isInsideDrawer:t,docId:r.docId,children:(0,o.jsx)(tF,{...r})})},tG=(0,s.memo)(e=>{let{editor:t,scrollingParentSelector:r}=e,n=(0,p.u)("insertWidgetBottom");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e7.Ht,{editor:t,scrollingParentSelector:r}),n?(0,o.jsx)(e2,{editor:t}):(0,o.jsx)(eB,{editor:t}),(0,o.jsx)(e8.G,{editor:t}),(0,o.jsx)(tt,{editor:t}),(0,o.jsx)(tl,{editor:t})]})})},24037:(e,t,r)=>{r.d(t,{X:()=>o});let o=new(r(63867)).hs("gammaBubbleMenu")},77711:(e,t,r)=>{r.d(t,{f:()=>o});let o=new(r(63867)).hs("autocompleteButton")}}]);
//# sourceMappingURL=817-6a4878c3f59a5f0e.js.map