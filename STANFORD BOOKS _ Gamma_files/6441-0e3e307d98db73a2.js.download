"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6441],{51988:(e,s,i)=>{i.d(s,{J:()=>c});var n=i(6029),l=i(26385),r=i(48810),a=i(19564),o=i(77650),t=i(55729),d=i(68871);let c=e=>{let{password:s,setPassword:i,retypedPassword:c,setRetypedPassword:x,onValidationChange:j}=e,u=s.length>0?(0,d.O)(s):[],h=s!==c,p=(0!==u.length||h)&&s.length>0;return(0,t.useEffect)(()=>{null==j||j(p)},[p,j]),(0,n.jsxs)(l.B,{spacing:4,children:[(0,n.jsx)(d.s,{label:(0,n.jsx)(a.x6,{id:"/nT6AE"}),placeholder:o.Ru._({id:"0StR7t"}),value:s,onChange:e=>i(e.target.value),showHelp:!1}),(0,n.jsx)(d.s,{label:(0,n.jsx)(a.x6,{id:"u968bF"}),placeholder:o.Ru._({id:"hyMBbi"}),value:c,onChange:e=>x(e.target.value),showHelp:!0}),(0,n.jsxs)(l.B,{spacing:1,mt:1,children:[h&&(0,n.jsx)(r.E,{color:"red.500",fontSize:"sm",children:(0,n.jsx)(a.x6,{id:"iHXlwG"})}),u.map((e,s)=>(0,n.jsx)(r.E,{color:"red.500",fontSize:"sm",children:e},s))]})]})}},68871:(e,s,i)=>{i.d(s,{s:()=>f,O:()=>g});var n=i(6029),l=i(27229),r=i(40697),a=i(83638),o=i(25223),t=i(72470),d=i(38036),c=i(77979),x=i(16936),j=i(5091),u=i(19564),h=i(77650),p=i(55729),m=i(36034);let g=e=>{let s=[];return e.length<8&&s.push(h.Ru._({id:"cUUVem"})),e.match(/[A-Z]/)||s.push(h.Ru._({id:"+6oZdK"})),e.match(/[a-z]/)||s.push(h.Ru._({id:"Cjay54"})),e.match(/[0-9]/)||s.push(h.Ru._({id:"XcEl4D"})),e.match(/[\^$*.[\]{}()?"!@#%&/\\,><':;|_~`=+-]/)||s.push(h.Ru._({id:"EodnCE"})),s},f=(0,p.forwardRef)((e,s)=>{let{isOpen:i,onToggle:g}=(0,l.j)(),f=(0,p.useRef)(null),v=(0,p.useId)(),C=(0,r.SV)(f,s),b=!!((null==e?void 0:e.error)&&e.error.length>1);return(0,n.jsxs)(a.MJ,{isInvalid:b,children:[(0,n.jsx)(o.l,{htmlFor:v,fontSize:{base:"sm",md:"md"},mb:1,children:e.label||(0,n.jsx)(u.x6,{id:"8ZsakT"})}),(0,n.jsxs)(t.M,{children:[(0,n.jsx)(d.p,{id:v,ref:C,name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,...e}),(0,n.jsx)(c.t,{children:(0,n.jsx)(x.K,{variant:"ghost","aria-label":i?h.Ru._({id:"KJAyEq"}):h.Ru._({id:"B+wtoH"}),icon:i?(0,n.jsx)(m.QLA,{}):(0,n.jsx)(m.zeF,{}),onClick:()=>{g(),f.current&&f.current.focus({preventScroll:!0})},tabIndex:0})})]}),e.showHelp&&(0,n.jsx)(a.eK,{children:(0,n.jsx)(u.x6,{id:"v6cuzy"})}),e.error&&(0,n.jsx)(j.Wt,{children:e.error})]})});f.displayName="PasswordField"},96441:(e,s,i)=>{i.d(s,{Y:()=>a,X:()=>eV});var n=i(6029),l=i(40452),r=i(3276);let a=()=>(0,n.jsx)(l.s,{className:"full-page-spinner",flex:"1",justifyContent:"center",alignItems:"center",children:(0,n.jsx)(r.y,{})});var o=i(27229),t=i(78140),d=i(36999),c=i(96990),x=i(12514),j=i(41283),u=i(85595),h=i(83550),p=i(6760),m=i(99492),g=i(55597),f=i(48621),v=i(47412),C=i(19564),b=i(55729),y=i(91938),w=i(82328),E=i(19783),S=i(68301),k=i(5063),O=i(99767),A=i(73110),z=i(95889),I=i(82927),D=i(92816),R=i(58959),_=i(48810),U=i(64268),N=i(26385),M=i(96500),B=i(46898),T=i(67909),W=i(36071),P=i(54731),F=i(17920),L=i(3674),G=i(40691),$=i(26420),H=i(61491),J=i(16426),V=i(61204),K=i(49611),Q=i(77650),Z=i(88586),q=i(99038);let X=()=>(0,n.jsxs)(R.z,{px:2,py:2,border:"2px solid var(--chakra-colors-red-500)",borderRadius:"md",children:[(0,n.jsx)(D.u,{w:4,h:4,color:"red.500"}),(0,n.jsx)(_.E,{fontSize:"sm",color:"red.500",children:(0,n.jsx)(C.x6,{id:"Ofm9ns"})})]}),Y=e=>{let{user:s,workspace:i,canDeleteAccount:r}=e;return(0,n.jsxs)(U.F,{status:s||(null==i?void 0:i.memberCount)&&i.memberCount<=1?"error":"warning",display:"flex",flexDirection:"column",alignItems:"normal",mt:2,children:[(0,n.jsxs)(l.s,{pb:3,flexDirection:["column","column","row","row"],align:"flex-start",gap:2,children:[(0,n.jsxs)(l.s,{flex:1,children:[(0,n.jsx)(c.e,{src:null==s?void 0:s.profileImageUrl,size:"sm",name:(null==s?void 0:s.displayName)||(null==i?void 0:i.name)}),(0,n.jsxs)(N.B,{spacing:0,ml:2,flex:"1",children:[(0,n.jsx)(_.E,{fontSize:"sm",flex:"1",wordBreak:"break-word",children:(null==s?void 0:s.displayName)||(null==i?void 0:i.name)}),s&&(0,n.jsx)(_.E,{fontSize:"xs",color:"gray.600",flex:"1",wordBreak:"break-word",children:s.email}),i&&(0,n.jsx)(_.E,{fontSize:"xs",color:"gray.600",children:(0,n.jsx)(C.x6,{id:"LaQ44M",values:{0:i.memberCount||0}})})]})]}),(0,n.jsx)(l.s,{flexShrink:1,children:(s||i&&(null==i?void 0:i.memberCount)===1)&&(0,n.jsx)(X,{})})]}),(0,n.jsx)(M.c,{borderColor:"blackAlpha.200"}),(0,n.jsxs)(_.E,{pt:2,fontSize:"sm",color:s||(null==i?void 0:i.memberCount)&&i.memberCount<=1?"red.500":"yellow.700",children:[r&&s&&(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(C.x6,{id:"j95nHI",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:q.Ix}})]}),r&&(null==i?void 0:i.memberCount)&&(i.memberCount>1?(0,n.jsxs)(n.Fragment,{children:["⚠️ ",(0,n.jsx)(C.x6,{id:"QnF/9z"})]}):(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(C.x6,{id:"PU+L+E",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:q.Ix}})]})),!r&&(0,n.jsxs)(n.Fragment,{children:["⚠️"," ",(0,n.jsx)(C.x6,{id:"eFx5qm"})]})]})]})},ee=e=>{var s,i;let{isOpen:l,onClose:r,user:a}=e,[o,t]=(0,b.useState)(!1),[d,c]=(0,b.useState)(!1),{data:x}=(0,Z.Agb)(),j=(0,B.d)(),[u]=(0,Z.HCE)(),h=(null==x||null==(i=x.user)||null==(s=i.workspaceMemberships)?void 0:s.filter(e=>!1===e.disabled))||[],p=h.filter(e=>{var s,i;return"admin"===e.role&&(null==(s=e.workspace)?void 0:s.adminCount)===1&&(null==(i=e.workspace)?void 0:i.memberCount)&&e.workspace.memberCount>1}),m=h.map(e=>e.workspace),g=0===p.length,f=(0,b.useCallback)(()=>{c(!0),u().then(e=>{let{data:s}=e;s&&(window.location.href="".concat(y.$.API_HOST,"/logout?redirectTo=/user-deleted"))}).catch(()=>{c(!1),j({title:"Delete account failed. Try again or reach out to Gamma support.",status:"error",duration:3e3,position:"top",isClosable:!0})})},[j,u]);return(0,n.jsxs)(T.aF,{isOpen:l,onClose:r,size:"lg",closeOnOverlayClick:!1,children:[(0,n.jsx)(W.m,{}),(0,n.jsxs)(P.$,{p:2,children:[(0,n.jsx)(F.r,{children:(0,n.jsx)(C.x6,{id:"pj33Dr",values:{GAMMA_PROPER_NOUN:q.On}})}),(0,n.jsx)(L.s,{}),(0,n.jsxs)(G.c,{children:[g&&(0,n.jsxs)(N.B,{spacing:3,children:[(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"gICMDu"})}),(0,n.jsxs)($.a,{children:[(0,n.jsx)(_.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"sG4820"})}),(0,n.jsx)(Y,{user:a,canDeleteAccount:g})]}),m&&m.length>0&&(0,n.jsxs)($.a,{children:[(0,n.jsx)(_.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"dFEw4P"})}),null==m?void 0:m.map(e=>(0,n.jsx)(Y,{workspace:e,canDeleteAccount:g},null==e?void 0:e.id))]}),(0,n.jsxs)($.a,{children:[(0,n.jsx)(_.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"R3XcoA"})}),(0,n.jsxs)(R.z,{bg:"gray.50",mt:2,p:3,pl:2,spacing:2,borderRadius:"sm",children:[(0,n.jsx)(H.S,{size:"lg",spacing:"1rem",p:3,defaultChecked:o,onChange:e=>t(e.target.checked)}),(0,n.jsx)(_.E,{fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"4YT8Pd"})})]})]})]}),!g&&(0,n.jsx)(N.B,{children:(0,n.jsxs)($.a,{children:[(0,n.jsx)(_.E,{colorScheme:"gray",fontSize:"sm",children:(0,n.jsx)(C.x6,{id:"nhUDfL"})}),null==m?void 0:m.map(e=>(0,n.jsx)(Y,{workspace:e,canDeleteAccount:g},null==e?void 0:e.id))]})})]}),g&&(0,n.jsx)(J.j,{children:(0,n.jsxs)(V.e,{children:[(0,n.jsx)(K.$,{variant:"ghost",colorScheme:"gray",onClick:r,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),(0,n.jsx)(K.$,{isDisabled:!o,variant:"hazardous",onClick:f,isLoading:d,loadingText:Q.Ru._({id:"O71YIC"}),children:(0,n.jsx)(C.x6,{id:"dfBVKc"})})]})})]})]})};var es=i(33787),ei=i(58297),en=i(17496),el=i(5091),er=i(83638),ea=i(25223),eo=i(38036),et=i(29810),ed=i(23293),ec=i(99430),ex=i(81278),ej=i(79138),eu=i(47880),eh=i(87996),ep=i(18640),em=i(22445),eg=i(60908);let ef=e=>{let{isOpen:s,onClose:i,onConfirm:l,onDiscard:r,originalLocaleConfirmStrings:a}=e;return(0,n.jsxs)(T.aF,{isOpen:s,onClose:i,size:"xl",children:[(0,n.jsx)(W.m,{}),(0,n.jsxs)(P.$,{children:[(0,n.jsx)(F.r,{children:(0,n.jsxs)(N.B,{spacing:0,children:[(0,n.jsx)(C.x6,{id:"sCTlv5"}),(null==a?void 0:a.title)?(0,n.jsxs)(_.E,{children:["(",null==a?void 0:a.title,")"]}):null]})}),(0,n.jsx)(L.s,{}),(0,n.jsx)(G.c,{children:(0,n.jsxs)(N.B,{spacing:0,children:[(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"EVJO23"})}),(null==a?void 0:a.body)?(0,n.jsxs)(_.E,{children:["(",null==a?void 0:a.body,")"]}):(0,n.jsx)(n.Fragment,{})]})}),(0,n.jsx)(J.j,{children:(0,n.jsxs)(V.e,{flexWrap:"wrap",gap:"3",justifyContent:"flex-end",spacing:"0",children:[(0,n.jsx)(K.$,{variant:"ghost",onClick:r,...(null==a?void 0:a.secondaryCTA)?{height:"fit-content",py:4}:{},children:(0,n.jsxs)(N.B,{spacing:0,children:[(0,n.jsx)(C.x6,{id:"3EbjfR"}),(null==a?void 0:a.secondaryCTA)?(0,n.jsxs)(_.E,{children:["(",null==a?void 0:a.secondaryCTA,")"]}):null]})}),(0,n.jsx)(K.$,{variant:"solid",onClick:l,...(null==a?void 0:a.primaryCTA)?{height:"fit-content",py:4}:{},children:(0,n.jsxs)(N.B,{spacing:0,children:[(0,n.jsx)(C.x6,{id:"y3aU20"}),(null==a?void 0:a.primaryCTA)?(0,n.jsxs)(_.E,{children:["(",null==a?void 0:a.primaryCTA,")"]}):null]})})]})})]})]})},ev={cropped:"",original:""};var eC=function(e){return e.GOOGLE="GOOGLE",e.PASSWORD="PASSWORD",e}(eC||{});let eb=e=>{var s,i,a,o;let{isOpen:x,onClose:h,onAccountDeleteModalOpen:y,user:w,orgId:E}=e,k=(0,S.u)("passwordResetUI"),D=(0,z.st)(),U=(0,B.d)(),[V,{loading:q,error:X}]=(0,Z.H7G)(),[Y,ee]=(0,b.useState)(!1),{isOpen:eC,onOpen:eb,onClose:ey}=(0,em.E)({id:"account-settings-unsaved-changes"}),ew=(0,ex.useRouter)(),{setSettings:eE}=(0,I.ur)(),eS=(0,A.O)(),ek=(0,b.useMemo)(()=>eS,[]),[eO,eA]=(0,b.useState)(ek),[ez]=(0,b.useState)({title:Q.Ru._({id:"sCTlv5"}),body:Q.Ru._({id:"EVJO23"}),primaryCTA:Q.Ru._({id:"y3aU20"}),secondaryCTA:Q.Ru._({id:"3EbjfR"})});(0,eu.O)(eO);let[eI,eD]=(0,b.useState)(w.firstName||""),[eR,e_]=(0,b.useState)(w.lastName||""),[eU,eN]=(0,b.useState)((null==(s=w.settings)?void 0:s.unsubscribeAnnouncementEmails)||!1),[eM,eB]=(0,b.useState)((null==(i=w.settings)?void 0:i.unsubscribeOnboardingEmails)||!1),eT=!eM,eW=!eU,[eP,eF]=(0,b.useState)(w.profileImageUrl||null),[eL,eG]=(0,b.useState)(ev),[e$,eH]=(0,b.useState)("original"),eJ=eL.cropped&&"cropped"===e$?eL.cropped:eL.original&&"original"===e$?eL.original:eP,[eV,eK]=(0,b.useState)("idle"),eQ=(0,b.useMemo)(()=>eh.Fk.createUppyInstance(E,{onUploadStart:e=>{eG(ev),eK("uploading"),eH("original"),(0,eg.aI)(e.file.type||"")||eF(e.tempUrl)},onOriginalFileUpload:e=>{console.debug("[AccountSettingsModal] onOriginalFileUpload",e),eF(e.src),eG(s=>({...s,original:e.src}))},onUploadComplete:e=>{console.debug("[AccountSettingsModal] onUploadComplete",e),eF(s=>s||e.src),eG(()=>({original:e.src,cropped:e.croppedFace||""})),eK("idle"),eQ.cancelAll()},onUploadFailed:()=>{eK("error"),eQ.cancelAll()}},"profile"),[E]),{onClick:eZ,inputElement:eq}=(0,ep.W)({uppy:eQ}),eX=(0,b.useCallback)(()=>{y&&(y(),h())},[y,h]),eY=(0,b.useCallback)(()=>{null==D||D.track(z.VV.USER_PASSWORD_RESET),h(),ew.push("/forgot?email=".concat(encodeURIComponent(w.email)))},[ew,w.email,h,D]),e0=(0,b.useCallback)(()=>{var e,s;eQ.cancelAll(),eK("idle"),eD(w.firstName||""),e_(w.lastName||""),eF(w.profileImageUrl||null),eN((null==(e=w.settings)?void 0:e.unsubscribeAnnouncementEmails)||!1),eB((null==(s=w.settings)?void 0:s.unsubscribeOnboardingEmails)||!1),eH("original"),eG(ev),eA(ek)},[w,ek,eQ]),e6=eO!==ek,e1=!!(null==(a=w.settings)?void 0:a.unsubscribeAnnouncementEmails)!==eU,e2=!!(null==(o=w.settings)?void 0:o.unsubscribeOnboardingEmails)!==eM,e5=eI!==w.firstName||eR!==w.lastName||eP!==w.profileImageUrl,e3=(0,b.useMemo)(()=>e5||e6||e1||e2,[e6,e5,e1,e2]),e8=(0,b.useCallback)(()=>{if(!e3)return void h();let e=[],s=e6&&O.jF.includes(eO);eE&&(s||e1||e2)&&e.push(eE({set:{...s?{locale:eO}:{},...e1?{unsubscribeAnnouncementEmails:eU}:{},...e2?{unsubscribeOnboardingEmails:eM}:{}}})),e5&&e.push(V({variables:{input:{id:w.id,firstName:eI,lastName:eR,profileImageUrl:eP||""}}})),ee(!0),Promise.all(e).then(()=>{h(),U({title:(0,n.jsx)(C.x6,{id:"wAvGr+"}),position:"top",status:"success",isClosable:!0,duration:3e3})}).catch(e=>{console.error('[AccountSettingsModal.onSaveClick] Error updating user info "'.concat(null==w?void 0:w.id,'"'),e.message)}).finally(()=>{ee(!1)})},[eI,e3,e6,e5,eR,eO,h,eP,eE,U,eU,e1,eM,e2,V,w.id]),e4=eI.length<1&&eR.length<1||!!(null==X?void 0:X.message)||"error"===eV,e9=(0,b.useCallback)(()=>{e3?eb():h()},[e3,h,eb]);return(0,n.jsxs)(T.aF,{isOpen:x,onClose:e9,size:"2xl",closeOnOverlayClick:!1,children:[eq,(0,n.jsxs)($.a,{w:0,h:0,children:[(0,n.jsx)(es._,{src:eL.original}),(0,n.jsx)(es._,{src:eL.cropped})]}),(0,n.jsx)(W.m,{}),(0,n.jsxs)(P.$,{children:[(0,n.jsx)(F.r,{children:(0,n.jsx)(C.x6,{id:"T3FM0r"})}),(0,n.jsx)(L.s,{}),(0,n.jsx)(M.c,{mb:4}),(0,n.jsx)(G.c,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,n.jsxs)(N.B,{direction:"column",w:"100%",px:4,spacing:10,children:[(0,n.jsxs)(l.s,{direction:{base:"column",md:"row"},justifyContent:"space-between",w:"100%",gap:4,children:[(0,n.jsxs)(N.B,{direction:"column",alignItems:"center",px:10,justifyContent:"center",width:{md:"50%"},maxWidth:{md:"50%"},children:[(0,n.jsxs)(t.W,{placement:"bottom-start",offset:[100,0],children:[(0,n.jsx)(v.Tz,{label:(0,n.jsx)(C.x6,{id:"etzA4s"}),openDelay:750,placement:"top",children:(0,n.jsx)(d.I,{position:"relative",disabled:"uploading"===eV,userSelect:"none",cursor:"pointer",role:"group",_hover:{opacity:.9},children:(0,n.jsxs)(c.e,{src:eJ||"",name:"".concat(eI," ").concat(eR).trim(),size:"2xl",_groupHover:{shadow:"lg"},ignoreFallback:!0,children:["uploading"===eV&&(0,n.jsx)(ei.j,{position:"absolute",size:"full",justifyContent:"center",alignItems:"center",bg:"gray.300",opacity:.5,children:(0,n.jsx)(r.y,{size:"xl",thickness:"2px"})}),(0,n.jsx)(ei.j,{position:"absolute",bottom:0,right:0,borderRadius:"full",color:"gray.700",textAlign:"center",bg:"gray.200",size:9,_groupHover:{shadow:"lg",transform:"scale(1.02)"},children:(0,n.jsx)(f.g,{icon:eP?m.rwq:m.MT7,width:16,height:16,size:"xs"})})]})})}),(0,n.jsxs)(j.c,{fontSize:"sm",children:[(0,n.jsx)(u.D,{onClick:()=>{"uploading"!==eV&&eZ()},children:(0,n.jsxs)(R.z,{children:[(0,n.jsx)(f.g,{icon:g.MNJ}),(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"wPTug2"})})]})}),eP&&(0,n.jsx)(p.N,{}),eP&&(0,n.jsx)(u.D,{onClick:()=>{eF(null),eG(ev)},children:(0,n.jsxs)(R.z,{color:"var(--chakra-colors-red-500)",children:[(0,n.jsx)(f.g,{icon:m.sjs,color:"var(--chakra-colors-red-500)"}),(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"k8od7T"})})]})})]})]}),(0,n.jsx)(en.S,{in:!!eP&&!!eL.cropped&&eP!==w.profileImageUrl&&"idle"===eV,animateOpacity:!0,children:(0,n.jsx)(H.S,{size:"sm",fontSize:"12px",color:"gray.500",isChecked:"cropped"===e$,onChange:e=>{eH(e.target.checked?"cropped":"original"),eF(e.target.checked?eL.cropped:eL.original)},mb:3,children:(0,n.jsx)(C.x6,{id:"+J8/VC"})})}),(0,n.jsx)(el.Wt,{children:"error"===eV&&(0,n.jsx)(C.x6,{id:"CCcfKO"})}),(0,n.jsxs)(N.B,{spacing:0,alignItems:"center",children:[(0,n.jsx)(_.E,{fontSize:"lg",fontWeight:"bold",children:w.displayName}),(0,n.jsx)(_.E,{color:"gray.500",fontSize:"sm",wordBreak:"break-word",children:w.email})]})]}),(0,n.jsxs)(N.B,{direction:"column",width:{md:"50%"},maxWidth:{md:"50%"},spacing:4,children:[(0,n.jsxs)(er.MJ,{isInvalid:e4,children:[(0,n.jsx)(ea.l,{children:(0,n.jsx)(C.x6,{id:"V1EGGU"})}),(0,n.jsx)(eo.p,{w:"100%",value:eI,onChange:e=>eD(e.target.value.slice(0,60))})]}),(0,n.jsxs)(er.MJ,{isInvalid:e4,children:[(0,n.jsx)(ea.l,{children:(0,n.jsx)(C.x6,{id:"1ZaQUH"})}),(0,n.jsx)(eo.p,{w:"100%",value:eR,onChange:e=>e_(e.target.value.slice(0,60))}),(0,n.jsx)(el.Wt,{children:(null==X?void 0:X.message)?null==X?void 0:X.message:(0,n.jsx)(C.x6,{id:"yQeiGC"})})]}),k&&"PASSWORD"===w.authProvider&&(0,n.jsxs)(er.MJ,{isInvalid:e4,children:[(0,n.jsx)(ea.l,{children:(0,n.jsxs)(R.z,{children:[(0,n.jsx)(C.x6,{id:"8ZsakT"}),(0,n.jsx)(et.h,{}),(0,n.jsx)(K.$,{variant:"link",size:"sm",onClick:eY,children:(0,n.jsx)(C.x6,{id:"RfwZxd"})})]})}),(0,n.jsx)(eo.p,{w:"100%",value:"Password",isDisabled:!0,type:"password"})]}),(0,n.jsxs)(er.MJ,{children:[(0,n.jsx)(ea.l,{children:(0,n.jsxs)(N.B,{direction:"row",alignItems:"center",gap:2,children:[(0,n.jsx)(f.g,{icon:m.Bwz}),(0,n.jsx)(C.x6,{id:"vXIe7J"})]})}),(0,n.jsx)(ej.m,{selectedLocale:O.zd[eO],onLocaleSelect:eA})]})]})]}),(0,n.jsxs)(N.B,{spacing:4,children:[(0,n.jsxs)(N.B,{children:[(0,n.jsx)(ed.D,{as:"h2",size:"md",children:(0,n.jsx)(C.x6,{id:"ZbXNIW"})}),(0,n.jsx)(_.E,{size:"sm",color:"gray.500",children:(0,n.jsx)(C.x6,{id:"2ZAirE"})})]}),(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"iJoBlx"})}),(0,n.jsxs)(er.MJ,{as:l.s,gap:2,alignItems:"center",children:[(0,n.jsx)(ec.d,{size:"md",isChecked:eT,onChange:e=>eB(!e.target.checked)}),(0,n.jsx)(ea.l,{m:0,cursor:"pointer",children:(0,n.jsx)(C.x6,{id:"gukxZ5"})})]}),(0,n.jsxs)(er.MJ,{as:l.s,gap:2,alignItems:"center",children:[(0,n.jsx)(ec.d,{size:"md",isChecked:eW,onChange:e=>eN(!e.target.checked)}),(0,n.jsx)(ea.l,{m:0,cursor:"pointer",children:(0,n.jsx)(C.x6,{id:"8Q6T6o"})})]})]})]})}),(0,n.jsx)(J.j,{children:(0,n.jsxs)(l.s,{justifyContent:"space-between",flex:1,alignItems:"flex-end",p:2,children:[(0,n.jsx)(l.s,{children:(0,n.jsx)(K.$,{variant:"hazardous",onClick:eX,children:(0,n.jsx)(C.x6,{id:"ktknoE"})})}),(0,n.jsxs)(l.s,{flexWrap:"wrap",justifyContent:"flex-end",gap:2,children:[e3&&(0,n.jsx)(K.$,{variant:"ghost",colorScheme:"gray",onClick:e0,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),(0,n.jsx)(K.$,{variant:"solid",onClick:e8,isDisabled:e4||"uploading"===eV,isLoading:q||Y,children:e3?(0,n.jsx)(C.x6,{id:"y3aU20"}):(0,n.jsx)(C.x6,{id:"DPfwMq"})})]})]})})]}),(0,n.jsx)(ef,{isOpen:eC,onClose:ey,onConfirm:e8,onDiscard:()=>{ey(),h()},originalLocaleConfirmStrings:eO!==ek?ez:null})]})};var ey=i(16936),ew=i(83817),eE=i.n(ew),eS=i(31615);let ek={route:"sign-in",profileImageUrl:"",firstName:"",lastName:"",authentication:{provider:"PASSWORD",email:""},emails:{onboardingEmails:!0,announcementEmails:!0},localeKey:void 0};var eO=i(24302),eA=i(7761),ez=i(17789);let eI={cropped:"",original:""},eD=e=>{let{orgId:s,firstName:i,lastName:l,profileImageUrl:a,setStore:o}=e,[x,h]=(0,b.useState)(a);(0,b.useEffect)(()=>{h(a)},[a]);let[y,w]=(0,b.useState)(eI),[E,S]=(0,b.useState)("original"),[k,O]=(0,b.useState)("idle"),A=y.cropped&&"cropped"===E?y.cropped:y.original&&"original"===E?y.original:x||"",z=(0,b.useMemo)(()=>eh.Fk.createUppyInstance(s,{onUploadStart:e=>{w(eI),O("uploading"),S("original"),(0,eg.aI)(e.file.type||"")||(h(e.tempUrl),o(s=>({...s,profileImageUrl:e.tempUrl})))},onOriginalFileUpload:e=>{h(e.src),o(s=>({...s,profileImageUrl:e.src})),w(s=>({...s,original:e.src}))},onUploadComplete:e=>{let s=e.src;h(e=>e||s),o(e=>({...e,profileImageUrl:s})),w(()=>({original:e.src,cropped:e.croppedFace||""})),O("idle"),z.cancelAll()},onUploadFailed:()=>{O("error"),z.cancelAll()}},"profile"),[s,o]),{onClick:I,inputElement:D}=(0,ep.W)({uppy:z}),U=(0,b.useCallback)(()=>{h(null),w(eI),o(e=>({...e,profileImageUrl:null}))},[o]),M=(0,b.useCallback)(e=>{let s=e.target.checked;S(s?"cropped":"original");let i=s?y.cropped:y.original;h(i),o(e=>({...e,profileImageUrl:i}))},[y.cropped,y.original,o]);return(0,n.jsxs)(N.B,{spacing:3,alignItems:"center",children:[D,(0,n.jsxs)($.a,{w:0,h:0,children:[(0,n.jsx)(es._,{src:y.original}),(0,n.jsx)(es._,{src:y.cropped})]}),(0,n.jsx)($.a,{position:"relative",children:(0,n.jsxs)(t.W,{placement:"bottom-start",offset:[100,0],children:[(0,n.jsx)(v.Tz,{label:(0,n.jsx)(C.x6,{id:"etzA4s"}),openDelay:750,placement:"top",children:(0,n.jsx)(d.I,{position:"relative",disabled:"uploading"===k,userSelect:"none",cursor:"pointer",role:"group",_hover:{opacity:.9},children:(0,n.jsxs)(c.e,{src:A||"",name:"".concat(i," ").concat(l),size:{base:"xl",md:"2xl"},_groupHover:{shadow:"lg"},ignoreFallback:!0,children:["uploading"===k&&(0,n.jsx)(ei.j,{position:"absolute",size:"full",justifyContent:"center",alignItems:"center",bg:"gray.300",opacity:.5,children:(0,n.jsx)(r.y,{size:"xl",thickness:"2px"})}),(0,n.jsx)(ei.j,{position:"absolute",bottom:0,right:0,borderRadius:"full",color:"gray.800",textAlign:"center",bg:"gray.200",size:9,_groupHover:{shadow:"lg",transform:"scale(1.02)"},children:(0,n.jsx)(f.g,{icon:x?m.rwq:m.MT7,width:16,height:16,size:"xs"})})]})})}),(0,n.jsxs)(j.c,{fontSize:"sm",children:[(0,n.jsx)(u.D,{onClick:()=>{"uploading"!==k&&I()},children:(0,n.jsxs)(R.z,{children:[(0,n.jsx)(f.g,{icon:g.MNJ}),(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"wPTug2"})})]})}),x&&(0,n.jsx)(p.N,{}),x&&(0,n.jsx)(u.D,{onClick:U,children:(0,n.jsxs)(R.z,{color:"var(--chakra-colors-red-500)",children:[(0,n.jsx)(f.g,{icon:m.sjs,color:"var(--chakra-colors-red-500)"}),(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"k8od7T"})})]})})]})]})}),(0,n.jsx)(en.S,{in:!!x&&!!y.cropped&&x!==a&&"idle"===k,animateOpacity:!0,children:(0,n.jsx)(H.S,{size:"sm",fontSize:"12px",color:"gray.500",isChecked:"cropped"===E,onChange:M,mb:3,children:(0,n.jsx)(C.x6,{id:"+J8/VC"})})}),(0,n.jsx)(el.Wt,{children:"error"===k&&(0,n.jsx)(C.x6,{id:"CCcfKO"})})]})},eR=e=>{let{isOpen:s,onClose:i,onConfirm:l}=e;return(0,n.jsxs)(T.aF,{isOpen:s,onClose:i,isCentered:!0,children:[(0,n.jsx)(W.m,{}),(0,n.jsxs)(P.$,{children:[(0,n.jsx)(F.r,{children:(0,n.jsx)(C.x6,{id:"1FFoxQ"})}),(0,n.jsx)(L.s,{}),(0,n.jsx)(G.c,{children:(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"RLdvpT",values:{GAMMA_PROPER_NOUN:q.On},components:{0:(0,n.jsx)("strong",{})}})})}),(0,n.jsxs)(J.j,{children:[(0,n.jsx)(K.$,{variant:"plain",me:3,onClick:i,children:(0,n.jsx)(C.x6,{id:"1cHrEd"})}),(0,n.jsx)(K.$,{variant:"hazardous",onClick:l,children:(0,n.jsx)(C.x6,{id:"M5446u"})})]})]})]})},e_=e=>{let{orgId:s,store:i,setStore:r,onClose:a,tabIndex:o,setTabIndex:t,setRoute:d,onAccountDeleteModalOpen:c,isDirty:x,onResetStore:j,isSaving:u,hasSentAddPasswordEmail:h}=e,p=(0,b.useMemo)(()=>i.firstName.trim().length<1&&i.lastName.trim().length<1,[null==i?void 0:i.firstName,null==i?void 0:i.lastName]),g=(0,b.useMemo)(()=>[{key:"basic-info",label:(0,n.jsx)(C.x6,{id:"o+K7xz"}),icon:m.X46,content:(0,n.jsx)(eU,{orgId:s,store:i,setStore:r,hasErrorWithNames:p})},{key:"email-notifications",label:(0,n.jsx)(C.x6,{id:"aW3TOw"}),description:(0,n.jsx)(C.x6,{id:"2ZAirE"}),icon:m.y_8,content:(0,n.jsx)(eM,{store:i,setStore:r})},{key:"sign-in-security",label:(0,n.jsx)(C.x6,{id:"T0jvBg"}),icon:m.DW4,content:(0,n.jsx)(eN,{store:i,setRoute:d,onAccountDeleteModalOpen:c,hasSentAddPasswordEmail:h})}],[s,i,r,p,d,c,h]),v=(0,b.useMemo)(()=>g.map(e=>({key:e.key,label:e.label,icon:(0,n.jsx)(f.g,{icon:e.icon,fixedWidth:!0})})),[g]),y=(0,b.useMemo)(()=>{let e=g[o];return{key:e.key,label:e.label,icon:(0,n.jsx)(f.g,{icon:e.icon,fixedWidth:!0})}},[o,g]),w=(0,b.useCallback)(e=>{t(g.findIndex(s=>s.key===e.key))},[t,g]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.c,{p:"6",children:(0,n.jsxs)(N.B,{spacing:"6",children:[(0,n.jsx)(eA.x,{options:v,selectedOption:y,setSelectedOption:w,dropdownButtonLeftIcon:y.icon,dropdownMenuTitle:Q.Ru._({id:"T3FM0r"}),size:"md"}),(0,n.jsxs)(N.B,{spacing:"4",children:[g[o].description&&(0,n.jsx)(_.E,{children:g[o].description}),g[o].content]})]})}),(0,n.jsx)(M.c,{}),(0,n.jsx)(J.j,{children:(0,n.jsxs)(l.s,{flexWrap:"wrap",justifyContent:"flex-end",gap:2,children:[x&&(0,n.jsx)(K.$,{variant:"ghost",colorScheme:"gray",onClick:j,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),(0,n.jsx)(K.$,{variant:"solid",isDisabled:p,onClick:a,isLoading:u,children:x?(0,n.jsx)(C.x6,{id:"y3aU20"}):(0,n.jsx)(C.x6,{id:"DPfwMq"})})]})})]})},eU=e=>{let{orgId:s,store:i,setStore:l,hasErrorWithNames:r}=e,a=i.authentication.email,o=i.profileImageUrl,t=(0,A.O)();return(0,eu.O)(i.localeKey||t),(0,n.jsxs)(N.B,{spacing:4,direction:{base:"column",md:"row"},children:[(0,n.jsxs)(N.B,{flex:"1.5",alignItems:"center",spacing:"3",children:[(0,n.jsx)(eD,{orgId:s,firstName:i.firstName,lastName:i.lastName,profileImageUrl:o,setStore:l}),(0,n.jsxs)(N.B,{w:"100%",alignItems:"center",spacing:"1",children:[(0,n.jsxs)(_.E,{fontWeight:"bold",textAlign:"center",fontSize:"xl",wordBreak:"break-word",maxW:"100%",children:[i.firstName," ",i.lastName]}),(0,n.jsx)(_.E,{color:"gray.500",wordBreak:"break-word",maxW:"100%",children:a})]})]}),(0,n.jsxs)(N.B,{flex:"2",spacing:"4",minW:"0",children:[(0,n.jsxs)(er.MJ,{isInvalid:r,children:[(0,n.jsx)(ea.l,{children:(0,n.jsx)(C.x6,{id:"V1EGGU"})}),(0,n.jsx)(eo.p,{w:"100%",value:i.firstName,onChange:e=>l(s=>({...s,firstName:e.target.value.slice(0,60)}))})]}),(0,n.jsxs)(er.MJ,{isInvalid:r,children:[(0,n.jsx)(ea.l,{children:(0,n.jsx)(C.x6,{id:"1ZaQUH"})}),(0,n.jsx)(eo.p,{w:"100%",value:i.lastName,onChange:e=>l(s=>({...s,lastName:e.target.value.slice(0,60)}))}),(0,n.jsx)(el.Wt,{children:(0,n.jsx)(C.x6,{id:"yQeiGC"})})]}),(0,n.jsxs)(er.MJ,{children:[(0,n.jsx)(ea.l,{children:(0,n.jsxs)(N.B,{direction:"row",alignItems:"center",gap:2,children:[(0,n.jsx)(f.g,{icon:m.Bwz}),(0,n.jsx)(C.x6,{id:"vXIe7J"})]})}),(0,n.jsx)(ej.m,{selectedLocale:O.zd[t],onLocaleSelect:e=>{l(s=>({...s,localeKey:e}))}})]})]})]})},eN=e=>{let{store:s,setRoute:i,onAccountDeleteModalOpen:l,hasSentAddPasswordEmail:r}=e,[a,o]=(0,b.useState)(!1),[t]=(0,ez.hli)(),d=(0,B.d)(),c=(0,z.st)(),x=(0,b.useCallback)(()=>{o(!1)},[]),j=(0,b.useCallback)(async()=>{try{var e,s;(null==(s=(await t()).data)||null==(e=s.signOutOfAllDevices)?void 0:e.success)&&(null==c||c.track(z.VV.USER_SIGNOUT_ALL_DEVICES,{success:!0}),window.location.href="".concat(y.$.API_HOST,"/logout"))}catch(e){null==c||c.track(z.VV.USER_SIGNOUT_ALL_DEVICES,{success:!1}),d({title:(0,n.jsx)(C.x6,{id:"SlfejT"}),description:(0,n.jsx)(C.x6,{id:"GZmirP"}),status:"error",duration:5e3,isClosable:!0})}finally{o(!1)}},[t,d,c]),u="PASSWORD"===s.authentication.provider,h="GOOGLE"===s.authentication.provider,p=s.authentication.email,g=(0,b.useCallback)(e=>{i(e)},[i]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(N.B,{spacing:"6",divider:(0,n.jsx)(M.c,{}),children:[(0,n.jsxs)(N.B,{spacing:"4",children:[(0,n.jsxs)(ed.D,{as:"h4",size:"sm",children:[(0,n.jsx)(f.g,{icon:m.OKD})," ",(0,n.jsx)(C.x6,{id:"P8fBlG"})]}),h&&(0,n.jsxs)($.a,{children:[(0,n.jsxs)(R.z,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(C.x6,{id:"sdDSDG"}),!u&&(0,n.jsx)(v.Tz,{placement:"top",label:Q.Ru._({id:"dqLfRI",values:{displayEmail:p}}),children:(0,n.jsx)(K.$,{variant:"link",onClick:()=>g("add-password"),isDisabled:r,children:(0,n.jsx)(C.x6,{id:"5/Zg7X"})})})]}),(0,n.jsxs)(R.z,{p:"5",border:"2px solid",borderColor:"gray.100",borderRadius:"md",spacing:"3",boxShadow:"sm",w:"100%",children:[(0,n.jsx)(es._,{src:"https://static.gamma.app/icons/v0/google_logo-ed9087d7.svg"}),(0,n.jsx)(_.E,{children:p}),(0,n.jsx)(et.h,{})]})]}),u&&(0,n.jsxs)(N.B,{spacing:"4",children:[(0,n.jsxs)(er.MJ,{children:[(0,n.jsxs)(R.z,{justifyContent:"space-between",children:[(0,n.jsx)(ea.l,{children:(0,n.jsx)(C.x6,{id:"O3oNi5"})}),!1]}),(0,n.jsx)(eo.p,{value:s.authentication.email,pointerEvents:"none",readOnly:!0})]}),(0,n.jsxs)(er.MJ,{children:[(0,n.jsxs)(R.z,{justifyContent:"space-between",mb:2,children:[(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"8ZsakT"})}),(0,n.jsx)(K.$,{variant:"link",onClick:()=>g("update-password"),children:(0,n.jsx)(C.x6,{id:"Q3MPWA"})})]}),(0,n.jsx)(eo.p,{value:"password",type:"password",pointerEvents:"none",readOnly:!0})]})]})]}),(0,n.jsxs)(N.B,{spacing:"4",children:[(0,n.jsxs)(ed.D,{as:"h4",size:"sm",children:[(0,n.jsx)(f.g,{icon:m.YBv})," ",(0,n.jsx)(C.x6,{id:"qwhpzz"})]}),(0,n.jsx)(K.$,{variant:"plain",width:"fit-content",size:"md",leftIcon:(0,n.jsx)(f.g,{icon:m.yBu,fixedWidth:!0}),onClick:()=>o(!0),children:(0,n.jsx)(C.x6,{id:"eFB9sk"})})]}),(0,n.jsxs)(N.B,{spacing:"4",children:[(0,n.jsxs)(ed.D,{as:"h4",size:"sm",children:[(0,n.jsx)(f.g,{icon:m.QJT,fixedWidth:!0})," ",(0,n.jsx)(C.x6,{id:"Zz6Cxn"})]}),(0,n.jsx)(K.$,{variant:"hazardous",width:"fit-content",leftIcon:(0,n.jsx)(f.g,{icon:m.sjs,fixedWidth:!0}),onClick:l,children:(0,n.jsx)(C.x6,{id:"ktknoE"})})]})]}),(0,n.jsx)(eR,{isOpen:a,onClose:x,onConfirm:j})]})},eM=e=>{let{store:s,setStore:i}=e,l=(0,eO.dU)("gray.100","elevation.3");return(0,n.jsxs)(N.B,{p:"4",bg:l,borderRadius:"md",children:[(0,n.jsxs)(R.z,{w:"100%",justifyContent:"space-between",children:[(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"aQpE/g"})}),(0,n.jsx)(ec.d,{size:"md",isChecked:s.emails.onboardingEmails,onChange:e=>i(s=>({...s,emails:{...s.emails,onboardingEmails:e.target.checked}}))})]}),(0,n.jsxs)(R.z,{w:"100%",justifyContent:"space-between",children:[(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"ThnnAz"})}),(0,n.jsx)(ec.d,{size:"md",isChecked:s.emails.announcementEmails,onChange:e=>i(s=>({...s,emails:{...s.emails,announcementEmails:e.target.checked}}))})]})]})},eB=e=>{let{icon:s=m.SGM,iconColor:i="green.500",iconProps:l,title:r,description:a,children:o}=e,t=(0,eO.dU)(i,i);return(0,n.jsxs)(N.B,{alignItems:"center",p:"6",bg:"gray.100",spacing:"4",minH:"180px",justifyContent:"center",children:[(0,n.jsxs)(N.B,{alignItems:"center",textAlign:"center",spacing:"2",children:[(0,n.jsx)($.a,{p:2,children:(0,n.jsx)(f.g,{icon:s,...l,size:"2x",style:{color:t}})}),(0,n.jsx)(ed.D,{as:"h3",size:"md",fontWeight:"700",fontFamily:"body",children:r}),a&&(0,n.jsx)(_.E,{children:a})]}),o]})},eT=e=>{var s;let{store:i,setRoute:l,onEmailSent:r}=e,[a,o]=(0,b.useState)(!1),[t,d]=(0,b.useState)(!1),c=(0,A.O)(),[x]=(0,Z.y2x)(),j=(0,z.st)(),u=null==i||null==(s=i.authentication)?void 0:s.email,h=()=>{l(null)},p=async()=>{d(!0);let e=!1;try{var s;let i=await (0,eS.hw)(ez.ySq.AddPassword),{emailSent:n}=(null==(s=(await x({variables:{input:{email:u,token:i,scenario:ez.acy.AddPassword,settings:{locale:c}}}})).data)?void 0:s.sendCode)||{};if(!n)throw Error("Failed to send email");o(!0),null==r||r(),e=!0}catch(e){}finally{d(!1);let s=!!u&&u.toLowerCase().includes("@gmail.com");null==j||j.track(z.VV.USER_PASSWORD_ADD,{success:e,isGmail:s})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.c,{p:"6",children:(0,n.jsxs)(N.B,{spacing:"6",minH:"300px",children:[!a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"UvBNsM",values:{email:u},components:{0:(0,n.jsx)("strong",{})}})}),(0,n.jsx)(K.$,{w:"100%",leftIcon:(0,n.jsx)(f.g,{icon:m.y_8,fixedWidth:!0}),onClick:p,isLoading:t,isDisabled:a,children:(0,n.jsx)(C.x6,{id:"wlmEWp"})})]}),a&&(0,n.jsx)(eB,{icon:m.iW_,iconColor:"#3182CE",title:(0,n.jsx)(C.x6,{id:"CSCmIt"}),description:(0,n.jsx)(C.x6,{id:"Qon8E4",values:{email:u},components:{0:(0,n.jsx)("strong",{})}})})]})}),(0,n.jsxs)(J.j,{children:[!a&&(0,n.jsx)(K.$,{variant:"plain",onClick:h,isDisabled:t,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),a&&(0,n.jsx)(K.$,{variant:"solid",onClick:h,children:(0,n.jsx)(C.x6,{id:"DPfwMq"})})]})]})};var eW=i(68871),eP=i(51988);let eF=e=>{let{setRoute:s}=e,i=(0,B.d)(),[l,r]=(0,b.useState)(""),[a,o]=(0,b.useState)(""),[t,d]=(0,b.useState)(""),[c,x]=(0,b.useState)(!1),[j,u]=(0,b.useState)(!1),[h,p]=(0,b.useState)(!1),m=(0,z.st)(),[g]=(0,ez.SVg)(),f=!a||!t||!l||c||h,v=async()=>{var e,s,r,o;x(!0);let t=!1;try{let o=await g({variables:{input:{currentPassword:l,newPassword:a}}});if(null==(e=o.errors)?void 0:e.length){let e=o.errors[0].message||(0,n.jsx)(C.x6,{id:"XLO6fp"});i({title:(0,n.jsx)(C.x6,{id:"WOLn0C"}),description:e,status:"error",position:"top",isClosable:!0});return}if(!(null==(r=o.data)||null==(s=r.changePassword)?void 0:s.success))return void i({title:(0,n.jsx)(C.x6,{id:"WOLn0C"}),description:(0,n.jsx)(C.x6,{id:"2TG1lq"}),status:"error",position:"top",isClosable:!0});u(!0),i({title:(0,n.jsx)(C.x6,{id:"DA2pbs"}),status:"success",position:"top"}),t=!0}catch(l){let e=null==(o=l.graphQLErrors)?void 0:o[0],s=(null==e?void 0:e.message)||l.message||(0,n.jsx)(C.x6,{id:"XLO6fp"});i({title:(0,n.jsx)(C.x6,{id:"WOLn0C"}),description:s,status:"error",position:"top",isClosable:!0})}finally{x(!1),null==m||m.track(z.VV.USER_PASSWORD_UPDATE,{success:t})}},y=()=>{s(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.c,{p:"6",children:(0,n.jsxs)(N.B,{spacing:"4",children:[!j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.E,{children:(0,n.jsx)(C.x6,{id:"NSicHD"})}),(0,n.jsx)(eW.s,{label:(0,n.jsx)(C.x6,{id:"Pn2B7/"}),placeholder:Q.Ru._({id:"fR9laE"}),onChange:e=>r(e.target.value),showHelp:!1}),(0,n.jsx)(eP.J,{password:a,setPassword:o,retypedPassword:t,setRetypedPassword:d,onValidationChange:p})]}),j&&(0,n.jsx)(eB,{title:(0,n.jsx)(C.x6,{id:"fSy6T1"}),description:(0,n.jsx)(C.x6,{id:"rzqEOW"})})]})}),(0,n.jsxs)(J.j,{children:[!j&&(0,n.jsxs)(V.e,{children:[(0,n.jsx)(K.$,{variant:"plain",onClick:y,isDisabled:c,children:(0,n.jsx)(C.x6,{id:"dEgA5A"})}),(0,n.jsx)(K.$,{variant:"solid",onClick:v,isDisabled:f,isLoading:c,children:(0,n.jsx)(C.x6,{id:"Q3MPWA"})})]}),j&&(0,n.jsx)(K.$,{variant:"solid",onClick:y,children:(0,n.jsx)(C.x6,{id:"DPfwMq"})})]})]})},eL={"update-password":(0,n.jsx)(C.x6,{id:"vEdQb2"}),"add-password":(0,n.jsx)(C.x6,{id:"f/dPsx"}),"change-email":(0,n.jsx)(C.x6,{id:"Xl7vxL"})};async function eG(e,s,i,n,l,r){if(!i.current||!l||!r)return!1;let a=s.firstName!==i.current.firstName||s.lastName!==i.current.lastName||s.profileImageUrl!==i.current.profileImageUrl||s.authentication.email!==i.current.authentication.email||s.authentication.provider!==i.current.authentication.provider,o=s.emails.onboardingEmails!==i.current.emails.onboardingEmails||s.emails.announcementEmails!==i.current.emails.announcementEmails||s.localeKey!==i.current.localeKey;try{a&&await n({variables:{input:{id:e,firstName:s.firstName,lastName:s.lastName,profileImageUrl:s.profileImageUrl||""}}}),o&&await l({set:{locale:s.localeKey,unsubscribeAnnouncementEmails:!s.emails.announcementEmails,unsubscribeOnboardingEmails:!s.emails.onboardingEmails}}),o||await r()}catch(e){return!1}return!0}let e$=e=>{let{orgId:s,user:i,isOpen:l,onClose:r,onAccountDeleteModalOpen:a}=e,[o]=(0,Z.H7G)(),[t,d]=(0,b.useState)(!1),{refetch:c,setSettings:x}=(0,I.ur)(),[j,u]=(0,b.useState)(0),[h,p]=(0,b.useState)(null),g=(0,A.O)(),v=(0,b.useMemo)(()=>g,[]),[y,w]=(0,b.useState)(v),[E,S]=(0,b.useState)(!1),k=(0,B.d)(),O=(0,b.useRef)(null),[z,D]=(0,b.useState)(ek);(0,b.useEffect)(()=>{if(l){var e,s;let n={route:"sign-in",profileImageUrl:i.profileImageUrl||"",firstName:i.firstName,lastName:i.lastName,authentication:{provider:i.authProvider,email:i.email},emails:{onboardingEmails:!(null==(e=i.settings)?void 0:e.unsubscribeOnboardingEmails),announcementEmails:!(null==(s=i.settings)?void 0:s.unsubscribeAnnouncementEmails)},localeKey:y};O.current=structuredClone(n),D(n),d(!1)}},[l,i,y]);let[R,_]=(0,b.useState)(!1);(0,b.useEffect)(()=>{_(!eE()(O.current,z))},[z]);let{isOpen:U,onOpen:N,onClose:G}=(0,em.E)({id:"account-settings-unsaved-changes"}),$=async()=>{if(!R)return void r();N()},H=async()=>{if(!R)return void r();S(!0);let e=await eG(i.id,z,O,o,x,c);S(!1),r(),e?k({title:(0,n.jsx)(C.x6,{id:"wAvGr+"}),position:"top",status:"success",isClosable:!0,duration:3e3}):k({title:(0,n.jsx)(C.x6,{id:"ttXyaw"}),position:"top",status:"error",isClosable:!0,duration:3e3})},[J]=(0,b.useState)({title:Q.Ru._({id:"sCTlv5"}),body:Q.Ru._({id:"EVJO23"}),primaryCTA:Q.Ru._({id:"y3aU20"}),secondaryCTA:Q.Ru._({id:"3EbjfR"})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eS.vj,{}),(0,n.jsxs)(T.aF,{trapFocus:!1,isOpen:!0,size:"2xl",onClose:$,children:[(0,n.jsx)(W.m,{}),(0,n.jsxs)(P.$,{children:[(0,n.jsxs)(F.r,{children:[null!==h&&(0,n.jsx)(ey.K,{"aria-label":"Back",size:"sm",variant:"ghost",icon:(0,n.jsx)(f.g,{icon:m.Wzs}),onClick:()=>{p(null)},me:2}),h&&eL[h]||(0,n.jsx)(C.x6,{id:"T3FM0r"})]}),(0,n.jsx)(M.c,{}),(0,n.jsx)(L.s,{}),null===h&&(0,n.jsx)(e_,{orgId:s,store:z,setStore:D,onClose:H,tabIndex:j,setTabIndex:u,setRoute:p,onAccountDeleteModalOpen:()=>{a(),r()},isDirty:R,onResetStore:()=>{O.current&&D(structuredClone(O.current))},isSaving:E,hasSentAddPasswordEmail:t}),"add-password"===h&&(0,n.jsx)(eT,{store:z,setRoute:p,onEmailSent:()=>d(!0)}),"update-password"===h&&(0,n.jsx)(eF,{setRoute:p})]})]}),(0,n.jsx)(ef,{isOpen:U,onClose:G,onConfirm:H,onDiscard:()=>{G(),r()},originalLocaleConfirmStrings:y!==v?J:null})]})};var eH=i(45143);let eJ={maxWidth:"sm",whiteSpace:"break-spaces"},eV=(0,b.memo)(e=>{var s;let{showRing:i,showCreditsBadge:l=!0}=e,{isInOfflineMode:r}=(0,w.u)(),{user:a,anonymousUser:b,isUserLoading:D,color:R,currentWorkspace:_}=(0,I.ur)(),{isOpen:U,onOpen:N,onClose:M}=(0,o.j)({id:"locale-modal-profile-menu"}),B=(0,A.O)(),T=(0,eH.h5)(["xs","sm"]),W={...b,organizations:[]},{displayName:P,profileImageUrl:F}=a||W,{isConnected:L}=(0,w.u)(),{isOpen:G,onOpen:$,onClose:H}=(0,o.j)({id:"user-settings-modal"}),{isOpen:J,onOpen:V,onClose:K}=(0,o.j)({id:"account-delete-modal"}),Q=(0,S.u)("newAccountSettingsUI");return(0,n.jsxs)(t.W,{children:[(0,n.jsx)(v.Tz,{label:L?a?(0,n.jsx)(C.x6,{id:"hBHHtH"}):P:(0,n.jsx)(C.x6,{id:"ysdDIA"}),children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.I,{tabIndex:0,_focus:{shadow:"outline"},as:c.e,bg:R.value,color:R.isDark?"white":"black",border:i?"solid 2px ".concat(R.value):"solid 2px var(--chakra-colors-gray-50)",shadow:i?"base":void 0,outline:"none",name:D?void 0:P,src:F,size:T,alignItems:"center",className:"profile-menu-avatar",flexDirection:"column",cursor:"pointer",transition:"box-shadow 150ms ease-out",_hover:{shadow:"0 0 0 3px #CBD5E0"},onDragStart:e=>e.preventDefault(),sx:{span:{display:"none"}}})})}),(0,n.jsx)(x.Z,{children:(0,n.jsx)(j.c,{zIndex:"popover",children:a?(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsx)(h.r,{title:a.email||P,sx:eJ,children:(0,n.jsx)(E.f,{modalId:"ai-credits-modal-profile-menu",segmentEvent:z.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_PROFILE_MENU})}),(0,n.jsxs)(h.r,{...l?{}:{title:a.email||P},sx:eJ,children:[(0,n.jsx)(p.N,{}),(0,n.jsx)(u.D,{icon:(0,n.jsx)(f.g,{icon:g.BH7,fixedWidth:!0}),onClick:$,isDisabled:r,children:(0,n.jsx)(C.x6,{id:"LpPf/O"})}),(0,n.jsx)(u.D,{icon:(0,n.jsx)(f.g,{fixedWidth:!0,icon:m.Bwz}),onClick:N,children:(null==(s=O.zd[B])?void 0:s.displayName)||"Unknown"}),(0,n.jsx)(u.D,{color:"red.500",icon:(0,n.jsx)(f.g,{icon:m.GxD,fixedWidth:!0}),onClick:()=>{window.location.href="".concat(y.$.API_HOST,"/logout")},isDisabled:r,children:(0,n.jsx)(C.x6,{id:"fcWrnU"})})]})]}):(0,n.jsx)(u.D,{icon:(0,n.jsx)(f.g,{icon:m.rhE,fixedWidth:!0}),onClick:()=>{window.location.href="/signin"},isDisabled:r,children:(0,n.jsx)(C.x6,{id:"n1ekoW"})})})}),Q&&G&&a&&(0,n.jsx)(e$,{orgId:(null==_?void 0:_.id)||"",user:a,isOpen:G,onClose:H,onAccountDeleteModalOpen:V}),!Q&&G&&a&&(0,n.jsx)(eb,{orgId:(null==_?void 0:_.id)||"",user:a,isOpen:G,onClose:H,onAccountDeleteModalOpen:V}),J&&a&&(0,n.jsx)(ee,{user:a,isOpen:J,onClose:K}),U&&(0,n.jsx)(k.l,{onClose:M})]})});eV.displayName="ProfileMenu"}}]);
//# sourceMappingURL=6441-0e3e307d98db73a2.js.map