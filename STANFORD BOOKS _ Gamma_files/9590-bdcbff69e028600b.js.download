"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9590],{5747:(e,t,a)=>{a.d(t,{D:()=>D});var n=a(6029),r=a(12326),i=a(26385),s=a(23293),o=a(29810),l=a(40452),d=a(49611),c=a(77364),u=a(26420),m=a(61204),h=a(16936),p=a(17496),x=a(40162),g=a(4192),v=a(38036),f=a(99492),b=a(48621),j=a(47412),w=a(19564),k=a(77650),y=a(55729),C=a(75178),I=a(68301),S=a(5061),E=a(95563),A=a(20751),_=a(22249),R=a(15342),T=a(92699),V=a(7554),L=a(82927),G=a(11403);let M={dark:{label:(0,n.jsx)(w.x6,{id:"+b0Wxk"})},light:{label:(0,n.jsx)(w.x6,{id:"kAFlqg"})},professional:{label:(0,n.jsx)(w.x6,{id:"wk3x7P"})},colorful:{label:(0,n.jsx)(w.x6,{id:"iqiUCj"})}},D=(0,y.memo)(e=>{let{title:t,description:a,closePanel:D,stackProps:z,currentTheme:P,showCreateButtons:O=!0,usePanelHeading:N=!1}=e,U=(0,S.fW)(),W=(0,R.jL)(),B=(0,R.GV)(V.yD),F=(0,R.GV)(V.r8),q=(0,y.useRef)(null),{currentWorkspace:H}=(0,L.ur)(),[K,$]=(0,y.useState)(""),X=(0,R.GV)(V.cE),Z=(0,R.GV)((0,_.lp)("right")),J=(0,A.S)(Z),Q=(0,y.useCallback)(()=>{W((0,V.U7)({activeView:"search"})),setTimeout(()=>{var e;null==(e=q.current)||e.focus()},200)},[W]),Y=(0,y.useCallback)(e=>{W((0,V.Ri)({searchQuery:e}))},[W]),ee=(0,G.lW)(Y,500),et=(0,y.useCallback)(e=>{$(e),ee(e)},[ee]),ea=(0,y.useCallback)(e=>{let t=[...F];F.includes(e)?t=t.filter(t=>t!==e):t.push(e),W((0,V.d2)({filterKeywords:t}))},[F,W]);(0,G.Vg)(()=>{"search"!==B&&(P&&P.workspaceId===(null==H?void 0:H.id)?W((0,V.U7)({activeView:"custom"})):W((0,V.U7)({activeView:"standard"})))},[W,P,B,H],[P]);let en=(0,y.useCallback)(()=>{(0,T._E)()},[]);(0,y.useEffect)(()=>()=>{W((0,V.mL)())},[W]);let er=(0,I.u)("themeImportAi"),ei={base:"column",sm:"column",md:"row",lg:"row"};return(0,n.jsxs)(i.B,{spacing:4,...z,children:[(0,n.jsxs)(i.B,{spacing:4,children:[(0,n.jsxs)(i.B,{spacing:4,children:[(0,n.jsxs)(i.B,{direction:J?ei[J]:ei.sm,width:"100%",paddingInlineEnd:D?8:void 0,children:[N?(0,n.jsx)(E.N,{children:t}):(0,n.jsx)(s.D,{size:"md",children:t}),(0,n.jsx)(o.h,{}),(0,n.jsxs)(l.s,{gap:2,children:[H&&O&&(0,n.jsx)(j.Tz,{label:(0,n.jsx)(w.x6,{id:"LPcaN9"}),placement:"top",children:(0,n.jsx)(d.$,{size:"sm",variant:"plain",shadow:"none",leftIcon:(0,n.jsx)(b.g,{icon:f.QLR}),onClick:en,"data-testid":"new-theme-button",children:(0,n.jsx)(w.x6,{id:"FiwgR9"})})}),er&&O&&(0,n.jsx)(j.Tz,{label:(0,n.jsx)(w.x6,{id:"OPW4Wb"}),placement:"top",children:(0,n.jsx)(d.$,{size:"sm",boxShadow:"none",variant:"plain",leftIcon:(0,n.jsx)(b.g,{icon:f.$MS}),onClick:T.yJ,children:(0,n.jsx)(w.x6,{id:"l3s5ri"})})})]}),D&&(0,n.jsx)(c.J,{position:"absolute",top:2,right:U?void 0:2,left:U?2:void 0,onClick:D})]}),a?(0,n.jsx)(u.a,{children:a}):(0,n.jsx)(n.Fragment,{})]}),X&&(0,n.jsxs)(m.e,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,n.jsx)(d.$,{borderRadius:"md",w:"50%",leftIcon:(0,n.jsx)(b.g,{icon:f.ffg,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===B?void 0:"gray",bg:"custom"===B?"trueblue.50":"transparent",color:"custom"===B?"trueblue.500":"gray.600",onClick:()=>W((0,V.U7)({activeView:"custom"})),children:(0,n.jsx)(w.x6,{id:"8Tg/JR"})}),(0,n.jsx)(d.$,{borderRadius:"md",w:"50%",leftIcon:(0,n.jsx)(u.a,{w:3.5,children:(0,n.jsx)(C.T,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===B?void 0:"gray",bg:"standard"===B?"trueblue.50":"transparent",color:"standard"===B?"trueblue.500":"gray.600",onClick:()=>W((0,V.U7)({activeView:"standard"})),children:(0,n.jsx)(w.x6,{id:"TJBHlP"})}),(0,n.jsx)(h.K,{icon:(0,n.jsx)(r.Q,{}),isRound:!0,"data-theme-picker-active-view-button":"search","aria-label":k.Ru._({id:"A1taO8"}),variant:"ghost",colorScheme:"search"===B?void 0:"gray",bg:"search"===B?"trueblue.100":"gray.50",onClick:Q})]})]}),(0,n.jsx)(p.S,{in:"standard"===B,children:(0,n.jsxs)(i.B,{direction:"row",children:[(0,n.jsx)(x.B,{children:Object.entries(M).map(e=>{let[t,{label:a}]=e,r=F.includes(t);return(0,n.jsx)(g.vw,{size:"md",letterSpacing:"normal",cursor:"pointer",onClick:()=>{ea(t)},_hover:{bgColor:r?"trueblue.200":"blackAlpha.200"},colorScheme:r?"trueblue":"blackAlpha",children:a},t)})}),!X&&(0,n.jsx)(h.K,{icon:(0,n.jsx)(r.Q,{}),borderRadius:"md",variant:"ghost",size:"xs","data-theme-picker-active-view-button":"search","aria-label":k.Ru._({id:"A1taO8"}),colorScheme:"search"===B?void 0:"blackAlpha",bg:"search"===B?"trueblue.100":"blackAlpha.100",_hover:{bgColor:"search"===B?"trueblue.200":"blackAlpha.200"},onClick:Q})]})}),(0,n.jsx)(p.S,{in:"search"===B,children:(0,n.jsxs)(i.B,{direction:"row",children:[!X&&(0,n.jsx)(h.K,{variant:"ghost",icon:(0,n.jsx)(b.g,{icon:f.Wzs,fixedWidth:!0}),onClick:()=>W((0,V.U7)({activeView:"standard"})),"aria-label":k.Ru._({id:"iH8pgl"})}),(0,n.jsx)(v.p,{ref:q,w:"100%",mb:1,placeholder:k.Ru._({id:"L0fOnm"}),value:K,onChange:e=>{et(e.target.value)}})]})})]})});D.displayName="ThemePickerHeader"},6295:(e,t,a)=>{a.d(t,{Kj:()=>E,NV:()=>S,Zy:()=>_,cm:()=>A});var n=a(6029),r=a(26385),i=a(26420),s=a(48810),o=a(49611),l=a(99492),d=a(48621),c=a(19564),u=a(55729),m=a(83370),h=a(98841),p=a(26814),x=a(80219),g=a(99038),v=a(89528),f=a(84287),b=a(15342),j=a(95889),w=a(70557),k=a(3487),y=a(51022);let C={info:{bgColor:"trueblue.100",strongColor:"trueblue.500"},warning:{bgColor:"orange.100",strongColor:"orange.700"},error:{bgColor:"red.100",strongColor:"red.500"}},I=e=>{let{productBadgeLabel:t,title:a,subtitle:c,onClick:u,cta:m,status:h="warning"}=e,{bgColor:p,strongColor:x}=C[h];return(0,n.jsxs)(r.B,{borderRadius:"md",bg:p,px:{base:2,md:3},ps:4,py:2,direction:{base:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",w:"100%",children:[(0,n.jsxs)(r.B,{direction:"row",alignItems:"center",gap:2,flex:"1",children:[t?(0,n.jsx)(v.zL,{product:t}):(0,n.jsx)(i.a,{color:x,display:{base:"none",sm:"block"},children:(0,n.jsx)(d.g,{icon:l.ijf})}),(0,n.jsxs)(s.E,{fontSize:{base:"xs",sm:"sm"},lineHeight:"1.3",flex:"1",children:[(0,n.jsx)(s.E,{color:x,as:"strong",children:a})," ",c]})]}),m&&u&&(0,n.jsx)(o.$,{onClick:u,variant:"outline",bg:"white",size:{base:"xs",sm:"sm"},p:3,children:m})]})},S=(0,u.memo)(()=>{let{hasEnoughCreditsToGenerateDeck:e,lowCreditStatus:t}=(0,p.B9)(),{openUpsellModal:a}=(0,f.I)();return e&&!t?null:t===x.y.LOW?(0,n.jsx)(I,{status:"warning",onClick:()=>a({segmentEvent:j.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2}),title:(0,n.jsx)(c.x6,{id:"CTJW4r"}),subtitle:(0,n.jsx)(c.x6,{id:"XflhAn"}),cta:(0,n.jsx)(c.x6,{id:"y7e9aS"})}):(0,n.jsx)(I,{status:"error",onClick:()=>a({segmentEvent:j.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2}),title:(0,n.jsx)(c.x6,{id:"caCGZW"}),subtitle:(0,n.jsx)(c.x6,{id:"XflhAn"}),cta:(0,n.jsx)(c.x6,{id:"y7e9aS"})})});S.displayName="NotEnoughCreditsUpsellWarning";let E=(0,u.memo)(()=>{let e=(0,b.GV)(m.J$),{maxTokens:t,canUpgrade:a}=(0,y.is)(),{openUpsellModal:r}=(0,f.I)();return!e||e<t?null:e>=t&&a?(0,n.jsx)(I,{status:"warning",productBadgeLabel:"pro",onClick:()=>r({segmentEvent:j.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_MORE_TOKENS}),title:(0,n.jsx)(c.x6,{id:"265FwR"}),subtitle:(0,n.jsx)(c.x6,{id:"kaOsNu",values:{0:y.yI.toLocaleString()}}),cta:(0,n.jsx)(c.x6,{id:"kwkhPe"})}):(0,n.jsx)(I,{status:"warning",title:(0,n.jsx)(c.x6,{id:"mWVxkj"}),subtitle:(0,n.jsx)(c.x6,{id:"qTSTz6",values:{0:y.yI.toLocaleString()}})})});E.displayName="MaxTokensUpsellWarning";let A=(0,u.memo)(e=>{let{maxSlides:t,numSlides:a}=e;return!a||a<t?null:(0,n.jsx)(I,{status:"warning",title:(0,n.jsx)(c.x6,{id:"PbeHU2",values:{MAX_IMPORT_SLIDES:h.O}})})});A.displayName="MaxImportSlidesWarning";let _=(0,u.memo)(()=>{let e=(0,b.GV)(m.yR),[t]=(0,w.R7)("editorMode"),{maxCards:a,canUpgrade:r}=(0,k.Zq)(),{openUpsellModal:i}=(0,f.I)(),{product:s}=(0,f.I)();return!e||e<a||e===a&&"structured"===t?null:"freeform"===t&&e>=a&&r?(0,n.jsx)(I,{status:"warning",onClick:()=>i({segmentEvent:j.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER}),title:(0,n.jsx)(c.x6,{id:"6/00Zu",values:{MAX_CARDS_PRO:k.t}}),cta:(0,n.jsx)(c.x6,{id:"kwkhPe"})}):"freeform"===t?null:r?(0,n.jsx)(I,{status:"warning",onClick:()=>i({segmentEvent:j.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER}),title:(0,n.jsx)(c.x6,{id:"3wlruh",values:{maxCards:a}}),subtitle:s?(0,n.jsx)(c.x6,{id:"dBT3NQ",values:{PRO_PROPER_NOUN:g.Kc,MAX_CARDS_PRO:k.t}}):(0,n.jsx)(c.x6,{id:"t9ke0z",values:{MAX_CARDS_PRO:k.t}}),cta:(0,n.jsx)(c.x6,{id:"kwkhPe"})}):(0,n.jsx)(I,{status:"warning",title:(0,n.jsx)(c.x6,{id:"dHdJAv",values:{maxCards:a}}),subtitle:(0,n.jsx)(c.x6,{id:"yLG7qf"})})});_.displayName="CardCountUpsellWarning"},12910:(e,t,a)=>{a.d(t,{w:()=>l});var n=a(77650),r=a(15342),i=a(83370),s=a(51022);let o=(e,t)=>{switch(e){case"invalid-empty":return n.Ru._({id:"9IxKHJ"});case"invalid-long":return n.Ru._({id:"ZcJO3k",values:{maxTokens:t}})}},l=()=>{let{maxTokens:e}=(0,s.is)(),t=(0,r.GV)((0,i.$t)(e));return void 0===t?{canGenerate:!0,cantGenerateReason:void 0}:{canGenerate:!1,validationError:t,cantGenerateReason:o(t,e)}}},20715:(e,t,a)=>{a.d(t,{Jp:()=>l,cg:()=>s,dd:()=>o});var n=a(95889),r=a(29608),i=a(37605);let s=e=>{let{doc_id:t,source:a,source_doc_id:r,channel:s,format:o,extra:l}=e;null===n.zS||void 0===n.zS||n.zS.track(i.VV.DOC_CREATED,{doc_id:t,source_doc_id:r,source:a,channel:s,extra:l,format:o})},o=e=>{let{docId:t,type:a,source:s}=e;if(!t)return void console.debug("[trackDocShareLinkCopiedEvent]: doc_id is required");null===n.zS||void 0===n.zS||n.zS.track(i.VV.DOC_SHARELINK_COPIED,{doc_id:t,source:s,type:a,device:(0,r.ZI)()})},l=e=>{let{fileId:t,source:a}=e;if(!t)return void console.debug("[trackFileShareLinkCopiedEvent]: file_id is required");null===n.zS||void 0===n.zS||n.zS.track(i.VV.FILE_SHARELINK_COPIED,{file_id:t,source:a,device:(0,r.ZI)()})}},25683:(e,t,a)=>{a.d(t,{Q:()=>v});var n=a(6029),r=a(40452),i=a(49611),s=a(58959),o=a(48621),l=a(47412),d=a(19564),c=a(55729),u=a(90184),m=a(26814),h=a(37605),p=a(70557);let x=()=>{let[e]=(0,p.R7)("imageProvider");return"aiGenerated"===e?"generateV2WithImages":"generateV2"};var g=a(12910);let v=(0,c.memo)(e=>{let{onClick:t,arrowIcon:a,isBlocked:c=!1}=e,p=x(),{canGenerate:v,cantGenerateReason:f}=(0,g.w)(),{hasEnoughCreditsToGenerateDeck:b}=(0,m.B9)(),j=(0,m.tO)(t,"generateV2",h.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2),w=!v||c,k=w&&!c;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.Tz,{label:b?f:(0,n.jsx)(d.x6,{id:"mTJ1YV"}),isDisabled:!k,children:(0,n.jsx)(r.s,{flex:"1",alignItems:"stretch",alignSelf:"stretch",justifyContent:"stretch",flexDirection:"column",children:(0,n.jsx)(i.$,{variant:"solid",w:"100%",rightIcon:(0,n.jsxs)(s.z,{children:[(0,n.jsx)(u.G,{type:p}),(0,n.jsx)(o.g,{icon:a})]}),onClick:j,isDisabled:w,size:{base:"md",lg:"lg"},children:(0,n.jsx)(d.x6,{id:"xGVfLh"})})})})})});v.displayName="ContinueToThemePickerButton"},26535:(e,t,a)=>{a.d(t,{r:()=>v});var n=a(6029),r=a(83638),i=a(25223),s=a(83743),o=a(26420),l=a(26385),d=a(40452),c=a(49611),u=a(48810),m=a(47412),h=a(19564);a(55729);var p=a(87827),x=a(55023),g=a(70557);let v=e=>{let{columns:t={base:2,lg:4},labelText:a}=e,[o,l]=(0,g.R7)("textAmount"),d=(0,p.n)(x.d);return(0,n.jsxs)(r.MJ,{children:[(0,n.jsx)(i.l,{fontSize:"sm",fontWeight:"semibold",children:null!=a?a:(0,n.jsx)(h.x6,{id:"pi+Tez"})}),(0,n.jsx)(s.r,{columns:t,spacing:2,children:Object.keys(d).map(e=>(0,n.jsx)(y,{textAmount:e,isSelected:o===e,onClick:()=>l(e)},e))})]})},f="24px",b={sm:{lines:3,columns:1},md:{lines:4,columns:1},lg:{lines:8,columns:2},xl:{lines:15,columns:3}},j=e=>{let{isSelected:t,delay:a,isLastLine:r=!1}=e;return(0,n.jsx)(o.a,{h:"2px",w:r?"60%":"100%",bg:t?"deepocean.600":"gray.300",borderRadius:"sm",transitionProperty:"transform, background-color",transitionDuration:"250ms",transitionTimingFunction:"ease",transitionDelay:t?"".concat(a,"ms"):"0ms"})},w=e=>{let{lineCount:t,startDelay:a,isSelected:r,isLastColumn:i=!1}=e;return(0,n.jsx)(l.B,{spacing:"2px",flex:1,justifyContent:"flex-start",h:"100%",children:Array.from({length:t}).map((e,s)=>(0,n.jsx)(j,{isSelected:r,delay:a+35*s,isLastLine:i&&s===t-1},s))})},k=e=>{let{textAmount:t,isSelected:a}=e,{lines:r,columns:i}=b[t];if(1===i)return(0,n.jsx)(l.B,{spacing:"2px",h:f,w:"100%",justify:"flex-start",align:"flex-start",children:Array.from({length:r}).map((e,t)=>(0,n.jsx)(j,{isSelected:a,delay:35*t,isLastLine:t===r-1},t))});let s=Math.ceil(r/i),o=r-(i-1)*s;return(0,n.jsx)(d.s,{h:f,w:"100%",justify:"flex-start",align:"flex-start",gap:"4px",children:Array.from({length:i}).map((e,t)=>{let r=t===i-1;return(0,n.jsx)(w,{lineCount:r?o:s,startDelay:t*s*35,isSelected:a,isLastColumn:r},t)})})},y=e=>{let{textAmount:t,isSelected:a=!1,onClick:r=()=>{}}=e,i=(0,x.d)()[t];return(0,n.jsx)(m.Tz,{label:i.description(),placement:"top",children:(0,n.jsxs)(l.B,{as:c.$,h:"auto",textShadow:"none",variant:"plain",p:3,spacing:1,w:"100%",cursor:"pointer",textAlign:"center",transition:"all 300ms ease",border:"1px solid",bg:a?"trueblue.50":void 0,borderRadius:"md",boxShadow:"sm",borderColor:a?"sky.600":"gray.200",color:a?"trueblue.700":"gray.800",onClick:r,_hover:{bg:"trueblue.50",borderColor:"trueblue.400"},position:"relative",children:[(0,n.jsx)(l.B,{spacing:1,w:"80%",maxW:"100px",children:(0,n.jsx)(k,{textAmount:t,isSelected:a})}),(0,n.jsx)(u.E,{fontSize:"sm",fontWeight:"medium",children:i.label()})]})})}},28205:(e,t,a)=>{a.d(t,{g:()=>r});var n=a(68301);let r=(e,t)=>{let a=n.of.get("aiSearchMode");return"disabled"!==a&&"generate"===e&&("always"===a||"optional"===a&&t)?{search:!0,searchInGenerate:n.of.get("aiSearchInGenerate"),searchProvider:n.of.get("aiSearchProvider")}:{search:!1}}},41405:(e,t,a)=>{a.d(t,{e:()=>ea});var n=a(6029),r=a(40452),i=a(55729),s=a(15342),o=a(49023),l=a(7554),d=a(30034),c=a(29608),u=a(11403),m=a(26420),h=a(57405),p=a(49611),x=a(83004),g=a(55597),v=a(48621),f=a(87386),b=a(19564),j=a(18833),w=a(30361),k=a.n(w),y=a(9922),C=a.n(y),I=a(83370),S=a(82550),E=a(95889),A=a(40077),_=a(84646),R=a(5747),T=a(77387),V=a(80812),L=a(45143),G=a(60908),M=a(70557),D=a(61097),z=a(79459);let P=(0,j.P)(m.a),O=e=>{let{card:t,theme:a,...r}=e,s=(0,i.useMemo)(()=>{if(t)return(0,f.createDocWithCards)({},[t])},[t]);return(0,n.jsx)(P,{pointerEvents:"none",sx:{"*":{backdropFilter:"none !important",transitionProperty:"background-color, color, border-color, padding, margin, width, maxWidth, fontSize",transitionDuration:".15s",[".button .".concat(A.U6)]:{transitionProperty:"none"}},".doc-content-wrapper *[data-doc-background-element], .motion-present-mode-bg":{display:"none"},".card-wrapper,.card-body,.doc-content-wrapper":{padding:0,margin:0,minHeight:"auto"},"[data-card-body]":{"--card-color-transparent":"var(--card-color)","--card-background-color":"var(--card-color)","--card-width":"60rem"},".logo":{display:"none"}},...r,children:s&&a&&(0,n.jsx)(T.S,{content:s,initialContent:s,theme:a})})},N=(e,t,a)=>{let n=0,r=e=>{var i;return null==(i=e.content)?void 0:i.map(e=>{var i,s,o,l,d,c,u;let m={...e,attrs:{...e.attrs}};if("image"===e.type){let e=t.shift();e&&(m.attrs.src=e.imageUrl,m.attrs.tempUrl=e.imageUrl)}if("cardAccentLayoutItem"===e.type&&(null==(o=e.attrs)||null==(s=o.background)||null==(i=s.image)?void 0:i.src)){let e=null==a||null==(u=a.config)||null==(c=u.accentBackgrounds)?void 0:c[n];e&&(n++,m.attrs.background=e)}if("smartLayoutCell"===e.type&&(null==(d=e.attrs)||null==(l=d.image)?void 0:l.src)==="custom"){let e=t.shift();e&&(m.attrs.image.src=e.imageUrl,m.attrs.image.tempUrl=e.imageUrl)}return e.content&&(m.content=r(m)),m})};return Object.assign({},e,{content:r(e)})},U=e=>{e&&requestAnimationFrame(()=>{var t;return null==(t=document.querySelector('[data-theme-id="'.concat(e,'"]')))?void 0:t.scrollIntoView({behavior:"smooth"})})},W=e=>{let{images:t}=e,a=(0,s.jL)(),o=(0,s.GV)(l.ST),d=(0,s.GV)(l.kl),u=(0,E.st)(),m=(0,V.fL)(),[f,j]=(0,M.R7)("themeId"),w=(0,s.GV)(I.zQ),y=(0,i.useCallback)(e=>{j(e),null==u||u.track(E.VV.AI_DOC_CREATION_THEME_CLICKED,{themeId:e||"none",device:(0,c.ZI)(),generationType:w})},[u,j,w]),A=o.find(e=>f===e.id);(0,i.useEffect)(()=>{if(f||!(null==o?void 0:o.length))return;a((0,l.U7)({activeView:"standard"}));let e=k()(d),t=(null==m?void 0:m.defaultThemeId)||(null==e?void 0:e.id);t&&(j(t),U(t))},[a,f,d,o,j,null==m?void 0:m.defaultThemeId]);let T=(0,i.useMemo)(()=>N(C()((0,S.O)()),C()(t),A).content[0].content||[],[A,t]),P=(0,i.useCallback)(()=>{if(!o)return;let e=k()(o);e&&(j(e.id),(null==e?void 0:e.workspaceId)?a((0,l.U7)({activeView:"custom"})):a((0,l.U7)({activeView:"standard"})),U(null==e?void 0:e.id))},[a,j,o]),W=(0,L.h5)({base:0,"4xl":300})||0,B=(0,L.h5)({base:600,xl:250,"4xl":0})||0,F=(0,L.h5)({base:0,xl:1})||0,q=(0,L.h5)({base:.5,lg:.6,xl:.7,"2xl":.85,"3xl":1,"4xl":1.125});return(0,i.useEffect)(function(){o&&0!==o.length&&Promise.all(o.map(e=>{var t,a,n,r,i,s,o,l,d,c;(null==(n=e.config.accentBackgrounds)||null==(a=n[0])||null==(t=a.image)?void 0:t.src)&&(0,G.GV)(null==(l=e.config.accentBackgrounds)||null==(o=l[0].image)?void 0:o.src),(null==(s=e.config.accentBackgrounds)||null==(i=s[1])||null==(r=i.image)?void 0:r.src)&&(0,G.GV)(null==(c=e.config.accentBackgrounds)||null==(d=c[1].image)?void 0:d.src)}))},[o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.a,{theme:A}),(0,n.jsxs)(r.s,{zIndex:1,py:0,px:6,"data-theme-desktop-root":!0,position:"relative",children:[(0,n.jsx)(x.mL,{styles:{html:{overflowX:"hidden",overflowY:"auto"}}}),(0,n.jsxs)(r.s,{direction:"column",pos:"relative",flex:1,h:"100%",transform:"scale(".concat(q,")"),justifyContent:"center",alignItems:"center",ms:[40,35,30,20,0],"data-id":"theme-picker-desktop-cards",children:[(0,n.jsx)(O,{pos:"absolute",theme:A,card:T[2],initial:{opacity:0},animate:{opacity:1,translateX:0,transition:{opacity:{duration:.5,delay:0,ease:"easeOut"},default:{duration:2,ease:"easeOut"}}},zIndex:1}),(0,n.jsx)(O,{pos:"absolute",theme:A,card:T[0],initial:{translateX:0,opacity:0},animate:{translateX:W,translateY:B,rotate:-F,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}}),(0,n.jsx)(O,{pos:"absolute",theme:A,card:T[1],initial:{translateX:0,opacity:0},transformOrigin:"center",animate:{translateX:-W,translateY:-B,rotate:F,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}})]}),(0,n.jsxs)(r.s,{w:"420px",p:6,direction:"column",justifyContent:"center",bg:"whiteAlpha.900",borderRadius:"lg",h:"calc(100vh - var(--chakra-sizes-20))",minH:"700px",mb:4,shadow:"md",pos:"relative",position:"sticky",mt:6,children:[(0,n.jsx)(R.D,{title:(0,n.jsx)(b.x6,{id:"cQGp8b"}),description:(0,n.jsxs)(h.T,{w:"100%",align:"center",justify:"center",children:[(0,n.jsx)(D.I,{w:"100%",children:(0,n.jsx)(b.x6,{id:"ziAjHi"})}),(0,n.jsx)(p.$,{w:"100%",leftIcon:(0,n.jsx)(v.g,{icon:g.tW,color:"var(--chakra-colors-trueblue-800)"}),size:"md",onClick:P,children:(0,n.jsx)(b.x6,{id:"B8w15Q"})})]}),stackProps:{pb:4},currentTheme:A,showCreateButtons:!1}),(0,n.jsx)(_.oz,{shouldScrollToCurrent:!0,currentTheme:A,setTheme:e=>{y(null==e?void 0:e.id)},flexProps:{overflowY:"auto",mx:-6,px:3},disableEditing:!0})]})]})]})};var B=a(26385),F=a(23293),q=a(48810),H=a(61204),K=a(58959),$=a(99492),X=a(74158),Z=a(75178),J=a(88586),Q=a(51932),Y=a(62452),ee=a(82927);let et=()=>{let e=(0,i.useRef)(!1),t=(0,s.GV)(l.WI),a=(0,s.GV)(l.kl),o=(0,E.st)(),d=(0,s.GV)(I.zQ),[u,h]=(0,M.R7)("themeId",{debounce:500}),[g,f]=(0,i.useState)(()=>t.find(e=>e.id===u)),j=(0,X.wA)(),{currentWorkspace:w}=(0,ee.ur)(),{data:y}=(0,J.Vl$)({variables:{id:null==w?void 0:w.id},skip:!(null==w?void 0:w.id)}),C=null==y?void 0:y.workspace,S=(0,s.GV)(l.cE),A=(0,s.GV)(l.yD),_=g?(0,Y.Mw)(g):void 0;(0,i.useEffect)(()=>{if(u||!(null==a?void 0:a.length)||e.current)return;let n=k()(a),r=t.find(e=>e.id===(null==C?void 0:C.defaultThemeId))||n;if(r){var i;j((0,l.U7)({activeView:"standard"})),f(r),null==(i=document.querySelector('[data-theme-mobile-preview="'.concat(r.id,'"]')))||i.scrollIntoView(),e.current=!0}},[j,a,u,t,null==C?void 0:C.defaultThemeId]),(0,i.useEffect)(()=>{var t;!e.current&&u&&g&&(g.workspaceId?j((0,l.U7)({activeView:"custom"})):j((0,l.U7)({activeView:"standard"})),null==(t=document.querySelector('[data-theme-mobile-preview="'.concat(g.id,'"]')))||t.scrollIntoView(),e.current=!0)},[j,g,u]);let R=(0,i.useCallback)(e=>{if(!(e.target instanceof HTMLElement))return;let{scrollLeft:a,scrollWidth:n,clientWidth:r}=e.target,i=Math.round(a/(n-r)*(t.length-1)),s=t[i];(null==s?void 0:s.id)!==(null==g?void 0:g.id)&&f(s)},[t,null==g?void 0:g.id,f]),V=(0,i.useCallback)(()=>{(null==g?void 0:g.id)&&(h(g.id),null==o||o.track(E.VV.AI_DOC_CREATION_THEME_CLICKED,{themeId:g.id,device:(0,c.ZI)(),generationType:d}))},[o,d,null==g?void 0:g.id,h]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.a,{theme:g}),(0,n.jsxs)(B.B,{spacing:0,h:"100%",w:"100vw",children:[(0,n.jsx)(x.mL,{styles:{html:{height:"100%"},body:{height:"100%"}}}),(0,n.jsxs)(B.B,{spacing:0,mx:"auto",zIndex:1,px:6,pt:20,sx:T.o,w:"100%",children:[(0,n.jsxs)(B.B,{align:"center",spacing:1,children:[(0,n.jsx)(F.D,{variant:"brand",letterSpacing:"-0.04em",fontWeight:"700",color:_?"#FFFFFF":"#0a1629",w:"100%",size:"2xl",transitionProperty:"common",transitionDuration:"normal",children:(0,n.jsx)(b.x6,{id:"cQGp8b"})}),(0,n.jsx)(q.E,{fontSize:"lg",color:_?"#FFFFFF":"#0a1629",letterSpacing:"-0.04em",transitionProperty:"common",transitionDuration:"normal",children:(0,n.jsx)(b.x6,{id:"950yV9"})})]}),S&&(0,n.jsxs)(H.e,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",pt:2,justifyContent:"center",children:[(0,n.jsx)(p.$,{borderRadius:"full",leftIcon:(0,n.jsx)(v.g,{icon:$.ffg,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===A?void 0:"gray",bg:"custom"===A?"deepocean.100":"gray.50",onClick:()=>j((0,l.U7)({activeView:"custom"})),children:(0,n.jsx)(b.x6,{id:"8Tg/JR"})}),(0,n.jsx)(p.$,{borderRadius:"full",leftIcon:(0,n.jsx)(m.a,{w:3.5,children:(0,n.jsx)(Z.T,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===A?void 0:"gray",bg:"standard"===A?"deepocean.100":"gray.50",onClick:()=>j((0,l.U7)({activeView:"standard"})),children:(0,n.jsx)(b.x6,{id:"TJBHlP"})})]})]}),(0,n.jsx)(r.s,{zIndex:1,pos:"relative",overflow:"auto",py:8,sx:{"scroll-snap-type":"x mandatory"},onScroll:R,children:(0,n.jsx)(K.z,{flex:1,spacing:6,px:12,pt:1,children:t.map(e=>(0,n.jsx)(Q.s,{isSelected:e.id===(null==g?void 0:g.id),theme:e},e.id))})}),(0,n.jsx)(r.s,{px:6,py:4,mb:2,justify:"center",zIndex:9,w:"100%",children:(0,n.jsx)(D.I,{size:"lg",w:"100%",onClick:V,children:(0,n.jsx)(b.x6,{id:"ziAjHi"})})})]})]})},ea=(0,i.memo)(e=>{let{images:t=[]}=e;(0,o.t)();let a=(0,s.GV)(l.ST);return(0,u.En)()&&(null==a?void 0:a.length)?(0,n.jsxs)(r.s,{direction:"column",justifyContent:"flex-start",flex:1,w:"100vw",h:"100%",children:[(0,n.jsx)(d.s,{}),(0,c.Xb)()?(0,n.jsx)(et,{}):(0,n.jsx)(W,{images:t})]}):null});ea.displayName="ThemeStep"},50278:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(6029),r=a(40452),i=a(24302),s=a(18833),o=a(55729);let l=(0,s.P)(r.s),d=(0,o.memo)(e=>{let{children:t}=e,a=(0,i.dU)("gray.700","white"),r=(0,i.dU)("white","gray.700"),s=(0,i.dU)("blackAlpha.200","whiteAlpha.200");return(0,n.jsx)(l,{"data-testid":"sticky-bottom-bar",bg:r,color:a,py:3,position:"fixed",zIndex:"10",initial:{opacity:0,bottom:-10},animate:{opacity:1,bottom:0},exit:{opacity:0,bottom:0},borderTop:"1px solid",borderColor:s,px:{base:3,md:4},direction:"column",align:"center",w:"100%",children:t})});d.displayName="StickyBottomBar"},51932:(e,t,a)=>{a.d(t,{s:()=>j});var n=a(6029),r=a(26420),i=a(40452),s=a(26385),o=a(48810),l=a(21938),d=a(55729),c=a(90221),u=a(62452),m=a(61385),h=a(62171),p=a(60908),x=a(58240),g=a(55670),v=a(95571),f=a(40077),b=a(95714);let j=(0,d.memo)(e=>{let{theme:t,isSelected:a=!1}=e,{contentStyles:d}=t.config,j=(0,h.fS)(t),w=(0,u.Mw)(t),k=(0,b.ZI)(t),y=(0,g.S)(t,!1),C=(0,h.FD)(j,w,p.p7),{inViewport:I,ref:S}=(0,x.v)({dimensions:{width:350,height:220}});return!1===I?(0,n.jsx)(r.a,{ref:S,"data-placeholder":!0,"data-theme-mobile-preview":t.id,w:"100%",children:(0,n.jsx)(i.s,{w:"calc(100vw - 5rem)",minH:"10em",sx:{"scroll-snap-align":"center"},color:"transparent",bg:"whiteAlpha.100",children:t.name})}):(0,n.jsx)(r.a,{css:k,sx:y,ref:S,w:"100%","data-theme-mobile-preview":t.id,children:(0,n.jsxs)(i.s,{flexDir:"column",w:"calc(100vw - 5rem)",sx:{"scroll-snap-align":"center"},borderRadius:"lg",shadow:a?"outline":"xl",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease-out",pos:"relative",...C,children:[(0,n.jsx)(c.m,{theme:t}),(0,n.jsx)(r.a,{sx:{...v.CO,...d},borderRadius:"base",className:"".concat(m._P," ").concat(w?"is-dark":""),color:w?"white":"gray.800",flex:1,pointerEvents:"none",children:(0,n.jsxs)(s.B,{p:6,children:[(0,n.jsx)(o.E,{className:"block-title",noOfLines:1,wordBreak:"break-all",mt:"0 !important",mb:"var(--chakra-space-2) !important",children:(0,n.jsx)(o.E,{as:"span",className:(0,l.cx)("title",f.U6),fontSize:"1.8em !important",paddingBottom:"0 !important",children:t.name})}),(0,n.jsxs)(o.E,{fontSize:"sm",noOfLines:[4,6],className:"block block-paragraph",my:"0 !important",children:["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dapibus iaculis sagittis."," ",(0,n.jsxs)(o.E,{as:"a",className:"link",children:[" ","Fusce pellentesque quam tortor,"]})," ","sit amet vulputate ligula sollicitudin nec. Etiam consectetur leo sed elit euismod, eget suscipit purus ullamcorper. Etiam id viverra purus. Nulla hendrerit sapien eget dui egestas posuere. Cras tristique condimentum tristique. Sed pellentesque felis sed justo ullamcorper molestie. Vestibulum et condimentum nibh, non pellentesque nisi."]})]})})]})})});j.displayName="ThemePreviewThumbnailMobile"},61097:(e,t,a)=>{a.d(t,{I:()=>eu});var n=a(6029),r=a(46898),i=a(40452),s=a(49611),o=a(55597),l=a(48621),d=a(47412),c=a(77650),u=a(55729),m=a(37471),h=a(26814),p=a(95889),x=a(82927),g=a(30361),v=a.n(g),f=a(58495),b=a(81278),j=a(24171),w=a(62522),k=a(71438),y=a(73549),C=a(12419),I=a(74553),S=a(13559),E=a(52077),A=a(88586),_=a(68301),R=a(58809),T=a(65421),V=a(13080),L=a(15342),G=a(20715),M=a(99552),D=a(44141),z=a(95695),P=a(1057),O=a(8139),N=a(51817),U=a(55292),W=a(29608),B=a(9118),F=a(4868),q=a(28205),H=a(83370),K=a(81807);let $=e=>"condense"===e.textMode?"big":"preserve"===e.textMode?"preserve":"fast",X=e=>{if(e.contentTemplate)return{size:"big",model:_.of.get("generateDeckBigModel"),reasoningEffort:"none"};let t=$(e),a="preserve"===t?_.of.get("generateDeckPreserveModel"):"big"===t?_.of.get("generateDeckBigModel"):_.of.get("generateDeckFastModel"),n="none";return"preserve"===t&&(n=_.of.get("generateDeckReasoningEffort")),{size:t,model:a,reasoningEffort:n}};var Z=a(87386),J=a(35605),Q=a(34832),Y=a(89942),ee=a(70006),et=a(88490);let ea=()=>{let{push:e}=(0,b.useRouter)(),[t]=(0,A.Ybb)(),a=(0,_.u)("createSiteAi"),n=(0,Y.Fd)(),{generate:r}=(0,Q.pt)("DetermineSiteMetadata",{}),[i]=(0,A.g1r)(),[s]=(0,A.vlJ)(),[o]=(0,A.cGn)();return{canCreateSite:a&&n,createSiteWithAIAndRedirect:(0,u.useCallback)(async a=>{let{workspaceId:n,docId:l,themeId:d,generateVars:u,firstCards:m}=a,h=m[0]?(0,Z.getCardTitle)(m[0].content):void 0,{data:p}=await t({variables:{input:{workspaceId:n,name:h||c.Ru._({id:"h3eRam"}),routes:[{docId:l,path:"/"}],themeId:d}}}),x=null==p?void 0:p.createSite;if(!x){console.error("[CreateSiteModal] Failed to create site, no site returned"),e("/docs/".concat(l,"?source=").concat(E.MH));return}try{let e=m.map(e=>e.raw).join("\n"),{language:t,topic:a,input:d}=u,{promise:c}=r({workspaceId:n,variables:{topic:a||"",input:d,language:t,pageHtml:e}}),h=await c,{title:p,subdomain:g}=(0,et.d)(h);g=(0,J.Fw)(g);let v="string"==typeof g&&g.length<=60&&/^[a-z0-9-]+$/.test(g.toLowerCase()),f=[];v&&f.push(i({variables:{input:{siteId:x.id,name:g}}})),p&&f.push(s({variables:{input:{siteId:x.id,name:p}}}),o({variables:{id:l,title:p}})),await Promise.all(f)}catch(e){console.error("(caught) useGenerateSite error: ".concat(e))}e((0,ee.pF)({docId:l,params:{source:E.MH}}))},[t,e,r,i,s,o])}};var en=a(70557),er=a(3487),ei=a(74171);let es=()=>{let{push:e}=(0,b.useRouter)(),[t]=(0,A.Imo)(),{generate:a}=(0,Q.pt)("DeterminePageMetadata",{}),[n]=(0,A.cGn)(),r=(0,_.u)("createFilePage");return{setPageMetadataWithAIAndRedirect:(0,u.useCallback)(async i=>{let{site:s,docId:o,workspaceId:l,generateVars:d,firstCards:c}=i;try{let{language:e,topic:i,input:u}=d,m=s.routes.map(e=>{var t;return{title:null==(t=e.doc)?void 0:t.title,path:e.path}}),h=c.map(e=>e.raw).join("\n"),p=c[0]?(0,Z.getCardTitle)(c[0].content):void 0,x=!0,{promise:g}=a({workspaceId:l,variables:{topic:i||"",input:u,language:e,otherPages:m,pageHtml:h}}),v=await g,{path:b,title:j}=(0,et.d)(v);j||(j=p||"Untitled page",x=!1),b||(b=(0,J.Fw)(j)),b=(0,J.Fw)(b),s.routes.some(e=>e.path===b)&&(b="".concat(b,"-").concat((0,f.Ak)(6)));let w=e=>t({variables:{input:{siteId:s.id,docId:o,path:(0,D.wK)(e),offline:!1}},refetchQueries:["GetSite"]}),k=[n({variables:{id:o,title:j,titleEdited:x}})];r||k.push(w(b).catch(e=>{if(e instanceof ei.K&&(0,A.vIB)(e).find(e=>["duplicate_site_path","duplicate_doc_path"].includes(e)))return w("".concat(!b||"/"===b?(0,J.Fw)(j):b,"-").concat((0,f.Ak)(5)));throw e})),await Promise.all(k)}catch(e){console.error("(caught) useSetPageMetadataWithAI error: ".concat(e))}e((0,ee.pF)({docId:o,params:{source:E.MH}}))},[a,e,t,n,r])}},eo=e=>{let{onSuccess:t,options:a}=e,n=(0,p.st)(),{push:r,query:i}=(0,b.useRouter)(),s=i.channelId,o=(0,L.CU)(),l=(0,L.GV)(M.Gd),d=(0,L.GV)(R.nU),{canCreateSite:c,createSiteWithAIAndRedirect:m}=ea(),[h,g]=(0,en.R7)("themeId"),{setPageMetadataWithAIAndRedirect:$}=es(),[Z]=(0,A.g5)(),[J]=(0,A.nqW)(),[Q,Y]=(0,u.useState)(!1),ee=(0,_.u)("streamResumingEnabled"),et=(0,_.u)("createFilePage"),[ei]=(0,en.T7)(),{maxCards:eo}=(0,er.Zq)(),{addToLocalThemeHistory:ec}=(0,k.a)(),eu=(0,A.tzS)(A.xAr),em=null==a?void 0:a.visualsMenuEnabled;return{generate:(0,u.useCallback)(async()=>{var e,i,u,h,b;let k,R,L,M,Q=o.getState(),ea=(0,H.gG)(Q),en=(0,H.nY)(Q);if(!en)throw Error("Cannot generate with no docGenerateInputId");Y(!0);let er=(0,x.P9)(),es=(0,H.J$)(Q),eh=(0,H.fg)(Q),ep=(0,H.zQ)(Q),ex=(0,B.xt)((0,H.Wt)("locale")(Q)),eg=(0,H.Wt)("textAmount")(Q),ev=(0,H.Wt)("audience")(Q),ef=(0,H.Wt)("tone")(Q),eb=(0,H.wS)(Q),ej=(0,H.yR)(Q),ew=(0,H.Wt)("imageLicense")(Q),ek=(0,H.Wt)("imageProvider")(Q),ey=null!=(e=(0,H.Wt)("imageModelAutoselect")(Q))&&e,eC=ei;if(em){k=null!=(i=(0,H.Wt)("artStylePreset")(Q))?i:(0,j.b)(),R=null!=(u=(0,H.Wt)("artStylePrompt")(Q))?u:V.ll[k].prompt;let e=(0,H.Wt)("artStyleAdditionalKeywords")(Q);e&&(R="".concat(R,". ").concat(e)),ey&&(eC=(0,T._)())}let eI=(0,H.Wt)("styleTemplate")(Q),eS=(0,H.Wt)("imageStyle")(Q),eE=(0,H.Wt)("textMode")(Q),eA=(0,H.Wt)("editorMode")(Q),e_=(0,F.ky)((0,H.qT)(Q),eA),eR=(0,H.Wt)("contentTemplate")(Q),eT=(0,H.Wt)("cardContentType")(Q),eV="generate"!==ep,eL=(0,H.Wt)("searchRequested")(Q),eG=(0,H.Wt)("themeId")(Q),{search:eM,searchProvider:eD,searchInGenerate:ez}=(0,q.g)(ep,eL),eP=_.of.get("growthSkipThemePickerOnFirstDeck")&&"generate"===ep,eO=eG||(eP?v()(z.CU):l?l.themeId:void 0);eO&&ec(eO),!eG&&eP&&(await g(eO),null==n||n.track(p.VV.SKIPPED_THEME_RANDOM_THEME_PICKED,{themeId:eO||"none"}));let eN=eO?(await eu({id:eO})).data.theme:void 0,eU=eN?(0,S.z)(eN):void 0,eW=eS?"Custom":"Theme";"image"===eT&&eN?eS=(0,P.LU)(eN,R):"aiGenerated"===ek&&!eS&&eN&&(eS=(0,P.xI)(eN));let eB=c&&"webpage"===eb&&!(null==d?void 0:d.id),eF=(0,D.dv)(l)||eB,{promptKey:eq}=ed(),eH=el({textMode:eE,generationType:ep,format:eb,language:ex.englishName,cardContentType:eT}),{model:eK,size:e$,reasoningEffort:eX}=X({numCards:ej,editorMode:eA,textMode:eE,textAmount:eg,generationType:ep,promptKey:eq,tokenLength:es,contentTemplate:eR}),eZ=eI;eZ||"social"!==eb||(eZ="social_portrait");let eJ=(eZ?{...O.S9[eZ].docSettings()}:{})||{};("lg"===eg||"xl"===eg)&&"document"!==eb&&(eJ.fontSize="sm"),eJ.locale=(0,H.Wt)("locale")(o.getState());let eQ={topic:"generate"===ep?eh:"",additionalInstructions:"generate"!==ep?eh:"",input:e_,language:ex.englishName,numCards:Math.min(ej,eo),format:eb,imageOptions:{model:eC,stylePrompt:eS,stylePreset:eW,license:ew,artStylePreset:k,artStylePrompt:R,visualsMenuEnabled:em},textAmount:eg,audience:ev,tone:ef,textMode:eE,editorMode:eA,imageProvider:ek,search:ez,searchProvider:eD,contentTemplate:eR,cardDimensions:eJ.cardDimensions,theme:eU,basePromptKey:eH,blockFlags:(0,K.fc)()},eY={docFormatKey:eb,imageOptions:{license:ew,provider:ek,generateStyle:eS,model:eC,stylePreset:eW,artStylePreset:k,artStylePrompt:R,...em?{visualsMenuEnabled:em,modelAutoselect:ey}:{}},theme:eN,preserveLayouts:!1,cardDimensions:eJ.cardDimensions,promptKey:eq},e0=null==(L=et&&(null==d?void 0:d.id)?null==(h=(await J({variables:{docGenerateInputId:en,fileId:d.id,options:{pageSettings:eJ,aiOptions:{preserveLayouts:eY.preserveLayouts,imageOptions:eY.imageOptions},schemaVersion:N.f$},path:"/untitled-page-".concat((0,f.Ak)(5))}})).data)?void 0:h.generatePage:null==(b=(await Z({variables:{docGenerateInputId:en,fileId:null==d?void 0:d.id,options:{themeId:eF?void 0:eO||U.z.id,orgAccess:eF?A.aXG.Manage:void 0,docSettings:eJ,aiOptions:{preserveLayouts:eY.preserveLayouts,imageOptions:eY.imageOptions},channels:s?[{channelId:s}]:void 0,schemaVersion:N.f$}}})).data)?void 0:b.generateDoc)?void 0:L.docGenerateInput.id;if(!e0)throw Error("No docGenerateInput.id to use as interactionId");if(!L)throw Error("Could not create doc");(0,w.wx)({artStylePreset:k,artStylePrompt:R,imageProvider:ek,imageModelAutoselect:ey,imageModel:eC});let{input:e1,topic:e2,additionalInstructions:e5,...e6}=eQ;I.B.trackRequestSent(o,{interface:"wizard",streaming:!0,interactionId:e0,inputContent:eQ.input,inputMessage:eQ.topic||eQ.additionalInstructions,inputData:{options:{...eY,theme:eO,imageModelAutoselect:ey},isGenerateV2:!0,isAdvancedMode:eV,generationType:ep,...e6,promptKey:eq,tokenLength:es,docSettings:eJ,modelSize:e$,search:eM,searchInGenerate:ez,reasoningEffort:eX,iconProvider:_.of.get("aiIconProvider")},docId:L.id,docGenerationId:ea,docGenerateInputId:e0});let{stream:e4,cancel:e7}=(0,C.aO)({promptKey:eq,interactionId:e0,variables:{...eQ,docId:L.id,model:eK,reasoningEffort:eX},workspaceId:null==er?void 0:er.id},{streamId:L.id,streamResumingEnabled:ee,retries:3});try{M=await (0,y.Ct)({stream:e4,onCancel:e7,interactionId:e0,options:eY,bufferCards:1,store:o,docId:L.id}).promise}catch(e){throw Y(!1),e}if((0,G.cg)({doc_id:L.id,source:A.ALe.AiGenerated,extra:"v2"}),!l&&eB)await m({workspaceId:null==er?void 0:er.id,docId:L.id,generateVars:eQ,themeId:eO,firstCards:M.cards});else if(l)await $({docId:L.id,site:l,workspaceId:null==er?void 0:er.id,generateVars:eQ,firstCards:M.cards});else{let e=null==a?void 0:a.mobileDocGenerated,t=(0,W.Xb)()&&!e;r("/docs/".concat(L.id,"?source=").concat(E.MH).concat(t?"&isFirstMobileDocGeneration=true":""))}null==t||t()},[o,eo,l,eu,c,Z,J,s,ee,g,n,m,$,t,null==a?void 0:a.mobileDocGenerated,r,em,null==d?void 0:d.id,et,ei,ec]),isGenerating:Q}},el=e=>{let{textMode:t,generationType:a,format:n,language:r,cardContentType:i}=e;if("code"===i)return"GenerateDeckCodeCards";if("image"===i)return"GenerateDeckImageCards";if("preserve"===t)return _.of.get("generateDeckPreserveBasePrompt");let s=_.of.get("generateDeckBasePrompt");return"GenerateDeckLoose"!==s||"deck"===n&&"generate"===a&&r.startsWith("English")?s:"GenerateDeck1.5"},ed=()=>({promptKey:_.of.get("generateDeckPrompt")});var ec=a(12910);let eu=(0,u.memo)(e=>{var t;let{children:a,onClick:g,visualsMenuEnabled:v,...f}=e,{onGenerateSuccess:b}=(0,m._2)(),j=(0,r.d)(),{user:w}=(0,x.ur)(),{isGenerating:k,generate:y}=eo({onSuccess:b,options:{mobileDocGenerated:null==w||null==(t=w.settings)?void 0:t.mobileDocGenerated,visualsMenuEnabled:v}}),{canGenerate:C,cantGenerateReason:I}=(0,ec.w)(),S=(0,u.useCallback)(async()=>{null==g||g();try{await y()}catch(e){console.error("Error generating doc",e),j({title:c.Ru._({id:"lVr0qD"}),description:c.Ru._({id:"P+gnB7"}),status:"error",duration:5e3,isClosable:!0})}},[g,y,j]),E=(0,h.tO)(S,"generateV2",p.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2);return(0,n.jsx)(d.Tz,{label:I,isDisabled:C,children:(0,n.jsx)(i.s,{flex:"1",alignSelf:"stretch",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",children:(0,n.jsx)(s.$,{leftIcon:(0,n.jsx)(l.g,{icon:o.p7g}),variant:"solid",isLoading:k,loadingText:c.Ru._({id:"NOdFZR"}),isDisabled:k||!C,onClick:E,size:{base:"md",lg:"lg"},...f,children:a})})})});eu.displayName="GenerateButton"},62864:(e,t,a)=>{a.d(t,{F:()=>S,H:()=>E});var n=a(6029),r=a(61204),i=a(16936),s=a(49611),o=a(58959),l=a(48810),d=a(26420),c=a(78140),u=a(36999),m=a(12514),h=a(41283),p=a(37930),x=a(48478),g=a(99492),v=a(48621),f=a(47412),b=a(19564),j=a(77650),w=a(55729),k=a(89528),y=a(74003),C=a(95889),I=a(3487);let S=(0,w.memo)(e=>{let{onIncrement:t,onDecrement:a,maxCards:c,cardCount:u,...m}=e,h={boxShadow:"sm",bg:"white"};return(0,n.jsxs)(r.e,{isAttached:!0,flex:"1",...m,children:[null!=u&&(0,n.jsx)(i.K,{display:"flex",onClick:a,icon:(0,n.jsx)(v.g,{icon:g.EZy}),"aria-label":j.Ru._({id:"MrRUp2"}),width:2,...h}),(0,n.jsx)(s.$,{flex:"1",...h,_hover:{color:"inherit"},cursor:"default",children:(0,n.jsx)(f.Tz,{label:(0,n.jsx)(b.x6,{id:"ukrE78"}),placement:"top",children:(0,n.jsx)(o.z,{spacing:1,cursor:"help",children:(0,n.jsxs)(l.E,{children:[(0,n.jsx)(d.a,{as:"span",css:{fontVariantNumeric:"tabular-nums"},children:u})," ",(0,n.jsx)(b.x6,{id:"MU+gFM",values:{0:null!=u?u:0}})]})})})}),null!=u&&(0,n.jsx)(i.K,{display:"flex",onClick:t,icon:(0,n.jsx)(v.g,{icon:g.QLR}),"aria-label":j.Ru._({id:"sFY+gw"}),width:2,isDisabled:u>=c,...h})]})});S.displayName="CardCountStepper";let E=(0,w.memo)(e=>{let{hint:t,cardCount:a,maxCards:r,onChange:i}=e,{openUpsellModal:d}=(0,y.I)(),f=(0,w.useMemo)(()=>[...Array(r)],[r]),j=(0,w.useMemo)(()=>[15,20,25,30,40,50].filter(e=>e>r),[r]),S=()=>{d({segmentEvent:C.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER})};return(0,n.jsxs)(c.W,{isLazy:!0,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right-start","right-end","right"]}}],children:[(0,n.jsx)(u.I,{size:"sm",boxShadow:"none",minW:"32",textAlign:"left",as:s.$,rightIcon:(0,n.jsx)(v.g,{size:"xs",icon:g.Jt$}),children:(0,n.jsx)(b.x6,{id:"fFAIng",values:{0:null!=a?a:0}})}),(0,n.jsx)(m.Z,{children:(0,n.jsx)(h.c,{zIndex:"tooltip",maxH:"90vh",overflow:"auto",children:(0,n.jsxs)(p.i,{maxW:"200px",title:t,onChange:e=>{let t=Number(e);if(t>r)return void S();i(t)},value:"".concat(a),children:[f.map((e,t)=>{let a=t+1;return(0,n.jsx)(x.k,{value:"".concat(a),children:(0,n.jsx)(b.x6,{id:"bM4Wv5",values:{count:a}})},a)}),j.map(e=>(0,n.jsx)(x.k,{bg:"trueblue.50",border:"1px solid white",_hover:{bg:"trueblue.50",borderColor:"trueblue.200"},value:"".concat(e),children:(0,n.jsxs)(o.z,{spacing:"3",children:[(0,n.jsx)(l.E,{w:"100%",children:(0,n.jsx)(b.x6,{id:"bM4Wv5",values:{count:e}})}),e>r&&(0,n.jsx)(k.zL,{product:e<=I.ST?"plus":"pro"})]})},e))]})})})]})});E.displayName="CardCountDropdown"},63470:(e,t,a)=>{a.d(t,{I:()=>k});var n=a(6029),r=a(26385),i=a(40452),s=a(58959),o=a(83370),l=a(19783),d=a(15342),c=a(37605),u=a(48810),m=a(47412),h=a(19564),p=a(55729),x=a(62864),g=a(62522),v=a(70557),f=a(3487);let b=(0,p.memo)(e=>{let{...t}=e,a=(0,d.GV)(o.yR),[i,s]=(0,v.R7)("numCards"),{maxCards:l}=(0,f.Zq)(),c=(0,p.useCallback)(()=>{if(!a)return;let e=a>=g.BO&&a%g.pn==0?g.pn:1;s(Math.min(a+e,l))},[a,s,l]),b=(0,p.useCallback)(()=>{if(!a||1===a)return;let e=a>=g.BO+g.pn&&a%g.pn==0?g.pn:1;s(Math.max(a-e,1))},[a,s]),[j]=(0,v.R7)("editorMode"),w=a>l,k=Math.min(a,l);return"structured"===j?(0,n.jsx)(m.Tz,{label:(0,n.jsx)(h.x6,{id:"Zne1Sw"}),placement:"top",children:(0,n.jsxs)(r.B,{spacing:{base:.5,sm:2},flex:"1",justifyContent:"center",alignItems:"center",direction:{base:"column-reverse",sm:"row"},children:[(0,n.jsx)(u.E,{cursor:"help",fontSize:w?"xs":"lg",fontWeight:w?void 0:"600",textDecoration:w?"line-through":void 0,color:w?"gray.500":void 0,css:{textWrap:"nowrap"},textAlign:"center",children:(0,n.jsx)(h.x6,{id:"AZLIlg",values:{cardCount:a}})}),w&&(0,n.jsx)(u.E,{fontSize:{base:"md",sm:"lg"},fontWeight:"600",lineHeight:"1",children:(0,n.jsx)(h.x6,{id:"gcpsjO",values:{adjustedCardCount:k}})})]})}):(0,n.jsx)(x.F,{maxCards:l,cardCount:a,onIncrement:c,onDecrement:b,...t})});b.displayName="CardCountSettings";var j=a(6295),w=a(50278);let k=e=>{let{cta:t}=e,a=(0,d.GV)(o.OM);if((0,d.GV)(o.n7))return null;let u=(0,n.jsx)(l.f,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:c.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"});return(0,n.jsx)(w.A,{children:(0,n.jsxs)(r.B,{w:"100%",direction:{base:"column-reverse",md:"row"},spacing:{base:2,md:4},alignItems:{base:"center",md:"flex-end"},children:[(0,n.jsx)(i.s,{flex:"1",children:u}),(0,n.jsxs)(r.B,{w:"2xl",maxW:"100%",overflow:"hidden",children:[(0,n.jsx)(j.NV,{}),(0,n.jsx)(j.Zy,{}),(0,n.jsx)(j.Kj,{}),(0,n.jsxs)(s.z,{spacing:{base:2,md:3},opacity:a?.75:1,pointerEvents:a?"none":"inherit",cursor:a?"not-allowed":"default",children:[(0,n.jsx)(b,{size:{base:"md",lg:"lg"}}),(0,n.jsx)(i.s,{flex:"1",alignItems:"stretch",flexDirection:"column",children:t})]})]}),(0,n.jsx)(i.s,{flex:"1",display:{base:"none",md:"flex"}})]})})}},73549:(e,t,a)=>{a.d(t,{f6:()=>f,Ct:()=>b,po:()=>v});var n=a(91285),r=a(53907),i=a(74553),s=a(24926),o=a(55452),l=a(83605);class d extends n.Rv{constructor(e,t){super({transform:async(t,a)=>{if("data"!==t.event)return void a.enqueue(t);let{data:n}=t;try{let r;r="GenerateDeckWithLayout"===e.promptKey||"GenerateDeckWithImageRewrite"===e.promptKey?await (0,l.dE)(n):await (0,l.Lm)(n,{...e,cardIndex:this.index,loadImages:!1});let i={index:this.index,cardComplete:!0,content:r,id:r.attrs.id,raw:n};a.enqueue({id:t.id,event:"data",data:i})}catch(t){console.error("[aiHtmlToCard] Skipping card ".concat(this.index," due to error:\n"),t,"\n",n),o.l7("aiHtml",n),o.l7("transformOptions",e),o.Cp(t),s.yf.logger.error("[aiHtmlToCard] Skipping card ${this.index} due to error",{sectionHtml:n,transformOptions:e},t)}this.index++}}),this.index=0,null!=t&&(this.index=t+1)}}let c=e=>{let t=e.match(/(<[^>]+>|<\/[^>]+>)|\S+/g);if(!t)throw Error("Could not parse tokens");return t};class u extends n.Rv{constructor(e){super({transform:async(t,a)=>{if("data"!==t.event)return void a.enqueue(t);let n=t.data,r=performance.now()-this.startTime,i=c(n.raw);e({index:this.index,duration:r,numTokens:i.length}),this.index++,this.startTime=performance.now(),a.enqueue(t)}}),this.index=0,this.startTime=performance.now()}}class m extends n.Rv{constructor(){super({transform:async(e,t)=>{"done"===e.event||"cancel"===e.event?t.enqueue({...e,content:this.content}):(this.content+=e.data.raw||"",t.enqueue(e))}}),this.content=""}}class h extends n.Rv{constructor(){let e=(e,t)=>{for(;;){let a=this._buffer.match(/<section\b[^>]*>(?:(?!<\/?section\b)[\s\S])*<\/section>/i);if(!a)break;let n=a[0],r=a.index;this._buffer=this._buffer.slice(r+n.length);let i=n+"\n\n";e.enqueue({id:t,event:"data",data:i})}};super({transform:async(t,a)=>{if("data"===t.event){if(!t.data)return;this._buffer+=t.data,e(a,t.id);return}this.lastId=t.id,a.enqueue(t)},flush:async t=>{e(t,this.lastId)}}),this._buffer=""}}class p extends n.Rv{constructor(){super({transform:(e,t)=>"done"===e.event?void t.enqueue({id:e.id,event:"done",finishReason:e.data,content:""}):"cancel"===e.event?void t.enqueue({id:e.id,event:"cancel",content:""}):"content"===e.event?void t.enqueue({id:e.id,event:"data",data:e.data}):void console.error("[StreamMessageEventParser] unknown event type",e)})}}var x=a(34630);let g="CANCEL",v=e=>new n.Rv({transform(t,a){e(t),a.enqueue(t)}}),f=e=>{let{stream:t,docId:a,lastCompletedCardId:n,lastCompletedCardIndex:s,interactionId:o,options:l,store:d}=e,[c,u]=j(t,l,s).tee(),m=c.pipeThrough(v(e=>{"done"===e.event&&i.B.trackStreamResponse(d,{interactionId:o,outputContent:e.content})}));(0,x.x_)(m,{}),d.dispatch((0,r.EX)({stream:{id:o,status:"running",stream:u,docId:a,isResuming:!0,lastCompletedCardId:n}}));let h=(0,r.A0)(a)(d.getState());if(!h)throw Error("Expected valid StreamResponse when resuming from stream");return h},b=e=>{let t,{stream:a,onCancel:n,interactionId:s,options:o,bufferCards:l=2,docId:d,store:c}=e,[m,h]=j(a,o).tee(),p=m.pipeThrough(new u(e=>{c.dispatch((0,r.cx)({interactionId:s,data:e}))})).pipeThrough(v(e=>{"done"===e.event&&i.B.trackStreamResponse(c,{interactionId:s,outputContent:e.content})}));c.dispatch((0,r.EX)({stream:{id:s,status:"running",stream:h,isResuming:!1,docId:d}}));let f=new Promise((e,a)=>{t=a;let n=[];(0,x.x_)(p,{onError:e=>{a(e)},onMessage(t){if("done"===t.event)return void e({status:"READY",cards:n});if("data"===t.event){let a=t.data.index+1;n.push(t.data),a>=l&&e({status:"READY",cards:n})}}})}).catch(e=>{if(e===g)return{status:"CANCELED",cards:[]};throw e}),b=!1;return{promise:f,cancel:()=>{b||(console.log("[AIStream] cancelling..."),b=!0,n(),null==t||t(g))}}},j=(e,t,a)=>e.pipeThrough(new p).pipeThrough(new h).pipeThrough(new d(t,a)).pipeThrough(v(e=>{"data"===e.event&&console.log("[AIStream] processed card ".concat(e.data.index+1))})).pipeThrough(new m).pipeThrough(v(e=>{"done"===e.event&&console.log("[AIStream] done (".concat(e.finishReason,")")),"cancel"===e.event&&console.log("[AIStream] cancelled")}))},74553:(e,t,a)=>{a.d(t,{B:()=>o});var n=a(11390),r=a(82927),i=a(17859),s=a(53907);let o={trackRequestSent(e,t){console.log("[AIStream] EVENT: ai.request.sent"),t.product=(0,n.A4)((0,r.vp)()),(0,i.rl)(t);let a=performance.now();e.dispatch((0,s.lC)({...t,startTime:a}))},trackStreamError(e,t){e.dispatch((0,s.Xu)({endTime:performance.now(),interactionId:t.interactionId}));let a=(0,s.U7)(t.interactionId)(e.getState());if(!a)return;let{startTime:n,...r}=a,{errorName:o,errorMessage:l,errorCode:d}=t,c={...r,errorName:o,errorMessage:l,errorCode:d,outputMessage:"",latency:performance.now()-n};console.log("[AIStream] EVENT: ai.request.error"),(0,i.tB)(c)},trackStreamAbort(e,t){let a=(0,s.U7)(t.interactionId)(e.getState());if(!a)return;let{startTime:n,...r}=a,o={...r,abortReason:t.abortReason,timeToAbort:performance.now()-n};console.log("[AIStream] EVENT: ai.request.abort"),(0,i.Hy)(o)},trackStreamStart(e,t){e.dispatch((0,s.o4)(t));let a=(0,s.U7)(t.interactionId)(e.getState());if(!a)return;let{startTime:n,...r}=a,o={...r,timeToStart:performance.now()-n};console.log("[AIStream] EVENT: ai.request.streamStart"),(0,i.xW)(o)},trackStreamResponse(e,t){e.dispatch((0,s.Xu)({endTime:performance.now(),...t}));let a=(0,s.U7)(t.interactionId)(e.getState());if(!a)return;let{startTime:n,...r}=a;console.log("[AIStream] EVENT: ai.request.response"),(0,i.Yh)(r)},trackStreamComplete(e,t,a){let n=(0,s.U7)(t)(e.getState());if(!n)return;let{startTime:r,...o}=n,l={...o,timeToComplete:performance.now()-r,...a};console.log("[AIStream] EVENT: ai.request.complete"),(0,i.UL)(l)}}},79459:(e,t,a)=>{a.d(t,{a:()=>d});var n=a(6029),r=a(26420),i=a(49023),s=a(62452),o=a(72386),l=a(62171);let d=e=>{let{theme:t}=e,a=(0,o.N)(),d=t||a,{isLoadingThemes:c}=(0,i.t)(),u=(0,l.fS)(d),m=(0,s.Mw)(d),h=(0,l.FD)(u,m);return(0,n.jsx)(r.a,{...c?{}:h,w:"100vw",h:"100%",position:"fixed",zIndex:-1,opacity:1,"data-theme-picker-background":!0,transitionProperty:"background-color, background-image",transitionDuration:"1s",inset:"0px"})}}}]);
//# sourceMappingURL=9590-bdcbff69e028600b.js.map