(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5712],{343:(e,i,s)=>{"use strict";s.d(i,{$:()=>u});var t=s(55729),n=s(88586),l=s(56450),r=s(20715),o=s(20925),a=s(51817),d=s(72492),c=s(82927),x=s(53505);let u=()=>{let[e]=(0,n.wdY)(),{user:i}=(0,c.ur)();return(0,t.useCallback)(async s=>{let{title:t,path:c,documentAttributes:u,file:h,source:p,titleEdited:m}=s,j=(0,o.k5)(u),g=(0,d.p0)(j);if(!h)throw Error("Tried to create a page without file");let f=(0,x.X)({path:c,file:h}),{data:b}=await e({variables:{fileId:h.id,title:t,titleEdited:m,path:f,source:p&&l.a[p]||n.ALe.SitesAddPage,initialContent:{ydoc:g,schemaVersion:a.f$,editors:[null==i?void 0:i.id]}}});if(!b)throw Error("Mutation didnt return data");let{createPage:{id:v}}=b;return(0,r.cg)({doc_id:v,source:p||n.ALe.SitesAddPage,channel:null}),{docId:v}},[e,null==i?void 0:i.id])}},2942:(e,i,s)=>{"use strict";s.d(i,{Z0:()=>d,ip:()=>x,mm:()=>c});var t=s(81278),n=s(55729),l=s(15342),r=s(43634),o=s(70006),a=s(81664);let d=(0,n.createContext)({openSiteSettings:e=>{},openSharePanel:(e,i)=>{}}),c=e=>{let{push:i}=(0,t.useRouter)(),s=(0,l.CU)();return(0,n.useMemo)(()=>({openSiteSettings:e=>{a.R.emit("openSiteSettings",e)},openSharePanel:async(t,n)=>{let l=()=>a.R.emit("openSharePanel",n);if(t!==e){let e=(0,o.pF)({docId:t});await i(e);let n=s.subscribe(()=>{(0,r.sX)(s.getState())===t&&(l(),n())})}else l()}}),[e,i,s])},x=()=>(0,n.useContext)(d)},3844:(e,i,s)=>{"use strict";s.d(i,{A:()=>t});let t={src:"/_next/static/media/gamma-logo-profile-image.73d64ea1.png",height:800,width:800,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEX////3/f+64P9Zb47H5v+l1v40VYGOyv/v9/zh8f5uh6d/kKgtSHHD1OjV3OMZMF4dK1tIZYufy/JPealwmsbE0uCXttYFpAwdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPklEQVR4nCXFRxKAMAwEsHVc1g4l9P8/lWHQRSDpJAn344yrOcwi+mMNtYw79ipIztq3FAhW1SnxsfaPqgReR38Br+Tzt/8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},8077:(e,i,s)=>{"use strict";s.d(i,{$:()=>o});var t=s(6029),n=s(58297),l=s(99492),r=s(48621);let o=e=>{let{icon:i,showDisabled:s=!1,size:o=8}=e;return(0,t.jsx)(n.j,{color:"gray.700",textAlign:"center",bg:"gray.200",size:o,opacity:s?.5:1,children:s?(0,t.jsxs)("span",{className:"fa-stack",children:[(0,t.jsx)(r.g,{icon:l.$Dv,className:"fa-stack-1x"}),(0,t.jsx)(r.g,{icon:i,className:"fa-stack-1x"})]}):(0,t.jsx)(r.g,{size:"1x",icon:i})})}},11525:(e,i,s)=>{"use strict";s.d(i,{R:()=>l});var t=s(27229),n=s(55729);let l=()=>{let{isOpen:e,onOpen:i,onClose:s}=(0,t.j)({id:"sharePanelDisclosure"}),[l,r]=(0,n.useState)("invite");return{isSharePanelOpen:e,onSharePanelOpen:i,onSharePanelClose:(0,n.useCallback)(()=>{r("invite"),s()},[s]),view:l,setView:r}}},18351:(e,i,s)=>{"use strict";s.d(i,{k:()=>d});var t=s(6029),n=s(46898),l=s(19564),r=s(55729),o=s(88586),a=s(99038);let d=()=>{let e=(0,n.d)(),[i]=(0,o.Tyr)({refetchQueries:["GetChannelDocActivity","GetChannels"]});return{addDocChannel:(0,r.useCallback)(s=>{let{docId:n,doc:r,channel:d,existingChannels:c=[]}=s,x=n||(null==r?void 0:r.id);if(!x)return void console.error("Invalid docid");let u={input:{docId:x,sharing:[{op:o.wSW.Add,path:"/channels",value:[{channelId:d.id}]}]}},h=(null==r?void 0:r.title)||a.TP,p=[...c,{id:d.id,slug:d.slug,name:d.name,permission:o.aXG.Comment}].sort((e,i)=>e.slug.localeCompare(i.slug,"en"));i({variables:u,update:(e,i)=>{let{data:s}=i;e.writeFragment({id:"Doc:".concat(x),fragment:o.Hr1,data:null==s?void 0:s.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:u.input.docId,channels:p}}}).then(()=>{e({title:(0,t.jsx)(l.x6,{id:"7hDHpt",values:{title:h}}),description:(0,t.jsx)(l.x6,{id:"A2xcFn",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP,0:d.name}}),status:"success",duration:5e3,isClosable:!0,position:"top"})},i=>{e({title:(0,t.jsx)(l.x6,{id:"bLdU0Q",values:{title:h,0:d.name}}),description:i.message,duration:null,status:"error",isClosable:!0,position:"top"})})},[i,e]),removeDocChannel:(0,r.useCallback)((s,n)=>{var r;if(!n)return;let d={input:{docId:s.id,sharing:[{op:o.wSW.Remove,path:"/channels",value:[{channelId:n}]}]}};i({variables:d,update:(e,i)=>{let{data:t}=i;e.writeFragment({id:"Doc:".concat(s.id),fragment:o.e34,data:null==t?void 0:t.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:d.input.docId,channels:null==(r=s.channels)?void 0:r.filter(e=>e.id!==n)}}}).then(()=>{e({title:(0,t.jsx)(l.x6,{id:"qsnpV6",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),status:"success",duration:1e4,position:"top"})}).catch(i=>{e({title:(0,t.jsx)(l.x6,{id:"+yMzgs"}),description:i.message,status:"error",duration:3e3,isClosable:!0,position:"top"}),console.error("[addRemoveDocChannel] Error removing channel:",i.message)})},[i,e])}}},28847:(e,i,s)=>{"use strict";s.d(i,{h:()=>h});var t=s(6029),n=s(46898),l=s(90394),r=s(57405),o=s(36218),a=s(49611),d=s(19564),c=s(55729),x=s(20715);let u="embed-copied-toast",h=e=>{let{embedCode:i,isDisabled:s,docId:h}=e,p=(0,n.d)(),[m,j]=(0,c.useState)(!1),{hasCopied:g,onCopy:f}=(0,l.i)(i),b=(0,c.useRef)(null);(0,c.useEffect)(()=>{b.current&&m&&(b.current.focus(),b.current.select())},[m]);let v=(0,c.useCallback)(()=>j(!0),[]),y=(0,c.useCallback)(()=>j(!1),[]),w=(0,c.useCallback)(()=>{f(),p.isActive(u)||p({id:u,title:(0,t.jsx)(d.x6,{id:"ETv+Uw"}),status:"success",duration:5e3}),(0,x.dd)({docId:h,source:"sharePanel",type:"embed"})},[h,f,p]);return(0,t.jsxs)(r.T,{spacing:4,align:"stretch",children:[(0,t.jsx)(o.T,{ref:b,rows:5,variant:"filled",fontFamily:"mono",colorScheme:"gray",disabled:s,onClick:v,onBlur:y,isReadOnly:!0,resize:"none",pointerEvents:s?"none":void 0,defaultValue:i}),(0,t.jsx)(a.$,{alignSelf:"flex-end",onClick:w,isDisabled:s,size:"sm",...s?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{},children:g?(0,t.jsx)(d.x6,{id:"6V3Ea3"}):(0,t.jsx)(d.x6,{id:"Sx4kHi"})})]})}},38055:(e,i,s)=>{"use strict";s.d(i,{y:()=>t});let t="tour"},40556:(e,i,s)=>{"use strict";s.d(i,{I:()=>u});var t=s(6029),n=s(46898),l=s(48810),r=s(80314),o=s(19564),a=s(55729),d=s(88586),c=s(99038),x=s(82927);let u=e=>{let{refetchQueries:i}=e,{user:s}=(0,x.ur)(),u=(0,n.d)(),[h]=(0,d.fQ5)({refetchQueries:i}),[p,{loading:m}]=(0,d.UpM)({refetchQueries:i}),[j]=(0,d.u6W)({refetchQueries:i}),[g]=(0,d.D7K)({refetchQueries:i}),f=(0,a.useCallback)((e,i)=>()=>{if(!s||!i)return;let t={input:{docId:i.id,userId:null==s?void 0:s.id,favorited:e}};return g({variables:t,update:(e,s)=>{let{data:t}=s;e.writeFragment({id:"Doc:".concat(i.id),fragment:d.pfv,data:{docUser:null==t?void 0:t.updateDocUser}})},optimisticResponse:{updateDocUser:{...i.docUser,favorited:t.input.favorited,__typename:"DocUser"}}})},[g,s]),b=(0,a.useCallback)(e=>{let i={id:e};j({variables:i,optimisticResponse:{unarchiveDoc:{...i,archived:!1,__typename:"Doc"}}}).then(()=>{u({title:(0,t.jsx)(o.x6,{id:"nRyNMz"}),status:"success",duration:1e4,position:"top"})})},[j,u]),v=(0,a.useCallback)(e=>{let i={id:e};h({variables:i,optimisticResponse:{archiveDoc:{...i,archived:!0,__typename:"Doc"}}}).then(()=>{u({title:(0,t.jsxs)(l.E,{children:[(0,t.jsx)(o.x6,{id:"i3Wq9L",values:{GAMMA_ARTIFACT_PROPER_NOUN:c.TP}})," ",(0,t.jsx)(r.N,{textDecoration:"underline",onClick:()=>b(e),children:(0,t.jsx)(o.x6,{id:"9uI/rE"})})]}),status:"success",duration:3e3,position:"top",isClosable:!0})})},[h,b,u]);return{favoriteDoc:f,restoreDoc:b,trashDoc:v,permanentlyDeleteDoc:(0,a.useCallback)(e=>p({variables:{id:e},update:i=>{i.evict({id:i.identify({__typename:"Doc",id:e})}),i.gc()},optimisticResponse:{deleteDoc:e}}).then(()=>{u({title:(0,t.jsx)(o.x6,{id:"sOg7tZ",values:{GAMMA_ARTIFACT_PROPER_NOUN:c.TP}}),position:"top",status:"success",duration:3e3})}).catch(()=>{u({title:(0,t.jsx)(o.x6,{id:"SlfejT"}),description:(0,t.jsx)(o.x6,{id:"fWsBTs"}),status:"error",duration:3e3,position:"top",isClosable:!0})}),[p,u]),isPermanentlyDeletingDoc:m}}},41471:(e,i,s)=>{"use strict";s.d(i,{A:()=>R,L:()=>I});var t=s(6029),n=s(49611),l=s(67909),r=s(36071),o=s(54731),a=s(17920),d=s(26420),c=s(3674),x=s(40691),u=s(26385),h=s(58959),p=s(48810),m=s(2241),j=s(36218),g=s(16426),f=s(81107),b=s(48621),v=s(47412),y=s(19564),w=s(77650),C=s(55729),k=s(60120),S=s(11916),_=s(91792);let I={linkedin:{label:"LinkedIn",cta:()=>w.Ru._({id:"Ck0vYl"}),exportFormat:"pdf",localizedCTA:(0,t.jsx)(y.x6,{id:"Ck0vYl"}),inProgressLabel:(0,t.jsx)(y.x6,{id:"iPHeYN"}),icon:f.IAJ,iconColor:"linkedin.700",maxLength:3e3,thingsToNote:(0,t.jsx)(y.x6,{id:"N/TitX"})}},A=e=>{let{socialPlatform:i,doc:s,message:l,cardRangesInput:r,modalClose:o}=e,{handleExport:a,exportInProgress:d}=(0,S.Up)({doc:s,source:"share_panel",format:I[i].exportFormat,formatLabel:I[i].label,cardRanges:r,socialPlatform:i,socialPost:!0,shareMessage:l});return(0,t.jsxs)(n.$,{w:"100%",variant:"solid",onClick:()=>{a(),setTimeout(()=>{o()},2e3)},isDisabled:d,children:[d&&I[i].inProgressLabel,!d&&I[i].localizedCTA]})},R=e=>{let{socialPlatform:i,isSocialPostModalOpen:s,onSocialPostModalClose:f,cardRangesInput:S,doc:R}=e,[E,T]=(0,C.useState)(""),D=(0,_.rd)(),P=(0,C.useCallback)(e=>{T(e.target.value.substring(0,I[i].maxLength))},[i]),O=R.title;return(0,t.jsx)(v.L8,{isDark:D,children:(0,t.jsxs)(l.aF,{isOpen:s,onClose:f,trapFocus:!0,returnFocusOnClose:!1,size:"xl",children:[(0,t.jsx)(r.m,{}),(0,t.jsxs)(o.$,{children:[(0,t.jsxs)(a.r,{children:[(0,t.jsx)(d.a,{display:"inline-block",me:"2.5",color:I[i].iconColor,children:(0,t.jsx)(b.g,{icon:I[i].icon,size:"lg"})})," ",I[i].localizedCTA]}),(0,t.jsx)(c.s,{}),(0,t.jsx)(x.c,{children:(0,t.jsxs)(u.B,{spacing:2,width:"100%",children:[(0,t.jsxs)(h.z,{alignItems:"center",justifyContent:"space-between",children:[(0,t.jsxs)(p.E,{flex:"1",noOfLines:1,children:[(0,t.jsx)(y.x6,{id:"sNsWEI",values:{docTitle:O}}),S&&(0,t.jsxs)(m.B.span,{color:"gray.600",children:[" ",(0,t.jsx)(y.x6,{id:"gFo4O3",values:{cardRangesInput:S}})]})]}),(0,t.jsx)(k.H,{length:E.length||0,maxLength:I[i].maxLength})]}),(0,t.jsx)(j.T,{height:"10em",placeholder:w.Ru._({id:"p4W7fL"}),value:E,onChange:P}),I[i].thingsToNote&&(0,t.jsx)(p.E,{fontSize:"sm",color:"gray.500",children:I[i].thingsToNote})]})}),(0,t.jsx)(g.j,{pb:"5",children:(0,t.jsx)(n.$,{w:"100%",variant:"solid",children:(0,t.jsx)(A,{doc:R,socialPlatform:i,message:E,cardRangesInput:S,modalClose:f})})})]})]})})}},49405:(e,i,s)=>{"use strict";s.d(i,{Z:()=>j});var t=s(6029),n=s(46898),l=s(19564),r=s(81278),o=s(55729),a=s(88586),d=s(88571),c=s(38055),x=s(95889),u=s(20715),h=s(82927),p=s(51817),m=s(72492);let j=()=>{let[e]=(0,a.aXl)({refetchQueries:["GetDocs"]}),{push:i}=(0,r.useRouter)(),s=(0,n.d)(),{user:j,currentWorkspace:g}=(0,h.ur)(),f=(0,x.st)();return(0,o.useCallback)(async n=>{var r;let{docId:o,docTitle:a,fileId:h,initialContent:b,channelId:v,source:y,openThemeEditor:w,onSuccess:C,newWindow:k,path:S}=n,_=null==j||null==(r=j.settings)?void 0:r.needsEditorOnboarding;if(!o)return Promise.reject(Error("Cannot duplicate without a docId"));let I=s({id:"duplicate-toast-".concat(o),isClosable:!1,position:"top",status:"loading",colorScheme:"gray",duration:null,title:(0,t.jsx)(l.x6,{id:"OvEjsP"})});return j&&(null==g?void 0:g.id)?e({variables:{duplicateDocInput:{orgId:null==g?void 0:g.id,sourceDocId:o,source:d.a[y],fileId:h,path:S,initialContent:b?{ydoc:(0,m.p0)(b),schemaVersion:p.f$,editors:[null==j?void 0:j.id]}:void 0,...v?{channels:[{channelId:v}]}:{}}}}).then(e=>{var n,r,d;if(!(null==e||null==(n=e.data)?void 0:n.duplicateDoc))throw Error("No data received");null==f||f.track(x.VV.EXAMPLE_DUPLICATED,{doc_id:o,title:a,source:y});let h=null==e||null==(d=e.data)||null==(r=d.duplicateDoc)?void 0:r.id;(0,u.cg)({doc_id:h,source:y,source_doc_id:o}),console.debug("[Duplicate.".concat(y,"] Doc duplicated New doc id (").concat(h,"). Navigating to Editor")),s.update(I,{status:"success",description:(0,t.jsx)(l.x6,{id:"zzDlyQ"}),duration:5e3,isClosable:!0});let p=w?"/docs/".concat(h).concat(w?"?openThemeEditor=true":""):_?"/docs/".concat(h,"?").concat(c.y,"=true"):"/docs/".concat(h);k?window.open(p,"_blank"):i(p),C&&h&&C(h)},e=>{console.error("[Duplicate.".concat(y,"] Error duplicating doc:"),e.message),s.update(I,{title:(0,t.jsx)(l.x6,{id:"ADJtFi"}),description:e.message,status:"error",duration:null,isClosable:!0})}).catch(e=>{console.error("[Duplicate.".concat(y,"] Error duplicating doc:"),e.message),s.update(I,{title:(0,t.jsx)(l.x6,{id:"ADJtFi"}),description:e.message,status:"error",duration:null,isClosable:!0})}):(console.error("[Duplicate.".concat(y,"] Cannot duplicate without a user or workspace"),{user:j}),Promise.reject(Error("Cannot duplicate without a user or workspace")))},[null==g?void 0:g.id,j,s,e,f,i])}},53505:(e,i,s)=>{"use strict";s.d(i,{X:()=>l});var t=s(76644);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=e.replaceAll(/\s|\\|\./g,"-").replaceAll(/-+/g,"-").replaceAll(/[/-]{2,}/g,"/").replaceAll(/(^[/-])|([/-]$)/g,"");return"/".concat(i)},l=e=>{var i;let{docId:s,path:l,file:r}=e,o=n(l),a=null!=(i=r.pages)?i:[];if(!a.find(e=>e.id!==s&&e.path===o))return o;let{prefix:d,count:c}=(0,t.B)(o),x=null===c?1:c;return a.forEach(e=>{if(!e.path||e.path.slice(0,d.length)!==d)return;let{count:i}=(0,t.B)(e.path);i&&i>=x&&(x=i+1)}),"".concat(d,"-").concat(x)}},53932:(e,i,s)=>{"use strict";s.d(i,{I:()=>g,O:()=>f});var t=s(6029),n=s(49611),l=s(26420),r=s(27229),o=s(58959),a=s(48810),d=s(48621),c=s(77650),x=s(55729),u=s(88586),h=s(14322),p=s(70006),m=s(41471);let j=e=>{let{label:i,ariaLabel:s,icon:r,iconColor:o,isLoading:a,handler:c}=e;return(0,t.jsx)(n.$,{variant:"plain",size:"md","aria-label":s,onClick:c,leftIcon:(0,t.jsx)(l.a,{color:o,children:(0,t.jsx)(d.g,{icon:r})}),boxShadow:"none",isLoading:a,isDisabled:a,_hover:{boxShadow:"md",borderColor:o},children:i})},g=()=>new BroadcastChannel("social_post"),f=e=>{var i;let{doc:s,exportMode:n,cardRangesInput:l}=e,{isOpen:d,onOpen:f,onClose:b}=(0,r.j)({id:"linkedin-post-modal"}),{data:v,loading:y}=(0,u.kvr)(),w=null==v||null==(i=v.userIntegrations)?void 0:i.integrations;return(0,x.useEffect)(()=>g().addEventListener("message",e=>{"true"===e.data.success&&"linkedin"===e.data.platform&&f()}),[f]),(0,t.jsxs)(o.z,{children:[(0,t.jsx)(j,{label:(0,t.jsx)(a.E,{children:m.L.linkedin.label}),isLoading:y,ariaLabel:m.L.linkedin.cta(),icon:m.L.linkedin.icon,iconColor:m.L.linkedin.iconColor,handler:()=>(null==w?void 0:w.includes(u.n30.Linkedin))?f():(0,h.GE)({url:(0,p.n$)(),title:c.Ru._({id:"Abf1Uw"}),w:800,h:600})}),d&&(0,t.jsx)(m.A,{isSocialPostModalOpen:d,onSocialPostModalClose:b,socialPlatform:"linkedin",cardRangesInput:"all"===n?"":l,doc:s})]})}},55252:(e,i,s)=>{"use strict";s.d(i,{U:()=>v});var t=s(74171),n=s(58495),l=s(81278),r=s(55729),o=s(88586),a=s(68301),d=s(343),c=s(58809),x=s(15342),u=s(20715),h=s(20925),p=s(8139),m=s(51817),j=s(49405),g=s(72492),f=s(42721),b=s(70006);let v=()=>{let e=(0,j.Z)(),{user:i,currentWorkspace:s}=(0,f.ur)(),[v]=(0,o.jL_)(),[y]=(0,o.Imo)(),{push:w}=(0,l.useRouter)(),C=(0,d.$)(),k=(0,x.GV)(c.nU),S=(0,a.u)("createFilePage");return(0,r.useCallback)(async l=>{let r,{title:a,path:d,siteId:c,routes:x,sourceDocId:j}=l;if(!d.startsWith("/"))return void console.error("[AddNewPageToSite] Path must start with /. Aborting.",d);if(!(null==s?void 0:s.id)||!c||!x)return;let f={settings:{...p.S9.webpage_fluid.docSettings()},docFlags:{cardLayoutsEnabled:!0},format:"webpage"};if(S&&(null==k?void 0:k.id)&&!j){let{docId:e}=await C({title:a,path:d,documentAttributes:f,file:k}),i=(0,b.pF)({docId:e});return console.debug("[AddPageModal] Doc created. Adding route then navigating to editor",e),await w(i,void 0,{shallow:!0}),e}if(j)await e({docId:j,docTitle:a,source:o.ALe.SitesDuplicatePage,fileId:null==k?void 0:k.id,onSuccess:e=>{r=e},path:d});else{let e=(0,h.k5)(f),t=(0,g.p0)(e),n={title:a,path:d,source:o.ALe.SitesAddPage,initialContent:{ydoc:t,schemaVersion:m.f$,editors:[null==i?void 0:i.id]}},{data:l}=await v({variables:{...n,fileId:null==k?void 0:k.id,workspaceId:null==s?void 0:s.id,orgAccess:o.aXG.Manage,mainPage:"/"===d}});r=null==l?void 0:l.createDoc.id,(0,u.cg)({doc_id:r,source:o.ALe.SitesAddPage,channel:null})}if(!c||!r)return void console.error("[AddPageModal] Site or doc id is undefined. Cannot add route.");let _=e=>y({variables:{input:{siteId:c,docId:r,path:e,offline:!1}},refetchQueries:["GetSite"]});try{await _(d)}catch(e){if(e instanceof t.K&&(0,o.vIB)(e).find(e=>["duplicate_site_path","duplicate_doc_path"].includes(e)))await _("".concat(d,"-").concat((0,n.Ak)(5)));else throw e}let I=(0,b.pF)({docId:r});return console.debug("[AddPageModal] Doc created. Adding route then navigating to editor",r),await w(I,void 0,{shallow:!0}),r},[null==s?void 0:s.id,y,w,e,v,null==i?void 0:i.id,null==k?void 0:k.id,C,S])}},56450:(e,i,s)=>{"use strict";s.d(i,{a:()=>j,m:()=>g});var t=s(6029),n=s(46898),l=s(19564),r=s(81278),o=s(55729),a=s(88586),d=s(38055),c=s(20715),x=s(20925),u=s(8139),h=s(51817),p=s(72492),m=s(82927);let j={example_deck_clone_toast:a.ALe.DuplicateInspiration,import_google_doc:a.ALe.ImportGoogleDoc,import_google_slides:a.ALe.ImportGoogleSlides,import_docx:a.ALe.ImportDocx,import_pptx:a.ALe.ImportPptx,import_webpage:a.ALe.ImportWebpage,import_pdf:a.ALe.ImportPdf,blank:a.ALe.Blank,template_browser:a.ALe.DuplicateTemplate,get_started_modal:a.ALe.Blank,template_modal_griditem:a.ALe.DuplicateTemplate,template_dashboard_griditem:a.ALe.DuplicateTemplate,template_modal_preview:a.ALe.DuplicateTemplate,template_modal_preview_create_theme:a.ALe.DuplicateTemplate,"slash-new":a.ALe.SlashNew,editor_toolbar_doc_menu_duplicate:a.ALe.DuplicateDoc,dashboard_docs_view_duplicate:a.ALe.DuplicateDoc,ai_generated:a.ALe.AiGenerated,ai_generated_advanced:a.ALe.AiGenerated,sites_add_page:a.ALe.SitesAddPage,sites_copy_to_site:a.ALe.SitesCopyToSite,sites_duplicate_page:a.ALe.SitesDuplicatePage,editor_y_doc_too_large_duplicate:a.ALe.DuplicateDoc,file_add_page:a.ALe.SitesAddPage},g=()=>{let{user:e,currentWorkspace:i}=(0,m.ur)(),[s,{data:g,loading:f}]=(0,a.jL_)(),{push:b,replace:v}=(0,r.useRouter)(),y=(0,n.d)();return[(0,o.useCallback)(n=>{var r;let o=null==e||null==(r=e.settings)?void 0:r.needsEditorOnboarding,a=n.source,m=null==n?void 0:n.channelId,g=(null==n?void 0:n.historyFn)==="replace"?v:b;if(!(null==i?void 0:i.id))return void console.error("[createDocAndNavigate] No currentWorkspace found");let f=n.docSettings||u.S9.deck_default.docSettings(),w=n.format||"deck",C=(null==n?void 0:n.document)?n.document:"empty"==(o?"quickstart":"empty")?(0,x.HC)(e,{settings:{...f},format:w}):(0,x.f$)(e,{settings:{...f},format:w}),k=(0,p.p0)(C);return console.debug("[createDocAndNavigate] Creating doc",{document:C,encodedDocument:k}),s({variables:{workspaceId:null==i?void 0:i.id,title:(null==n?void 0:n.title)||"",source:j[n.source],initialContent:{ydoc:k,schemaVersion:h.f$,editors:[null==e?void 0:e.id]},...m?{channels:[{channelId:m}]}:{}}}).then(async e=>{let{data:i}=e;(0,c.cg)({doc_id:null==i?void 0:i.createDoc.id,source:a,channel:m||null,format:w}),console.debug("[createDocAndNavigate] Doc created. Navigating to Editor",null==i?void 0:i.createDoc.id),g("/docs/".concat(null==i?void 0:i.createDoc.id).concat(o?"?".concat(d.y,"=true"):""))}).catch(e=>{console.error("[createDocAndNavigate]",e),y({title:(0,t.jsx)(l.x6,{id:"0jT1fA"}),description:e.message,position:"top",status:"error",isClosable:!0,duration:null})})},[s,null==i?void 0:i.id,b,v,y,e]),{data:g,loading:f}]}},60120:(e,i,s)=>{"use strict";s.d(i,{H:()=>o});var t=s(6029),n=s(48810),l=s(55597),r=s(48621);let o=e=>{let{length:i,idealLength:s,maxLength:o}=e,a=i>=o;return(0,t.jsxs)(n.E,{fontSize:"xs",color:a?"red.400":"gray.500",children:[a&&(0,t.jsx)(r.g,{icon:l.QJT})," ",i,"/",null!=s?s:o]})}},67310:(e,i,s)=>{"use strict";s.d(i,{n:()=>tJ});var t=s(6029),n=s(67909),l=s(36071),r=s(54731),o=s(3674),a=s(47412),d=s(55729),c=s(69768),x=s(22445),u=s(15342),h=s(17920),p=s(40691),m=s(48810),j=s(16426),g=s(61204),f=s(49611),b=s(19564);let v=e=>{let{isOpen:i,onClose:s,onConfirm:a}=e;return(0,t.jsxs)(n.aF,{isOpen:i,onClose:s,children:[(0,t.jsx)(l.m,{}),(0,t.jsxs)(r.$,{children:[(0,t.jsx)(h.r,{children:(0,t.jsx)(b.x6,{id:"sCTlv5"})}),(0,t.jsx)(o.s,{}),(0,t.jsx)(p.c,{children:(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"nvyKWT"})})}),(0,t.jsx)(j.j,{children:(0,t.jsxs)(g.e,{flexWrap:"wrap",gap:"3",justifyContent:"flex-end",spacing:"0",children:[(0,t.jsx)(f.$,{variant:"ghost",onClick:s,children:(0,t.jsx)(b.x6,{id:"4OjqAQ"})}),(0,t.jsx)(f.$,{variant:"hazardous",onClick:a,children:(0,t.jsx)(b.x6,{id:"a7JgI7"})})]})})]})]})};var y=s(91792),w=s(4950),C=s(91264),k=s(72386),S=s(70006),_=s(9620),I=s(40452),A=s(29810),R=s(26385),E=s(26420),T=s(33787),D=s(99492),P=s(48621),O=s(82927),M=s(58959),z=s(27828),F=s(45143);let N=e=>{let{children:i}=e,s=(0,F.h5)({base:"var(--chakra-sizes-sm)",lg:"var(--chakra-sizes-xl)",xl:"var(--chakra-sizes-2xl)","2xl":"var(--chakra-sizes-3xl)"})||"var(--chakra-sizes-md)";return(0,t.jsx)(I.s,{"data-config-pane":!0,direction:"column",height:"100%",w:s,children:i})},L=e=>{let{children:i}=e;return(0,t.jsx)(m.E,{textAlign:"center",w:"100%",fontSize:"lg",fontWeight:"semibold",children:i})},G=e=>{let{children:i,onClick:s,leftIcon:n}=e;return(0,t.jsx)(f.$,{position:"absolute",left:"2",top:"2.5",color:"gray.800",variant:"ghost",onClick:s,leftIcon:(0,t.jsx)(P.g,{icon:n}),children:i})},B=e=>{let{children:i}=e;return(0,t.jsx)(E.a,{children:(0,t.jsx)(M.z,{p:"4",minH:"14",w:"100%",alignItems:"center",justifyContent:"center",children:i})})},U=e=>{let{children:i,stackProps:s}=e;return(0,t.jsx)(E.a,{p:"4",borderTop:"1px solid",borderColor:"gray.200",children:(0,t.jsx)(M.z,{justifyContent:"space-between",position:"relative",...s,children:i})})},W=e=>{let{children:i}=e;return(0,t.jsx)(E.a,{flex:"1",p:4,w:"100%",overflowY:"auto",children:(0,t.jsx)(z.m,{maxW:"container.md",mx:"auto",children:i})})},V=e=>{let{children:i}=e;return(0,t.jsx)(I.s,{direction:"column",height:"100%",flex:1,minW:0,pos:"relative",children:i})};var H=s(34807),X=s(3276),$=s(83004),K=s(95695),J=s(42726),q=s(74127),Q=s(71128);let Z="theme-editor-root",Y=(0,d.memo)(e=>{let{theme:i,setEditor:s}=e,n=(0,d.useMemo)(()=>(0,J.t)(),[]),l=(0,H.A)(K.H4),r=(0,H.A)(Q.OA),o=i?(0,Q.qh)(i,r):null,[a,c]=(0,d.useState)(!1);return((0,d.useEffect)(()=>{if(a)return;let e=setTimeout(()=>{c(!0)},500);return()=>clearTimeout(e)},[a]),a&&i)?(0,t.jsxs)(I.s,{className:Z,css:{"--editor-width":"100%",...o?{"--doc-padding-left":"".concat(o.width+o.paddingX/2,"px")}:{},"--editor-font-size":l,"*":{transitionProperty:"color, background-color, border-color, fill, stroke",transitionDuration:"50ms",transitionTimingFunction:"ease-out"}},overflowY:"scroll",children:[(0,t.jsx)($.mL,{styles:{"#doc-main":{display:"none"}}}),(0,t.jsx)(I.s,{w:"100%","data-testid":"custom-theme-preview-editor",className:"disable-card-size-animations",pointerEvents:"none",children:(0,t.jsx)(q.u,{onCreate:e=>{null==s||s(e.editor)},initialContent:n,theme:i,scrollingParentSelector:".".concat(Z),isInsideDrawer:!0,animationsEnabled:!1})})]}):(0,t.jsx)(I.s,{direction:"column",height:"100%",flex:1,minW:0,w:"100%",align:"center",justify:"center",bg:"gray.50",children:(0,t.jsx)(X.y,{size:"sm"})})});Y.displayName="PreviewPaneEditor";var ee=s(7312);let ei=e=>{let{children:i}=e;return(0,t.jsx)(M.z,{flex:1,spacing:0,h:"100%",divider:(0,t.jsx)(ee.G,{}),children:i})};var es=s(46898),et=s(88586),en=s(95889);let el=e=>{let{onComplete:i,flow:s}=e,[n,{loading:l}]=(0,et.if9)(),[r,{loading:o}]=(0,et.p2Z)(),{currentWorkspace:a}=(0,O.ur)(),c=(0,en.st)(),x=(0,es.d)(),h=(0,d.useCallback)(e=>{let{id:l,...r}=e;return n({variables:{input:r},update:(e,i)=>{let{data:s}=i;(null==s?void 0:s.createTheme)&&e.writeQuery({query:et.a83,variables:{workspaceId:a.id,archived:!1},data:{themes:[s.createTheme]}})},optimisticResponse:{createTheme:{__typename:"Theme",...e,archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(n=>{let{data:l}=n;if(null==l?void 0:l.createTheme){var r;null==c||c.track(en.VV.THEME_CREATED,{theme_id:null==l||null==(r=l.createTheme)?void 0:r.id,type:"new",flow:s}),null==i||i(l.createTheme)}return x({position:"top",title:(0,t.jsx)(b.x6,{id:"c1Vll8",values:{0:e.name}}),status:"success",duration:5e3,isClosable:!0}),w.R.emit("closeThemeConfiguration",{}),null==l?void 0:l.createTheme}).catch(e=>{if(e.graphQLErrors&&e.graphQLErrors.length>0&&"duplicate_theme_name"===e.graphQLErrors[0].code)return void x({position:"top",title:(0,t.jsx)(b.x6,{id:"9RJBro"}),status:"error",duration:5e3,isClosable:!0});x({position:"top",title:(0,t.jsx)(b.x6,{id:"y47vGS"}),status:"error",duration:5e3,isClosable:!0})})},[n,a,x,c,s,i]),p=(0,d.useCallback)(e=>{r({variables:{input:e},update:(e,i)=>{let{data:s}=i;(null==s?void 0:s.updateTheme)&&e.writeQuery({query:et.a83,variables:{workspaceId:a.id,archived:!1},data:{themes:[s.updateTheme]}})},optimisticResponse:{updateTheme:{__typename:"Theme",...e,archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(e=>{let{data:n}=e;if(null==n?void 0:n.updateTheme){var l;null==c||c.track(en.VV.THEME_UPDATED,{theme_id:null==n||null==(l=n.updateTheme)?void 0:l.id,flow:s}),null==i||i(n.updateTheme)}x({position:"top",title:(0,t.jsx)(b.x6,{id:"iZRx4V"}),status:"success",duration:5e3,isClosable:!0}),w.R.emit("closeThemeConfiguration",{})}).catch(e=>{if(e.graphQLErrors&&e.graphQLErrors.length>0&&"duplicate_theme_name"===e.graphQLErrors[0].code)return void x({position:"top",title:(0,t.jsx)(b.x6,{id:"9RJBro"}),status:"error",duration:5e3,isClosable:!0});x({position:"top",title:(0,t.jsx)(b.x6,{id:"y47vGS"}),status:"error",duration:5e3,isClosable:!0})})},[r,a,x,c,s,i]),m=(0,d.useCallback)(()=>{let e=(0,C.s0)(null==a?void 0:a.id)((0,u.KA)().getState());(null==e?void 0:e.id)==="new"?h(e):p(e)},[h,p,null==a?void 0:a.id]);return{createTheme:h,persistTheme:m,isThemeSaving:l||o}},er=e=>{let i=(0,u.jL)();(0,d.useEffect)(()=>(i((0,C.kD)({flow:e})),()=>{i((0,C.kD)({flow:null}))}),[i,e])};var eo=s(92699),ea=s(99038),ed=s(96500),ec=s(53996),ex=s(16491),eu=s(91938),eh=s(95918),ep=s(96259),em=s(69164);let ej=e=>{let i=(0,d.useCallback)(async(i,s)=>{var t;if(s.mimeType!==eh.M.GOOGLE_SLIDES)return;null==(t=e.onImportStarted)||t.call(e,s.id);let n=await (0,em.m)({token:i,fileId:s.id,mimeType:eh.M.PPTX,filename:"".concat(s.name,".pptx")});e.onImportComplete(n)},[e]),{initiateGoogleImport:s}=(0,ep.MB)({onSelect:i,pickers:{docs:!1,slides:!0}});return{initiateGoogleImport:s}};var eg=s(35816),ef=s(27695),eb=s(8859);let ev=()=>{let[e]=(0,et.oF7)();return(0,d.useCallback)(async i=>{var s,t;let{fileUrl:n,interactionId:l}=i;if(!n)throw Error("fileUrl is required");let r=await e({variables:{input:{workspaceId:(0,O.gx)(),fileUrl:n,interactionId:l}}});if(!(null==(s=r.data)?void 0:s.generateImportPptTheme))throw Error("Failed to generate theme");return null==(t=r.data)?void 0:t.generateImportPptTheme},[e])},ey=()=>{let e=(0,u.jL)(),i=(0,en.st)(),s=(0,es.d)(),{fontsMap:n}=(0,y.II)(),l=ev(),r=(0,u.CU)(),o=(0,d.useRef)(null),a=(0,d.useRef)(0),c=(0,d.useCallback)(i=>{a.current=performance.now(),e((0,_.Gh)({fileId:i})),o.current=i},[e]),x=(0,d.useCallback)(async d=>{let c=(0,_.IX)(r.getState());if(o.current!==c||!c)return;let x=r.getState();e((0,_.pr)({inputFile:d}));try{let s=await l({fileUrl:d.fileUrl,interactionId:(0,_.f9)(x)});s&&(e((0,_.o6)({themeSuggestions:s.theme,thumbnails:s.thumbnails,fontsMap:n})),null==i||i.track(en.VV.THEME_IMPORTED,{source:"PptxUpload",latency:performance.now()-a.current,src:d.fileUrl,filename:d.filename}))}catch(i){e((0,_.QJ)()),console.error(i),s({title:(0,t.jsx)(b.x6,{id:"jK6rIX"}),description:i.message,status:"error",duration:null,isClosable:!0,position:"top"})}},[i,e,n,l,s,r]),h=(0,d.useCallback)(s=>{e((0,_.QJ)()),null==i||i.track(en.VV.THEME_IMPORT_FAILED,{source:"PptxUpload",latency:performance.now()-a.current,message:s.message})},[i,e]);(0,d.useCallback)(()=>{e((0,_.QJ)())},[e]);let{uppyInstance:p}=eC({onStarted:c,onComplete:x,onError:h});return(0,t.jsx)(ex.G_,{clientId:eu.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,t.jsxs)(R.B,{children:[(0,t.jsx)(eb.j,{uppyInstance:p}),(0,t.jsxs)(E.a,{position:"relative",py:"3",children:[(0,t.jsx)(ed.c,{}),(0,t.jsx)(ec.R,{bg:"white",px:"4",children:(0,t.jsx)(m.E,{color:"gray.600",children:(0,t.jsx)(b.x6,{id:"BzEFor"})})})]}),(0,t.jsx)(ew,{uppyInstance:p})]})})},ew=e=>{let{uppyInstance:i}=e,[s,n]=(0,d.useState)(!1),{initiateGoogleImport:l}=ej({onImportStarted:(0,d.useCallback)(()=>{n(!0)},[]),onImportComplete:(0,d.useCallback)(async e=>{try{i.addFile({name:e.name,type:e.type,data:e}),await i.upload()}catch(e){}finally{n(!1)}},[i])});return(0,t.jsx)(f.$,{variant:"plain",color:"gray.700",onClick:l,isLoading:s,leftIcon:(0,t.jsx)(T._,{src:eg.A.src,boxSize:4,alt:"Google Drive"}),children:(0,t.jsx)(b.x6,{id:"5nN3Wd"})})},eC=e=>{let i=(0,es.d)();return{uppyInstance:(0,d.useMemo)(()=>(0,ef.ib)().maxNumberOfFiles(1).maxFileSize(0xc800000).orgId((0,O.gx)()).templateId(eu.$.TRANSLOADIT_FILE_TEMPLATE_ID).allowedFileTypes([eh.M.PPTX]).onRestrictionFailed((e,s)=>{i({title:(0,t.jsx)(b.x6,{id:"SlfejT"}),description:(0,t.jsx)(b.x6,{id:"cHJvHu",values:{0:null==e?void 0:e.name}}),status:"error",duration:5e3,isClosable:!0,position:"top"})}).onError(i=>{var s;null==(s=e.onError)||s.call(e,i)}).onFileAdded(i=>{var s;null==(s=e.onStarted)||s.call(e,i.id)}).onTransloaditComplete(i=>{let s=i.results[":original"];if(!s){var t;null==(t=e.onError)||t.call(e,Error("No results for original file"));return}let n={fileUrl:s[0].url,filename:s[0].original_name};e.onComplete(n)}).build(),[])}},ek=(0,d.memo)(()=>(0,t.jsx)(z.m,{p:6,children:(0,t.jsxs)(R.B,{spacing:4,children:[(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"aVYU1Z",values:{GAMMA_PROPER_NOUN:ea.On}})}),(0,t.jsx)(m.E,{fontSize:"sm",color:"gray.600",children:(0,t.jsx)(b.x6,{id:"fLNR+e"})}),(0,t.jsx)(ey,{})]})}));ek.displayName="InitialStep";var eS=s(58297),e_=s(64268),eI=s(83638),eA=s(25223),eR=s(38036),eE=s(80314),eT=s(78140),eD=s(36999),eP=s(41283),eO=s(37930),eM=s(48478),ez=s(6760),eF=s(77650),eN=s(404),eL=s(69413),eG=s(89528),eB=s(89942),eU=s(85443),eW=s(92382),eV=s(90221),eH=s(55597);let eX=e=>{let{label:i,description:s,labelColor:n="black",fontFamily:l,fontStyle:r="normal",fontWeight:o=400}=e,a=(0,t.jsxs)(M.z,{alignItems:"baseline",children:[(0,t.jsx)(E.a,{color:"yellow.400",children:(0,t.jsx)(P.g,{icon:eH.QJT})}),(0,t.jsx)(m.E,{textAlign:"start",color:n,fontWeight:o,fontSize:"lg",fontFamily:l,fontStyle:r,children:i})]});return s?(0,t.jsxs)(E.a,{children:[a,(0,t.jsx)(m.E,{fontSize:"xs",color:"gray.500",children:s})]}):a},e$=e=>{let{value:i,updateValue:s,onFontUploadClick:n,weight:l="regular",defaultFont:r,fonts:o,customFontsEnabled:c=!0,...x}=e,u=(0,d.useRef)(null),[h,p]=(0,d.useState)(""),{workspaceFonts:j,globalFonts:g}=o,v=(0,d.useMemo)(()=>h?j.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())):j,[j,h]),w=(0,d.useMemo)(()=>h?g.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())):g,[g,h]),[C,k,S]=(0,d.useMemo)(()=>{let e=[...j,...g],s=e.find(e=>e.id===i);return[s,(0,eW.vt)(e,i),(0,eW.vt)(e,i,!1)]},[g,j,i]),_=c&&j.filter(e=>!e.archived||e.id===(null==C?void 0:C.id)).length>0,I=!1,A="normal",R="bold"===l?700:400;if(C&&null!==C.workspaceId){I=!0===C.archived;let e=[...C.fontFiles||[]];A=(0,eL.Q3)(e)?"italic":"normal";let i=(0,eL.Eu)(e);R=(0,eL.g9)(i,"bold"===l?700:400)||400}let{currentWorkspace:T}=(0,eU.u)(),{allThemeFonts:O}=(0,y.II)(),M=(0,eB.ez)("custom_fonts",T);return(0,t.jsxs)(eT.W,{matchWidth:!0,isLazy:!0,strategy:"fixed",onClose:()=>p(""),children:[(0,t.jsx)(eD.I,{size:"lg",as:f.$,borderRadius:"md",overflow:"hidden",rightIcon:(0,t.jsx)(P.g,{icon:D.Jt$,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",...x,children:c&&I?(0,t.jsx)(eX,{label:S||"",fontFamily:'"'.concat(k,'"'),labelColor:i?"gray.700":"gray.400",fontStyle:A,fontWeight:R}):(0,t.jsx)(m.E,{textAlign:"start",fontFamily:'"'.concat(k||r,'"'),fontWeight:R,color:i?"gray.700":"gray.400",fontStyle:A,children:S||(0,t.jsx)(b.x6,{id:"Ff/YaY",values:{defaultFont:r,GAMMA_PROPER_NOUN:ea.On}})})}),(0,t.jsxs)(eP.c,{p:0,zIndex:"dropdown",children:[(0,t.jsx)(eV.J,{fonts:O}),(0,t.jsx)(E.a,{p:3,borderBottom:"1px solid",borderColor:"gray.200",children:(0,t.jsx)(eR.p,{placeholder:eF.Ru._({id:"VPp+PK"}),value:h,onChange:e=>p(e.target.value),size:"sm",bg:"white",border:"1px solid",borderColor:"gray.300",_focus:{borderColor:"blue.500",boxShadow:"0 0 0 1px var(--chakra-colors-blue-500)"},_hover:{borderColor:"gray.400"}})}),(0,t.jsx)(E.a,{p:3,ref:u,maxH:"40vh",overflow:"auto",children:(0,t.jsxs)(eO.i,{type:"radio",value:i||"",onChange:e=>s(e||void 0),children:[_&&(0,t.jsx)(a._x,{m:2,children:(0,t.jsx)(b.x6,{id:"syCKVA"})}),_&&v.map(e=>{var s;let n=e.id!==i,r=e.archived&&n,o=(null==(s=e.fontFiles)?void 0:s.length)===0&&n;if(!e.fontFiles||o||r)return null;let a=(0,eL.Q3)(e.fontFiles)?"italic":"normal";return I&&e.id===i?(0,t.jsx)(eM.k,{value:e.id,disabled:!0,children:(0,t.jsx)(eX,{fontFamily:e.name,label:e.name,fontStyle:a,description:(0,t.jsx)(b.x6,{id:"FZBl16"})})},e.id):(0,t.jsx)(eM.k,{value:e.id,children:(0,t.jsx)(m.E,{fontFamily:'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:l,fontStyle:a,children:e.name})},e.id)}),_&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ez.N,{}),(0,t.jsx)(a._x,{m:2,children:(0,t.jsx)(b.x6,{id:"Z/0bkt"})})]}),(0,t.jsx)(eM.k,{value:"",children:(0,t.jsx)(m.E,{fontFamily:r,fontSize:"lg",fontWeight:l,color:"gray.400",children:(0,t.jsx)(b.x6,{id:"WWU1RA",values:{GAMMA_PROPER_NOUN:ea.On}})})}),w&&w.map(e=>(0,t.jsx)(eM.k,{value:e.id,children:(0,t.jsx)(m.E,{fontFamily:(0,eW.rO)(e.id)?'"'.concat(e.id,'"'):'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:l,children:e.name})},e.id))]})}),c&&(0,t.jsx)(eN.N,{label:(0,t.jsx)(b.x6,{id:"vNYIdl"}),leftIcon:(0,t.jsx)(P.g,{icon:D.MNJ,fixedWidth:!0}),badge:M?void 0:(0,t.jsx)(eG.zL,{product:"pro"}),onClick:n,isSticky:!0})]})]})};var eK=s(74771),eJ=s(74907);let eq=e=>{var i,s,n;let{font:l,value:r,defaultWeight:o,updateValue:a,...c}=e,x=(0,d.useCallback)(e=>{let i=Number(e);Number.isNaN(i)||a(i)},[a]),u=(null==r?void 0:r.toString())||"",h=(0,eJ.w)()[o],{weightOptions:p,isDeletedFontWeight:j}=(0,d.useMemo)(()=>{let e=(0,eW.yi)(l),i=void 0!==r&&!e.includes(r);return i&&r?{isDeletedFontWeight:i,weightOptions:[...e,r].sort((e,i)=>e-i)}:{isDeletedFontWeight:i,weightOptions:e}},[l,r]),g=l&&(null==l?void 0:l.workspaceId)!==null,v=g&&(null==(i=l.fontFiles)?void 0:i.length)===0,y=j&&g,w=(0,S.Zi)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(eT.W,{matchWidth:!0,isLazy:!0,strategy:"fixed",children:[(0,t.jsx)(eD.I,{size:"lg",as:f.$,borderRadius:"md",rightIcon:(0,t.jsx)(P.g,{icon:D.Jt$,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",isDisabled:p.length<=1,...c,children:j?(0,t.jsx)(eX,{label:v?(0,t.jsx)(b.x6,{id:"EqUVJs"}):null!=(s=(0,eJ.w)()[u])?s:h,labelColor:r?"gray.700":"gray.400"}):(0,t.jsx)(m.E,{textAlign:"start",color:r?"gray.700":"gray.400",fontWeight:400,children:null!=(n=(0,eJ.w)()[u])?n:h})}),(0,t.jsx)(eP.c,{maxH:"320px",overflow:"auto",zIndex:"dropdown",children:(0,t.jsx)(eO.i,{type:"radio",value:u,onChange:x,children:p.map(e=>{var i,s;return j&&r===e?(0,t.jsx)(eM.k,{value:e.toString(),disabled:!0,children:(0,t.jsx)(eX,{label:null!=(i=(0,eJ.w)()[e])?i:h,description:y?(0,t.jsx)(b.x6,{id:"KFmni+"}):(0,t.jsx)(b.x6,{id:"mGTUJj"})})},e):(0,t.jsx)(eM.k,{value:e.toString(),children:(0,t.jsx)(m.E,{fontSize:"lg",children:null!=(s=(0,eJ.w)()[e])?s:h})},e)})})})]}),y&&(0,t.jsx)(m.E,{fontSize:"xs",mt:1.5,children:(0,t.jsxs)(eE.N,{href:w,textDecoration:"underline",isExternal:!0,children:[(0,t.jsx)(b.x6,{id:"RUO69p"}),(0,t.jsx)(eK.p,{ms:1})]})})]})};var eQ=s(57405),eZ=s(87996),eY=s(59230),e0=s(21982),e1=s(43634),e6=s(80180),e5=s(60908);let e2=e=>{let{value:i,updateValue:s,onLogoUploadStart:n,onLogoUploadFail:l}=e,[r,o]=(0,d.useState)(null),[a,c]=(0,d.useState)(null),x=(0,u.GV)(e1.aQ),{currentWorkspace:h}=(0,O.ur)(),p=x||(null==h?void 0:h.id);return p?i||a?(0,t.jsxs)(eQ.T,{align:"flex-start",spacing:4,children:[(0,t.jsxs)(E.a,{position:"relative",w:"100%",background:"gray.50",p:2,children:["placeholder"==a?(0,t.jsx)(e0.Pf,{w:"100%",height:"200px"}):(0,t.jsx)(T._,{w:"100%",src:i||a||void 0,alt:"",onMouseDown:e6.Fw}),r==eY.A.Uploading&&(0,t.jsx)(e0.Td,{}),r==eY.A.Error&&(0,t.jsx)(e0.Hy,{})]}),(0,t.jsx)(f.$,{onClick:()=>{s(null),o(null)},mt:2,w:"100%",children:(0,t.jsx)(b.x6,{id:"VlT9ID"})})]}):(0,t.jsx)(eZ.Zc,{orgId:p,uploadType:"image",editType:"icon",dropHereText:eF.Ru._({id:"cmRkd1",values:{0:"%{browse}"}}),customHeight:"250px",customFontSize:"sm",onUploadStart:e=>{let{file:i,tempUrl:s}=e;o(eY.A.Uploading),n&&n(),i.type&&(0,e5.aI)(i.type)?c("placeholder"):c(s)},onUploadSuccess:e=>{o(eY.A.Done),s(e),c(null)},onUploadFailed:e=>{o(eY.A.Error),l&&l()}}):null};var e4=s(26779),e3=s(62452),e8=s(16595),e9=s(56143);let e7=()=>{let e=(0,en.st)(),i=(0,u.GV)(_.f9),s=(0,d.useCallback)(s=>{null==e||e.track(en.VV.THEME_RATED,{rating:s,method:"import",interactionId:i})},[e,i]),n=(0,d.useCallback)((s,t,n)=>{null==e||e.track(en.VV.THEME_FEEDBACK,{feedback:t,tags:n,rating:s,method:"import",interactionId:i})},[e,i]);return(0,t.jsx)(e9.No,{feedbackTags:ie,trackRating:s,trackFeedback:n})},ie=[{key:"wrong-colors",label:(0,t.jsx)(b.x6,{id:"VqNHwM"})},{key:"wrong-fonts",label:(0,t.jsx)(b.x6,{id:"zwod6v"})},{key:"missing-logo",label:(0,t.jsx)(b.x6,{id:"HRiDli"})},{key:"not-enough-options",label:(0,t.jsx)(b.x6,{id:"XsRFrT"})},{key:"other",label:(0,t.jsx)(b.x6,{id:"/IX/7x"})}],ii=e=>{let{children:i}=e;return(0,t.jsx)(m.E,{fontSize:"md",fontWeight:"semibold",color:"gray.600",children:i})},is="200px",it=e=>{var i;let{color:s,isSelected:n,onClick:l}=e;return(0,t.jsx)(a.Tz,{label:(0,t.jsxs)(R.B,{spacing:"0",children:[(0,t.jsx)(m.E,{textAlign:"center",fontSize:"xs",color:"gray.200",children:(0,t.jsx)(b.x6,{id:"nyQWMb"})}),(0,t.jsx)(m.E,{textAlign:"center",children:null==(i=s.color)?void 0:i.toUpperCase()})]}),placement:"top",children:(0,t.jsx)(eS.j,{transitionProperty:"background",transitionDuration:"normal",size:"9",cursor:"pointer",_hover:{bg:n?"trueblue.200":"gray.50"},bg:n?"trueblue.200":"white",onClick:l,children:(0,t.jsx)(eS.j,{size:"7",bg:s.color,border:"1px solid",borderColor:n?"transparent":"gray.300"})})})},il=e=>{let{logo:i,onClick:s,isSelected:n}=e;return(0,t.jsx)(E.a,{py:1,px:1,as:"button",borderRadius:"md",boxShadow:"sm",bg:"gray.50",onClick:s,cursor:n?"default":"pointer",border:"3px solid",borderColor:n?"trueblue.200":"transparent","aria-pressed":n,"aria-label":"Select logo ".concat(i.url),tabIndex:0,_hover:{border:"3px solid",borderColor:"trueblue.200"},children:(0,t.jsx)(T._,{src:i.url,maxHeight:"40px",draggable:!1,width:"auto",marginRight:"2"})},i.url)},ir=()=>{let{globalFonts:e,workspaceFonts:i,fontsMap:s}=(0,y.II)(),n=(0,u.GV)(_.ly),l=(0,u.jL)(),r=(0,d.useCallback)(e=>{l((0,_.qv)({name:e.target.value}))},[l]),o=(0,d.useCallback)(e=>{l((0,_.hi)({color:e}))},[l]),a=(0,d.useCallback)(e=>{l((0,_.fB)({color:e}))},[l]),c=(0,e3.VH)(n),x=(0,u.GV)(_.O5),h=(0,u.GV)(_.Ob),p=(0,e3.fQ)(n),j=(0,u.GV)(_.Yd),g=(0,u.GV)(_.wd),f=(0,e3.Lz)(n),v=(0,u.GV)(_.sY),w=(0,e3.Tn)(n),C=(0,e3.H7)(n),k=(0,u.GV)(_.OH),{suggestedBodyFont:T,suggestedHeadingFont:D}=(0,u.GV)(_.gi),P=s[n.bodyFont||K.z8.bodyFont]||s[K.z8.bodyFont],O=s[n.headingFont||K.z8.headingFont]||s[K.z8.headingFont],F=(0,u.GV)(_.Hs),N=(0,d.useCallback)(e=>{l((0,_.ds)({color:e}))},[l]),L=(0,d.useCallback)(()=>{let e=(0,S.Zi)();window.open(e,"_blank")},[]),G=(0,d.useCallback)(e=>{l((0,_.Fl)({font:e,fontsMap:s}))},[l,s]),B=(0,d.useCallback)(e=>{l((0,_.zs)({weight:e}))},[l]),U=(0,d.useCallback)(e=>{l((0,_.lc)({font:e,fontsMap:s}))},[l,s]),W=(0,d.useCallback)(e=>{l((0,_.lm)({weight:e}))},[l]),V=(0,d.useCallback)(e=>{l((0,_.jY)({color:e}))},[l]),H=(0,d.useCallback)(e=>{l((0,_.do)({color:e}))},[l]),X=(0,d.useCallback)(e=>{l((0,_.uQ)({logo:e}))},[l]),$=(0,d.useMemo)(()=>({globalFonts:e,workspaceFonts:i}),[e,i]);return(0,t.jsxs)(z.m,{children:[(0,t.jsx)(R.B,{p:6,spacing:"5",pt:"0",w:"100%",children:(0,t.jsx)(e_.F,{colorScheme:"gray",children:(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"ISK5qv",components:{0:(0,t.jsx)("span",{role:"img","aria-label":"thumbs up"})}})})})}),(0,t.jsxs)(R.B,{spacing:8,children:[(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(ii,{children:(0,t.jsx)(b.x6,{id:"HZ7fEu"})})}),(0,t.jsx)(eR.p,{type:"text",value:n.name,onChange:r})]}),(0,t.jsxs)(R.B,{spacing:2,children:[(0,t.jsx)(ii,{children:(0,t.jsx)(b.x6,{id:"1HfW/F"})}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"Udsgl4"})}),(0,t.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,t.jsx)(E.a,{w:is,children:(0,t.jsx)(e4.Wv,{theme:n,color:c,updateColor:N,palette:"none"})}),(0,t.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:x.map(e=>(0,t.jsx)(it,{color:e,isSelected:(0,e3.Gw)(c,e),onClick:()=>{N(e)}},e.color))})]})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"ihFuMH"})}),(0,t.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,t.jsx)(E.a,{width:is,children:(0,t.jsx)(e4.a9,{color:w,theme:n,updateColor:o,palette:"none"})}),(0,t.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:h.map(e=>(0,t.jsx)(it,{color:e,isSelected:(0,e3.Gw)(w,e),onClick:()=>{o(e)}},e.color))})]})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"ErggF8"})}),(0,t.jsxs)(I.s,{direction:"row",justify:"space-between",w:"100%",children:[(0,t.jsx)(E.a,{width:is,children:(0,t.jsx)(e4.a9,{color:C,theme:n,updateColor:a,palette:"none"})}),(0,t.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:k.map(e=>(0,t.jsx)(it,{color:e,isSelected:(0,e3.Gw)(C,e),onClick:()=>{a(e)}},e.color))})]})]})]}),(0,t.jsxs)(R.B,{spacing:2,children:[(0,t.jsx)(ii,{children:(0,t.jsx)(b.x6,{id:"7OvVwW"})}),D&&D.suggested===n.headingFont&&D.suggested!==D.original&&(0,t.jsxs)(m.E,{fontSize:"xs",color:"gray.600",children:[(0,t.jsx)("span",{role:"img","aria-label":"warning",children:"⚠️"})," ","We substituted ",D.suggested," for"," ",D.original,". You can"," ",(0,t.jsx)(eE.N,{href:(0,S.Zi)(),isExternal:!0,children:"upload"})," ",D.original," later."]}),(0,t.jsx)(e$,{fonts:$,value:n.headingFont,updateValue:G,onFontUploadClick:L,weight:"bold",defaultFont:K.z8.headingFont,"data-testid":"theme-importer-heading-font-picker",my:0}),(0,t.jsx)(eq,{font:O,value:n.headingFontWeight,defaultWeight:700,updateValue:B,my:0}),(0,t.jsxs)(M.z,{children:[(0,t.jsx)(E.a,{width:is,children:(0,t.jsx)(e4.Wv,{color:f,theme:n,updateColor:H,palette:"accent"})}),(0,t.jsx)(A.h,{}),(0,t.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:v.map(e=>(0,t.jsx)(it,{color:e,isSelected:(0,e3.Gw)(f,e),onClick:()=>{H(e)}},e.color))})]})]}),(0,t.jsxs)(R.B,{spacing:2,children:[(0,t.jsx)(ii,{children:(0,t.jsx)(b.x6,{id:"B4QCf7"})}),T&&T.suggested===n.bodyFont&&T.suggested!==T.original&&(0,t.jsxs)(m.E,{fontSize:"xs",color:"gray.600",children:[(0,t.jsx)("span",{role:"img","aria-label":"warning",children:"⚠️"})," ","We substituted ",T.suggested," for"," ",T.original,". You can"," ",(0,t.jsx)(eE.N,{href:(0,S.Zi)(),isExternal:!0,children:"upload"})," ",T.original," later."]}),(0,t.jsx)(e$,{fonts:$,value:n.bodyFont,updateValue:U,onFontUploadClick:L,weight:"bold",defaultFont:K.z8.bodyFont,"data-testid":"theme-importer-body-font-picker",my:0}),(0,t.jsx)(eq,{font:P,value:n.bodyFontWeight,defaultWeight:400,updateValue:W,my:0}),(0,t.jsxs)(M.z,{children:[(0,t.jsx)(E.a,{width:is,children:(0,t.jsx)(e4.a9,{color:p,theme:n,updateColor:V,palette:"accent"})}),(0,t.jsx)(A.h,{}),(0,t.jsx)(R.B,{direction:"row",spacing:0,ml:2,children:j.map(e=>(0,t.jsx)(it,{color:e,isSelected:(0,e3.Gw)(p,e),onClick:()=>{V(e)}},e.color))})]})]}),(0,t.jsxs)(R.B,{spacing:2,children:[(0,t.jsx)(ii,{children:(0,t.jsx)(b.x6,{id:"iG7KNr"})}),g.length>0&&(0,t.jsx)(M.z,{alignItems:"start",spacing:2,justifyContent:"start",role:"group","aria-label":"Logo selection",children:g.map(e=>(0,t.jsx)(il,{logo:e,onClick:()=>X(e),isSelected:F===e.url},e.url))}),(0,t.jsx)(E.a,{maxW:"min(100%, 300px)",children:(0,t.jsx)(e2,{value:F,onLogoUploadStart:()=>{l((0,_.QZ)())},updateValue:e=>{if(!e)return void l((0,_.Zw)());l((0,_.$k)({logoImage:(0,e8.yK)({result:e,isError:!1})}))},onLogoUploadFail:()=>{l((0,_.UY)())}})})]}),(0,t.jsx)(e7,{})]})]})};var io=s(65092),ia=s(91613),id=s(78801),ic=s(62070),ix=s(61461),iu=s(13271),ih=s(77940),ip=s(90211);let im=()=>[{title:(0,t.jsx)(b.x6,{id:"bGa3Fk"}),duration:1e3},{title:(0,t.jsx)(b.x6,{id:"a+mYi4"}),duration:1e3},{title:(0,t.jsx)(b.x6,{id:"Zc41Kf"}),duration:1e3},{title:(0,t.jsx)(b.x6,{id:"DaFziV"}),duration:null}],ij=()=>{let e=(0,u.GV)(_.Cq),i=im(),[s,n]=(0,d.useState)(0);(0,d.useEffect)(()=>{"parsing"===e&&s<i.length-1&&setTimeout(()=>{n(s+1)},5e3)},[s,i.length,e]);let l=(0,u.jL)(),r=(0,es.d)(),o=(0,d.useCallback)(()=>{l((0,_.QJ)()),r({title:(0,t.jsx)(b.x6,{id:"GfnBRU"}),status:"info",isClosable:!0,position:"top"})},[l,r]);return(0,t.jsxs)(R.B,{p:6,spacing:"8",pt:"0",children:[(0,t.jsx)(e_.F,{colorScheme:"gray",children:(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"olO1VR"})})}),(0,t.jsx)(io.C,{index:s,orientation:"vertical",height:"400px",gap:"0",children:i.map((e,i)=>(0,t.jsxs)(ia.p,{children:[(0,t.jsxs)(M.z,{alignItems:"top",children:[(0,t.jsx)(id.S,{children:(0,t.jsx)(ic.x,{complete:(0,t.jsx)(ix.W,{}),incomplete:(0,t.jsx)(iu.Q,{}),active:(0,t.jsx)(iu.Q,{})})}),(0,t.jsx)(ih.J,{style:{paddingTop:4},children:(0,t.jsxs)(M.z,{children:[(0,t.jsx)(m.E,{maxW:"100%",children:e.title})," ",s===i&&(0,t.jsx)(X.y,{size:"sm",color:"trueblue.400"})]})})]}),(0,t.jsx)(ip.m,{})]},i))}),(0,t.jsx)(f.$,{onClick:o,variant:"hazardous",children:(0,t.jsx)(b.x6,{id:"dEgA5A"})})]})},ig=(0,d.memo)(e=>{let{onTabChange:i,currentTab:s}=e;return(0,t.jsxs)(g.e,{p:2,position:"absolute",top:"3",insetInlineStart:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",boxShadow:"md",children:[(0,t.jsx)(f.$,{borderRadius:"md",bg:"thumbnails"===s?"trueblue.50":"transparent",color:"thumbnails"===s?"trueblue.500":"gray.600",onClick:()=>{i("thumbnails")},children:(0,t.jsx)(b.x6,{id:"l3s5ri"})}),(0,t.jsx)(f.$,{borderRadius:"md",bg:"editor"===s?"trueblue.50":"transparent",color:"editor"===s?"trueblue.500":"gray.600",onClick:()=>{i("editor")},children:(0,t.jsx)(b.x6,{id:"FEr96N"})})]})});ig.displayName="PreviewTabSwitcher";let ib=()=>{let{currentWorkspace:e}=(0,O.ur)(),i=null==e?void 0:e.id,s=(0,u.jL)(),{createTheme:n,isThemeSaving:l}=el({flow:"import"});er("import");let r=(0,u.GV)(_.ly),o=(0,u.GV)(_.jp),c=(0,u.GV)(_.D6),x=(0,u.GV)(_.hB),h=(0,u.GV)((0,_.JH)(i)),[p,m]=(0,d.useState)("thumbnails");(0,d.useEffect)(()=>{"reviewStep"===x&&m("editor")},[x]),(0,d.useEffect)(()=>()=>{s((0,_.QJ)())},[s]);let j=!h.name,v=(0,d.useCallback)(async()=>{n(h)},[n,h]),y=(0,d.useCallback)(async()=>{let e=await n(h);e&&(0,eo.vd)({theme:e})},[n,h]),C=(0,d.useCallback)(()=>{m("thumbnails"),s((0,_.QJ)())},[s]);return(0,t.jsxs)(ei,{children:[(0,t.jsx)(N,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(B,{children:["initialStep"===x&&(0,t.jsx)(G,{leftIcon:D.CeG,onClick:()=>{w.R.emit("setThemeConfigurationView",{view:"splash"})},children:(0,t.jsx)(b.x6,{id:"ydzS9x"})}),(0,t.jsx)(L,{children:(0,t.jsx)(b.x6,{id:"l3s5ri"})})]}),(0,t.jsxs)(W,{children:["initialStep"===x&&(0,t.jsx)(ek,{}),"uploadStep"===x&&(0,t.jsx)(ij,{}),"reviewStep"===x&&(0,t.jsx)(ir,{})]}),"reviewStep"===x&&(0,t.jsx)(U,{children:(0,t.jsxs)(I.s,{w:"100%",children:[(0,t.jsx)(f.$,{variant:"plain",onClick:C,leftIcon:(0,t.jsx)(P.g,{icon:D.U23}),children:(0,t.jsx)(b.x6,{id:"i88wdJ"})}),(0,t.jsx)(A.h,{}),(0,t.jsxs)(g.e,{children:[(0,t.jsx)(a.Tz,{label:(0,t.jsx)(b.x6,{id:"INxusr"}),isDisabled:!j,shouldWrapChildren:!0,children:(0,t.jsx)(f.$,{isLoading:l,variant:"plain",onClick:y,isDisabled:j||c,children:(0,t.jsx)(b.x6,{id:"ZSZK3s"})})}),(0,t.jsx)(a.Tz,{label:(0,t.jsx)(b.x6,{id:"INxusr"}),isDisabled:!j,shouldWrapChildren:!0,children:(0,t.jsx)(f.$,{isLoading:l,variant:"solid",onClick:v,rightIcon:(0,t.jsx)(P.g,{icon:D.e68}),isDisabled:j||c,children:(0,t.jsx)(b.x6,{id:"ul+W4g"})})})]})]})})]})}),(0,t.jsxs)(V,{children:["reviewStep"===x&&(0,t.jsx)(ig,{onTabChange:m,currentTab:p}),"initialStep"===x?(0,t.jsx)(I.s,{h:"100%",w:"100%"}):"thumbnails"===p&&o.length>0?(0,t.jsx)(R.B,{w:"100%",overflow:"auto",h:"100%",align:"center",children:o.map(e=>(0,t.jsx)(E.a,{children:(0,t.jsx)(T._,{src:e.url})},e.index))}):"editor"===p?(0,t.jsx)(Y,{theme:r}):null]})]})};var iv=s(23293);let iy=(0,d.memo)(e=>{let{onTabChange:i,currentTab:s}=e;return(0,t.jsxs)(g.e,{p:2,position:"absolute",top:"3",left:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",shadow:"md",children:[(0,t.jsx)(f.$,{borderRadius:"md",bg:"testerDoc"===s?"trueblue.50":"transparent",color:"testerDoc"===s?"trueblue.500":"gray.600",onClick:()=>{i("testerDoc")},"data-testid":"preview-tab-tester-doc",children:(0,t.jsx)(b.x6,{id:"ypSaiK"})}),(0,t.jsx)(f.$,{borderRadius:"md",bg:"currentDoc"===s?"trueblue.50":"transparent",color:"currentDoc"===s?"trueblue.500":"gray.600",onClick:()=>{i("currentDoc")},"data-testid":"preview-tab-current-doc",children:(0,t.jsx)(b.x6,{id:"VJUm9p"})})]})});iy.displayName="PreviewTabSwitcher";let iw=()=>{let e=(0,u.GV)(C.eo),i=(0,u.GV)(C.Sb),s=(0,d.useRef)(),[n,l]=(0,d.useState)("testerDoc"),r=(0,d.useCallback)(e=>{var t,n;l(e),"currentDoc"===e?i&&(null==(t=s.current)||t.commands.setContent(i)):null==(n=s.current)||n.commands.setContent((0,J.t)())},[i]),o=(0,d.useCallback)(e=>{s.current=e},[]);return e?(0,t.jsxs)(t.Fragment,{children:[i&&(0,t.jsx)(iy,{onTabChange:r,currentTab:n}),(0,t.jsx)(Y,{theme:e,setEditor:o})]}):(0,t.jsx)(t.Fragment,{})},iC={colors:{name:(0,t.jsx)(b.x6,{id:"1HfW/F"}),description:(0,t.jsx)(b.x6,{id:"lsknHp"}),icon:D.fyG},fonts:{name:(0,t.jsx)(b.x6,{id:"I0oBSl"}),description:(0,t.jsx)(b.x6,{id:"0kBA53"}),icon:D.tiU},design:{name:(0,t.jsx)(b.x6,{id:"f8fH8W"}),description:(0,t.jsx)(b.x6,{id:"7dxcBr"}),icon:D.ffg},logo:{name:(0,t.jsx)(b.x6,{id:"iG7KNr"}),description:(0,t.jsx)(b.x6,{id:"pSG+r5"}),icon:D.Cyq},themeName:{name:(0,t.jsx)(b.x6,{id:"HZ7fEu"}),description:(0,t.jsx)(b.x6,{id:"JMXrv3"}),icon:D.SGM}},ik={base:"repeat(1, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(3, 1fr)"};var iS=s(40162),i_=s(4192),iI=s(56570),iA=s(43724),iR=s.n(iA),iE=s(30361),iT=s.n(iE),iD=s(88839),iP=s(52762),iO=s(30892),iM=s(26194),iz=s.n(iM),iF=s(831),iN=s.n(iF),iL=s(33612),iG=s.n(iL);let iB=e=>{let{theme:i,onSelect:s,onShuffle:n,isSelected:l=!1}=e,r=(0,e3.Ik)((0,e3.H7)(i)),o=(0,e3.Tn)(i).color,a=(0,e3.Sf)((0,e3.Lz)(i)),c=(0,e3.fQ)(i).color,x=(0,e3.Sf)((0,e3.jO)(i)),u=(0,e3.ND)(i,!1,!0),h=(0,d.useMemo)(()=>iz()(iN()(u,e3.$j),e=>-iG()((0,e3.Ik)(e)).getLuminance()),[u]);return(0,t.jsxs)(I.s,{position:"relative",align:"center",justify:"center",role:"group",children:[(0,t.jsx)(f.$,{variant:"ghost",h:"auto",p:2,flex:1,w:"100%",textAlign:"left",whiteSpace:"wrap",fontWeight:"500",onClick:s,borderWidth:"2px",borderColor:l?"trueblue.300":"transparent",bg:l?"trueblue.50":void 0,children:(0,t.jsx)(I.s,{bg:r,borderRadius:"md",boxShadow:"md",overflow:"hidden",flex:1,direction:"column",borderWidth:"1px",position:"relative",children:(0,t.jsxs)(I.s,{p:4,flex:1,children:[(0,t.jsx)(I.s,{p:4,bg:o,borderRadius:"md",boxShadow:"sm",flex:1,children:(0,t.jsxs)(R.B,{flex:1,spacing:1,children:[(0,t.jsx)(M.z,{opacity:.8,children:(0,t.jsx)(I.s,{w:"70%",h:1.5,css:a,borderRadius:"sm"})}),(0,t.jsx)(I.s,{h:1,opacity:.6,bg:c,borderRadius:"sm"}),(0,t.jsx)(I.s,{h:1,opacity:.6,bg:c,borderRadius:"sm"}),(0,t.jsx)(I.s,{h:2.5,opacity:.9,borderRadius:"full",w:"40px",align:"center",justify:"center",css:x,mt:1})]})}),(0,t.jsx)(M.z,{spacing:0,flex:1,w:"100%",position:"absolute",bottom:"-2",left:"0",opacity:0,transitionProperty:"opacity, bottom",transitionDuration:"normal",_groupHover:{opacity:1,bottom:0},children:h.map((e,i)=>(0,t.jsx)(I.s,{css:(0,e3.Sf)(e),flex:1,h:2},i))})]})})}),l&&(0,t.jsx)(f.$,{size:"xs",variant:"solid",position:"absolute",bottom:"5",right:"5",leftIcon:(0,t.jsx)(P.g,{icon:D.tW}),opacity:0,_groupHover:{opacity:1},onClick:n,children:(0,t.jsx)(b.x6,{id:"gH5Gbn"})})]})},iU=()=>({all:{label:(0,t.jsx)(b.x6,{id:"Zvbsrl"})},light:{label:(0,t.jsx)(b.x6,{id:"4kr8nm"})},dark:{label:(0,t.jsx)(b.x6,{id:"P9X6Mu"})},red:{label:(0,t.jsx)(b.x6,{id:"Ppz2lw"}),colors:["red.400","#DC143C","#B22222","#8B0000"]},orange:{label:(0,t.jsx)(b.x6,{id:"Td1Axu"}),colors:["orange.400","#FF8C00","#FF7F50","#FF6347"]},yellow:{label:(0,t.jsx)(b.x6,{id:"UHB0wN"}),colors:["yellow.400","#FFD700","#FFA500","#FF8C00"]},green:{label:(0,t.jsx)(b.x6,{id:"fyzS0F"}),colors:["green.400","#32CD32","#00FF00","#ADFF2F"]},blue:{label:(0,t.jsx)(b.x6,{id:"m1hucM"}),colors:["blue.400","#1E90FF","#00BFFF","#ADD8E6"]},purple:{label:(0,t.jsx)(b.x6,{id:"AI9Iqf"}),colors:["purple.400","#8A2BE2","#9370DB","#BA55D3"]},pink:{label:(0,t.jsx)(b.x6,{id:"aj7xux"}),colors:["pink.400","#FFB6C1","#FF69B4","#FF1493"]},neutral:{label:(0,t.jsx)(b.x6,{id:"z9uvvN"}),colors:["#D2BEA1","#808080","#C0C0C0","#D3D3D3"]},gray:{label:(0,t.jsx)(b.x6,{id:"HA64AU"}),colors:["gray.400","#A9A9A9","#C0C0C0","#D3D3D3"]},professional:{label:(0,t.jsx)(b.x6,{id:"wXRbPe"})},colorful:{label:(0,t.jsx)(b.x6,{id:"Drp0HH"})},futuristic:{label:(0,t.jsx)(b.x6,{id:"Uk8MFz"})},modern:{label:(0,t.jsx)(b.x6,{id:"kJB3k/"})}}),iW=()=>{var e;let i=(0,u.GV)(C.eo),s=(0,u.jL)(),[n,l]=(0,d.useState)("all"),{data:r}=(0,et.Snx)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),o=null==r?void 0:r.themes,[a,c]=(0,d.useState)(i&&(null==(e=iR()(o,e=>iV(i,e)))?void 0:e.id)||null),x=(0,d.useMemo)(()=>Object.entries(iU()),[]),h=(0,d.useMemo)(()=>(null==o?void 0:o.filter(e=>{if(e.config.disableReadabilityAdjustment)return!1;if("all"===n)return!0;let{keywords:i}=e.config;return!!i&&(i.color.includes(n)||i.tone.includes(n))}))||[],[n,o]),p=(0,d.useCallback)(e=>{c(e.id);let i=(0,e3.j8)((0,e3.H7)(e))||{type:iP.h.NONE},t=(0,iD.M)(e),n={primaryColor:(0,e3.VH)(e),secondaryColors:(0,e3.gx)(e),cardColor:(0,e3.Tn)(e),headingColor:(0,e3.Lz)(e),bodyColor:(0,e3.fQ)(e),accentBackgrounds:e.config.accentBackgrounds,stylePrompt:e.config.stylePrompt,background:i,shapeColorScheme:"custom"===t.shapeColorScheme?"accent":t.shapeColorScheme};s((0,C._R)({config:n}))},[s]),j=(0,d.useCallback)(e=>{s((0,C._R)({config:iH(e)}))},[s]);if(!i)throw Error("Theme is undefined");return(0,t.jsxs)(R.B,{spacing:6,children:[(0,t.jsx)(iS.B,{children:x.map(e=>{let[i,{label:s,colors:r}]=e;return(0,t.jsx)(i_.vw,{onClick:()=>{l(i)},colorScheme:n===i?"trueblue":"gray",cursor:"pointer",children:(0,t.jsxs)(M.z,{spacing:2,children:[r?(0,t.jsx)(I.s,{boxSize:3,bg:r[0],borderRadius:"sm"}):null,(0,t.jsx)(m.E,{children:s})]})},i)})}),(0,t.jsx)(R.B,{children:(0,t.jsx)(iI.x,{templateColumns:ik,gap:3,children:h.map(e=>(0,t.jsx)(iB,{theme:e,onSelect:()=>{p(e)},onShuffle:()=>j(e),isSelected:a===e.id},e.id))})})]})},iV=(e,i)=>JSON.stringify((0,e3.ND)(e))===JSON.stringify((0,e3.ND)(i)),iH=e=>{let i=(0,e3.ND)(e),s=(0,e3.Tn)(e),t=i.map(e3.Ik).filter(e=>{let i=(0,iO.VU)(e);return i>.8||i<.2}).map(e3.Ik),n=iT()(t)||(0,e3.Ik)(s),l=(0,iO.$p)(n),r=(0,iO.VU)(n),o={type:"solid",color:n},a=i.filter(e=>(0,e3.$j)(e)!==(0,e3.$j)(o)),d=iT()(a),c=[d,{type:"solid",color:l?e3.kF:e3.Hs}],x=iT()(c),u={type:"solid",color:l?e3.Cs:e3.nI},h=[(0,e3.Ik)(d),(0,iO.Zt)(n,r>.1?-12:12)],p=iT()(h);return{headingColor:x,bodyColor:u,cardColor:o,primaryColor:d,background:(0,e3.j8)({type:"solid",color:p}),shapeColorScheme:iT()(["default","accent"])}};var iX=s(49146),i$=s(23908),iK=s(36693),iJ=s(20061),iq=s(3448);let iQ=e=>{let{defaultTab:i,customTab:s}=e;return(0,t.jsxs)(iX.t,{isFitted:!0,isLazy:!0,variant:"soft-rounded",size:"sm",children:[(0,t.jsxs)(i$.w,{children:[(0,t.jsx)(iK.o,{children:(0,t.jsxs)(M.z,{children:[(0,t.jsx)(P.g,{icon:D.qcK}),(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"M0Q+0g"})})]})}),(0,t.jsx)(iK.o,{children:(0,t.jsxs)(M.z,{children:[(0,t.jsx)(P.g,{icon:D.MT7}),(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"srRMnJ"})})]})})]}),(0,t.jsxs)(iJ.T,{children:[(0,t.jsx)(iq.K,{px:0,children:i}),(0,t.jsx)(iq.K,{px:0,children:s})]})]})};var iZ=s(61491),iY=s(51504),i0=s(1057),i1=s(66079),i6=s(62961),i5=s(59858);let i2=e=>(0,i5.S0)(e)&&(0,i5.R4)(e),i4=e=>{let{setBackground:i,background:s,defaultMessage:n,isDark:l,isValidSource:r,contextualTheme:o}=e,[a,c]=(0,d.useState)("default"),x=i1.Fn[a],u=(0,d.useCallback)(e=>r?r(e)&&i2(e):i2(e),[r]),h=(0,d.useCallback)(e=>{i({...s,...e})},[s,i]);return(0,t.jsx)(i6.v,{isDark:l,isValidSource:u,defaultMessage:n,currentBackground:s,currentSource:x,updateCurrentBackground:h,setCurrentSourceKey:c,currentSourceKey:a,editType:"themeBackground",contextualTheme:o})},i3=()=>{let e=(0,u.GV)(C.eo),i=(0,u.jL)();if(!e)throw Error("Theme is undefined");let s=(0,e3.fQ)(e);return(0,t.jsx)(e4.a9,{dataTestId:"custom-theme-body-color-picker",theme:e,color:s||void 0,defaultColor:s,updateColor:e=>{i((0,C.jY)({color:e}))},palette:"accent"})},i8=()=>{let e=(0,u.GV)(C.eo),i=(0,u.jL)();if(!e)throw Error("Theme is undefined");let s=(0,e3.Lz)(e);return(0,t.jsx)(e4.tN,{dataTestId:"custom-theme-heading-color-picker",theme:e,color:s||void 0,defaultColor:s,updateColor:e=>{i((0,C.do)({color:e}))},palette:"accent"})},i9=(0,d.memo)(()=>{var e;let i=(0,u.jL)(),s=(0,u.GV)(C.eo),n="builder"===(0,u.GV)(C.yV),l=(0,d.useCallback)(e=>{var s,t;(null==e?void 0:e.type)===iP.h.IMAGE&&(null==(s=e.image)?void 0:s.uploadStatus)===eY.A.Uploading?i((0,C.VT)({background:e})):(null==e?void 0:e.type)===iP.h.IMAGE&&(null==(t=e.image)?void 0:t.uploadStatus)===eY.A.Error?i((0,C.Px)()):i((0,C.Co)({background:e}))},[i]),r={size:"md",fontWeight:"600"};if(!s)throw Error("Theme is undefined");let[o,...c]=(0,e3.CD)(s),x=(0,e3.Tn)(s),h=(0,i0.Ee)(s),p=(0,e3.Mw)(s);return(0,t.jsxs)(R.B,{spacing:7,children:[(0,t.jsxs)(R.B,{spacing:"3",children:[(0,t.jsxs)(iv.D,{...r,children:[(0,t.jsx)(b.x6,{id:"DNUgpN"})," ",(0,t.jsx)(a.qT,{label:(0,t.jsx)(b.x6,{id:"+GFtYe"})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"Udsgl4"})}),(0,t.jsx)(e4.Wv,{dataTestId:"custom-theme-primary-color-picker",theme:s,color:o,updateColor:e=>{n?i((0,C.uL)({color:e})):i((0,C.ds)({color:e}))},palette:"none"})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"k7VWXk"})}),(0,t.jsx)(e4.oB,{theme:s,colors:c,updateColors:e=>{i((0,C.Kf)({colors:e}))},minColors:0,maxColors:8,palette:"none"})]})]}),(0,t.jsxs)(R.B,{spacing:"3",children:[(0,t.jsx)(iv.D,{...r,children:(0,t.jsx)(b.x6,{id:"xeiujy"})}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"v9mrgh"})}),(0,t.jsx)(i8,{})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"jx8uni"})}),(0,t.jsx)(i3,{})]})]}),(0,t.jsxs)(R.B,{spacing:3,children:[(0,t.jsx)(iv.D,{...r,children:"Accessibility"}),(0,t.jsx)(eI.MJ,{children:(0,t.jsx)(e_.F,{colorScheme:"gray",children:(0,t.jsx)(iZ.S,{isChecked:!(null==(e=s.config)?void 0:e.disableReadabilityAdjustment),onChange:()=>i((0,C._w)()),children:(0,t.jsxs)(m.E,{fontSize:"sm",children:[(0,t.jsx)(b.x6,{id:"KmUJ3J"})," ",(0,t.jsx)(a.qT,{label:(0,t.jsx)(b.x6,{id:"J9NJr0",values:{GAMMA_PROPER_NOUN:ea.On}})})]})})})})]}),(0,t.jsxs)(R.B,{spacing:"3",children:[(0,t.jsx)(iv.D,{...r,children:"Background"}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"ihFuMH"})}),(0,t.jsx)(e4.a9,{dataTestId:"custom-theme-card-color-picker",theme:s,color:x,updateColor:e=>{i((0,C.hi)({color:e}))},defaultColor:{type:"solid",color:"#FFFFFF"},palette:"accent"})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"8rfGAV"})}),(0,t.jsx)(i4,{setBackground:l,background:h,defaultMessage:(0,t.jsxs)(e_.F,{fontSize:"xs",children:[(0,t.jsx)(iY._,{}),(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"j+PsQe"})})]}),isDark:p,contextualTheme:s})]})]})]})});i9.displayName="CustomColorSettings";let i7=(0,d.memo)(()=>(0,t.jsx)(R.B,{spacing:6,children:(0,t.jsx)(iQ,{defaultTab:(0,t.jsx)(iW,{}),customTab:(0,t.jsx)(i9,{})})}));i7.displayName="ColorStep";var se=s(95571);let si={...K.AG,cardBorderColor:void 0},ss=e=>{let{isSelected:i=!1,onClick:s,theme:n,pack:l}=e,{title:r,description:o,knobs:a}=l,c=(0,e3.Ik)((0,e3.H7)(n))||"white",x=(0,d.useMemo)(()=>{let e={...si,...a(n)};return(0,se.tL)({cardColor:(0,e3.Tn)(n),config:e,theme:{...n,config:{...n.config,...e}}})},[n,a]);return(0,t.jsx)(f.$,{variant:"ghost",onClick:s,bg:i?"trueblue.50":"white",borderColor:i?"trueblue.400":"transparent",borderWidth:"2px",minH:"auto",h:"auto",minW:"auto",w:"100%",p:2,flex:1,color:"gray.800",textAlign:"left",whiteSpace:"normal",alignItems:"flex-start",css:x,children:(0,t.jsxs)(R.B,{flex:1,spacing:4,children:[(0,t.jsx)(I.s,{h:24,bg:c,borderRadius:"md",borderWidth:"1px",shadow:"inner",align:"center",justify:"center",p:5,children:(0,t.jsx)(I.s,{w:"100%",h:"100%",sx:{boxShadow:"var(--card-shadow)",backdropFilter:"var(--card-backdrop-filter)",backgroundColor:"var(--card-background-color)",borderRadius:"var(--card-border-radius)"}})}),(0,t.jsxs)(R.B,{spacing:1,children:[(0,t.jsx)(m.E,{fontSize:"md",children:r}),(0,t.jsx)(m.E,{fontWeight:"500",color:"gray.500",fontSize:"xs",children:o})]})]})})};var st=s(8099),sn=s(51684);let sl=e=>{let{label:i,isSelected:s=!1,type:n="card",onClick:l=()=>{},sx:r={},children:o}=e;return(0,t.jsx)(a.Tz,{label:i?i():"",placement:"top",children:(0,t.jsx)(f.$,{h:"auto",p:0,variant:"ghost",onClick:l,children:(0,t.jsxs)(I.s,{h:"14",minH:"14",minW:"88px",position:"relative",overflow:"hidden",alignItems:"center",justifyContent:"center",borderRadius:"md",bg:s?"trueblue.200":"gray.200",border:"2px solid",borderColor:s?"trueblue.400":"gray.200",transitionProperty:"background-color, border-color",transitionDuration:"normal",_hover:{bg:s?void 0:"trueblue.100",borderColor:s?void 0:"trueblue.300"},children:["layout"===n&&(0,t.jsx)(R.B,{bg:"white",h:"100%",w:"100%",p:"2",children:(0,t.jsx)(M.z,{h:"100%",w:"100%",borderRadius:"md",alignItems:"stretch",spacing:"1",filter:"grayscale(1)",children:[void 0,void 0,void 0].map((e,i)=>(0,t.jsx)(I.s,{flex:"1",sx:r},i))})}),"card"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.a,{zIndex:"0",position:"relative",fontSize:"2xl",color:s?"trueblue.600":"gray.600",children:(0,t.jsx)(P.g,{icon:sn.Cyq})}),(0,t.jsx)(E.a,{zIndex:"10",bg:"white",position:"absolute",left:"-4",borderRadius:"md",bottom:"-4",h:"14",w:"100%",sx:r})]}),"button"===n&&(0,t.jsx)(f.$,{sx:r,p:4,size:"sm",variant:"plain",pointerEvents:"none",boxShadow:"none",border:"none",maxW:"100%",transform:"scale(0.8)",children:(0,t.jsx)(b.x6,{id:"hxBFty"})}),o]})})})},sr=e=>{let{label:i,isSelected:s=!1,type:n="radius",onClick:l=()=>{},sx:r={}}=e;return(0,t.jsx)(a.Tz,{label:i?i():"",placement:"top",children:(0,t.jsxs)(f.$,{p:"0",variant:"ghost",bg:s?"trueblue.100":"gray.200",border:"2px solid",borderColor:s?"trueblue.400":"gray.200",w:"12",h:"12",alignItems:"flex-start",overflow:"hidden",textAlign:"left",onClick:l,position:"relative",children:["radius"===n&&(0,t.jsx)(E.a,{zIndex:"10",bg:"white",h:"16",w:"16",position:"absolute",top:"3",right:"3",sx:r}),"shadow"===n&&(0,t.jsx)(E.a,{zIndex:"10",bg:"white",h:"16",w:"16",position:"absolute",bottom:"3",left:"3",borderRadius:"sm",sx:r}),"block-shadow"===n&&(0,t.jsx)(E.a,{w:"100%",h:"100%",bg:"white",children:(0,t.jsx)(E.a,{zIndex:"10",bg:"gray.50",h:"16",w:"16",position:"absolute",bottom:"3",left:"3",borderRadius:"sm",sx:r})}),"card"===n&&(0,t.jsxs)(I.s,{color:"gray.400",alignItems:"center",h:"100%",w:"100%",justifyContent:"center",position:"relative",children:[(0,t.jsx)(P.g,{icon:sn.Cyq}),(0,t.jsx)(E.a,{position:"absolute",bg:"white",zIndex:"10",top:"0",left:"0",bottom:"0",right:"0",sx:r})]})]})})},so=e=>{let{label:i,tooltip:s,isSelected:n,onClick:l}=e;return(0,t.jsx)(st.m,{label:s?s():"",placement:"top",children:(0,t.jsx)(f.$,{h:"auto",p:"3",variant:"ghost",bg:n?"trueblue.50":"gray.50",textAlign:"left",minW:"14",onClick:l,children:i&&(0,t.jsx)(m.E,{maxW:"100%",noOfLines:1,color:n?"trueblue.600":"gray.600",children:i})})})};var sa=s(68093);let sd=()=>{let e=(0,u.jL)(),i=(0,u.GV)(C.eo);if(!i)throw Error("Theme is undefined");let s=(0,iD.M)(i),n="hard"===s.cardShadow;if(!("none"!==s.cardBorder||n))return null;let l=(0,e3.J1)(i),{config:r}=i;return(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:n?(0,t.jsx)(b.x6,{id:"Nz77Ud"}):(0,t.jsx)(b.x6,{id:"ITgjHB"})}),(0,t.jsx)(e4.a9,{theme:i,color:r.cardBorderColor,defaultColor:l,updateColor:i=>{e((0,C.rg)({color:i}))},palette:"accent"})]})};var sc=s(13366),sx=s(98164);let su=()=>{let e=(0,u.jL)(),i=(0,u.GV)(C.eo);if(!i)throw Error("Theme is undefined");let s=(0,e3.bh)(i),n=(0,iD.M)(i);return(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"QMdgje"})}),(0,t.jsxs)(eQ.T,{spacing:2,align:"start",children:[";",(0,t.jsx)(sc.z,{children:(0,t.jsx)(R.B,{children:Object.entries(K.Xt).map(s=>{let[l,r]=s,o=(0,e3.QD)(i,l);return(0,t.jsx)(sx.s,{isChecked:l===n.shapeColorScheme,onChange:()=>{e((0,C.BH)({shapeColorScheme:l}))},children:(0,t.jsxs)(M.z,{children:["custom"!==l&&(0,t.jsx)(eS.j,{size:"5",bg:(0,e3.Ik)(o)}),(0,t.jsx)(m.E,{fontSize:"sm",children:r.name()})]})},l)})})}),"custom"===n.shapeColorScheme&&(0,t.jsxs)(R.B,{w:"100%",children:[(0,t.jsx)(m.E,{fontSize:"sm",color:"gray.600",children:(0,t.jsx)(b.x6,{id:"U+j5it"})}),(0,t.jsx)(e4.oB,{theme:i,colors:s,updateColors:i=>{e((0,C.h)({colors:i}))},minColors:1,maxColors:10,solidOnly:!0,palette:"accent"})]})]})]})},sh=(0,d.memo)(()=>{let e=[{label:()=>eF.Ru._({id:"Ccpbzh"}),Component:(0,t.jsx)(sp,{})},{label:()=>eF.Ru._({id:"Uw3jqG"}),Component:(0,t.jsx)(sm,{})},{label:()=>eF.Ru._({id:"0ZDH3e"}),Component:(0,t.jsx)(sj,{})}];return(0,t.jsxs)(iX.t,{variant:"soft-rounded",isFitted:!0,size:"sm",children:[(0,t.jsx)(i$.w,{children:e.map((e,i)=>(0,t.jsx)(iK.o,{"data-testid":"theme-config-tab-".concat(i),children:e.label()},i))}),(0,t.jsx)(iJ.T,{children:e.map((e,i)=>(0,t.jsx)(iq.K,{px:"0","data-testid":"theme-config-tab-panel-".concat(i),children:(0,t.jsx)(R.B,{spacing:4,children:e.Component})},i))})]})});sh.displayName="DesignSettings";let sp=(0,d.memo)(()=>{let e=(0,u.jL)(),i=(0,u.GV)(C.eo);if(!i)throw Error("Theme is undefined");let s=(0,iD.M)(i);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(eI.MJ,{children:[(0,t.jsxs)(eA.l,{children:[(0,t.jsx)(b.x6,{id:"aBxw8F"}),(0,t.jsx)(a.qT,{ml:1.5,label:(0,t.jsx)(b.x6,{id:"IUHTyS"})})]}),(0,t.jsx)(g.e,{p:.5,children:Object.entries(K.T5).map(i=>{let[n,l]=i;return(0,t.jsx)(sr,{label:l.name,type:"radius",isSelected:n===s.roundness,sx:l.previewSx,onClick:()=>{e((0,C.n4)({roundness:n}))}},n)})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsxs)(eA.l,{children:[(0,t.jsx)(b.x6,{id:"n0Xbfn"}),(0,t.jsx)(a.qT,{ml:1.5,label:(0,t.jsx)(b.x6,{id:"bsqZlK"})})]}),(0,t.jsx)(g.e,{p:.5,children:Object.entries(K.Jm).map(i=>{let[n,l]=i;return l.deprecated&&n!==s.cardShadow?null:(0,t.jsx)(sr,{label:l.name,type:"shadow",isSelected:n===s.cardShadow||!s.cardShadow&&"default"===n,sx:l.previewSx,onClick:()=>{e((0,C.E0)({cardShadow:n}))}},n)})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"XDmFR6"})}),(0,t.jsx)(g.e,{p:.5,isAttached:!0,children:Object.entries(K.ws).map(i=>{let[n,l]=i;return(0,t.jsx)(so,{tooltip:l.name,isSelected:n===s.cardBorder,label:l.icon,onClick:()=>{e((0,C.Cg)({cardBorder:n}))}},n)})})]}),(0,t.jsx)(sd,{}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"yu3Nvs"})}),(0,t.jsx)(g.e,{p:.5,children:Object.entries(K.Xg).map(i=>{let[n,l]=i;return(0,t.jsx)(sl,{label:l.name,type:"card",isSelected:n===s.cardTransparency,sx:l.previewSx,onClick:()=>{e((0,C.SM)({cardTransparency:n}))}},n)})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"ae2ouI"})}),(0,t.jsx)(g.e,{p:.5,flexWrap:"wrap",isAttached:!0,gap:2,children:Object.entries(sa.e).map(i=>{let[n,l]=i;return(0,t.jsx)(sl,{label:l.name,type:"layout-cut",isSelected:n===s.accentCut,onClick:()=>{e((0,C.m7)({accentCut:n}))},children:(0,t.jsxs)(M.z,{h:"100%",w:"100%",spacing:"0",bg:"white",children:[(0,t.jsx)(I.s,{flex:"2",h:"100%"}),(0,t.jsx)(I.s,{flex:"1",h:"100%",bg:"gray.200",color:"gray.500",alignItems:"center",justifyContent:"end",sx:l.maskStyles.right,p:2,children:(0,t.jsx)(P.g,{icon:eH.Cyq})})]})},n)})})]})]})});sp.displayName="CardsTab";let sm=(0,d.memo)(()=>{let e=(0,u.jL)(),i=(0,u.GV)(C.eo);if(!i)throw Error("Theme is undefined");let s=(0,iD.M)(i);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(su,{}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"xQJpEa"})}),(0,t.jsx)(g.e,{p:.5,isAttached:!0,children:Object.entries(K.z0).map(i=>{let[n,l]=i;return(0,t.jsx)(so,{tooltip:l.name,isSelected:n===s.shapeFill,label:l.icon,onClick:()=>{e((0,C.Ow)({shapeFill:n})),"none"===n&&"none"===s.shapeBorder&&e((0,C.HC)({shapeBorder:"md"}))}},n)})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:"Block border"}),(0,t.jsx)(g.e,{isAttached:!0,children:Object.entries(K.ws).map(i=>{let[n,l]=i;return(0,t.jsx)(so,{tooltip:l.name,isSelected:n===s.shapeBorder,label:l.icon,onClick:()=>{e((0,C.HC)({shapeBorder:n}))}},n)})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:"Block shadow"}),(0,t.jsx)(g.e,{as:iS.B,children:Object.entries(K.kI).map(i=>{let[n,l]=i;return l.deprecated&&n!==s.shapeShadow?null:(0,t.jsx)(sr,{type:"block-shadow",label:l.name,isSelected:n===s.shapeShadow,sx:{border:"1px solid",borderColor:"gray.200",backgroundColor:"gray.50",...l.previewSx},onClick:()=>{e((0,C.pe)({shapeShadow:n}))}},n)})})]})]})});sm.displayName="BlocksTab";let sj=(0,d.memo)(()=>{let e=(0,u.GV)(C.eo),i=(0,u.jL)();if(!e)throw Error("Theme is undefined");let s=(0,iD.M)(e),{config:n}=e,l=(0,e3.Jh)(e),r=(0,e3.jO)(e);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(eI.MJ,{children:[(0,t.jsxs)(eA.l,{children:[(0,t.jsx)(b.x6,{id:"Ptp9MF"})," ",(0,t.jsx)(a.qT,{label:(0,t.jsx)(b.x6,{id:"W3CvLD"})})]}),(0,t.jsx)(e4.tN,{theme:e,color:n.buttonColor,defaultColor:r,updateColor:e=>{i((0,C.$W)({color:e}))},palette:"accent"})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:"Button shape"}),(0,t.jsx)(g.e,{as:iS.B,children:Object.entries(K.OE).map(e=>{let[n,l]=e;return(0,t.jsx)(sl,{type:"button",label:l.name,isSelected:n===s.buttonRoundness,sx:l.previewSx,onClick:()=>{i((0,C.L_)({roundness:n}))}},n)})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsxs)(eA.l,{children:[(0,t.jsx)(b.x6,{id:"QfrKvi"})," ",(0,t.jsx)(a.qT,{label:(0,t.jsx)(b.x6,{id:"W3CvLD"})})]}),(0,t.jsx)(e4.a9,{theme:e,color:n.linkColor,defaultColor:l,updateColor:e=>{i((0,C.NN)({color:e}))},palette:"accent"})]})]})});sj.displayName="ButtonsLinksTab";let sg=()=>[{id:"default",title:(0,t.jsx)(b.x6,{id:"TJBHlP"}),description:(0,t.jsx)(b.x6,{id:"1GpX8B"}),knobs:()=>({})},{id:"flat",title:(0,t.jsx)(b.x6,{id:"F7cy8b"}),description:(0,t.jsx)(b.x6,{id:"SkGUtG"}),knobs:()=>({roundness:"sm",buttonRoundness:"sm",cardBorder:"none",cardShadow:"none",shapeFill:"solid",shapeBorder:"none",shapeShadow:"none"})},{id:"outline",title:(0,t.jsx)(b.x6,{id:"dD7NPy"}),description:(0,t.jsx)(b.x6,{id:"GYrLbt"}),knobs:e=>({shapeFill:"none",shapeBorder:"md",cardBorder:"md",roundness:"sm",buttonRoundness:"sm",cardBorderColor:(0,e3.HW)((0,e3.VH)(e))})},{id:"sharp",title:(0,t.jsx)(b.x6,{id:"MnUrtL"}),description:(0,t.jsx)(b.x6,{id:"Zcn2iz"}),knobs:()=>({shapeFill:"solid",shapeBorder:"sm",cardBorder:"sm",cardShadow:"none",roundness:"sm",buttonRoundness:"sm",accentCut:"diagonal"})},{id:"comic",title:(0,t.jsx)(b.x6,{id:"83V/SJ"}),description:(0,t.jsx)(b.x6,{id:"tW4rXv"}),knobs:e=>({roundness:"sm",buttonRoundness:"sm",cardBorder:"md",cardShadow:"hard",shapeFill:"solid",shapeBorder:"md",shapeShadow:"none",cardBorderColor:(0,e3.HW)((0,e3.VH)(e))})},{id:"glass",title:(0,t.jsx)(b.x6,{id:"f0936e"}),description:(0,t.jsx)(b.x6,{id:"yeVgz2"}),knobs:()=>({cardTransparency:"frosted",cardBorder:"none",cardShadow:"default",roundness:"sm",shapeFill:"solid",shapeShadow:"none",shapeBorder:"sm"})},{id:"rounded",title:(0,t.jsx)(b.x6,{id:"ieQgZ8"}),description:(0,t.jsx)(b.x6,{id:"ulXymN"}),knobs:()=>({roundness:"xl",buttonRoundness:"xl",shapeFill:"none",shapeBorder:"lg",cardBorder:"lg",cardShadow:"none",accentCut:"round"})},{id:"soft",title:(0,t.jsx)(b.x6,{id:"DT6auk"}),description:(0,t.jsx)(b.x6,{id:"UtUWAG"}),knobs:()=>({cardTransparency:"frosted",cardShadow:"default",roundness:"lg",cardBorder:"none",shapeShadow:"soft",shapeBorder:"none",shapeFill:"none",buttonRoundness:"xl",accentCut:"fade"})},{id:"capsule",title:(0,t.jsx)(b.x6,{id:"Q4Of8O"}),description:(0,t.jsx)(b.x6,{id:"vc8Frf"}),knobs:e=>({roundness:"xl",buttonRoundness:"xl",cardBorder:"md",cardShadow:"hard",shapeFill:"solid",shapeBorder:"sm",shapeShadow:"hard",cardBorderColor:(0,e3.HW)((0,e3.VH)(e)),accentCut:"wiggle"})}],sf=(0,d.memo)(()=>{let e=(0,u.GV)(C.eo),i=(0,u.jL)(),[s,n]=(0,d.useState)(null),l=(0,d.useCallback)(s=>{if(!e)throw Error("theme is undefined");n(s.id);let t=s.knobs(e);i((0,C._R)({config:{...si,...t}}))},[i,e]);if(!e)throw Error("Theme is undefined");let r=sg();return(0,t.jsx)(R.B,{spacing:6,children:(0,t.jsx)(iQ,{defaultTab:(0,t.jsx)(R.B,{children:(0,t.jsx)(iI.x,{templateColumns:ik,gap:3,children:r.map(i=>(0,t.jsx)(ss,{theme:e,pack:i,isSelected:s===i.id,onClick:()=>l(i)},i.id))})}),customTab:(0,t.jsx)(sh,{})})})});sf.displayName="DesignStep";var sb=s(41781);let sv=e=>{let{isSelected:i=!1,onClick:s,heading:n,headingWeight:l,body:r,bodyWeight:o,theme:a}=e,d=(0,e3.Ik)((0,e3.Tn)(a)),c=(0,e3.VL)((0,e3.Lz)(a)),x=(0,e3.VL)((0,e3.fQ)(a));return(0,t.jsx)(f.$,{variant:"ghost",onClick:s,minH:"auto",h:"auto",minW:"auto",w:"100%",p:2,flex:1,color:"gray.800",textAlign:"left",whiteSpace:"normal",bg:i?"trueblue.50":"white",borderColor:i?"trueblue.400":"transparent",borderWidth:"2px",alignItems:"flex-start",children:(0,t.jsxs)(R.B,{flex:1,bg:d,borderRadius:"md",spacing:1,p:3,py:4,shadow:"sm",borderWidth:"1px",children:[(0,t.jsx)(m.E,{fontSize:"xl",fontWeight:l,fontFamily:n.id,css:c,noOfLines:1,children:n.name}),(0,t.jsx)(m.E,{fontWeight:o,fontFamily:r.id,css:x,fontSize:"md",children:r.name})]})})};var sy=s(32844),sw=s(59554),sC=s(6743),sk=s(30928),sS=s(62117),s_=s(72470),sI=s(77979),sA=s(84718),sR=s(16936),sE=s(50933),sT=s(33750),sD=s.n(sT),sP=s(17006),sO=s(11403);let sM=(0,d.memo)(()=>{let e=(0,u.jL)(),i=(0,u.GV)(C.eo),{fontsMap:s,globalFonts:n,workspaceFonts:l}=(0,y.II)(),r={globalFonts:n,workspaceFonts:l};if(!i)throw Error("Theme is undefined");let o=(0,d.useCallback)(t=>{let n=s[t],l=(0,eW.yi)(n),r=(0,eL.g9)(l,i.headingFontWeight||K.mI.heading)||K.mI.heading;e((0,C.CS)({font:t,weight:r,fontsMap:s}))},[e,s,i.headingFontWeight]),a=(0,d.useCallback)(t=>{let n=s[t],l=(0,eW.yi)(n),r=(0,eL.g9)(l,i.bodyFontWeight||K.mI.body)||K.mI.body;e((0,C.g6)({font:t,weight:r,fontsMap:s}))},[e,s,i.bodyFontWeight]),c=(0,d.useCallback)(i=>e((0,C.zs)({weight:i})),[e]),x=(0,d.useCallback)(i=>e((0,C.lm)({weight:i})),[e]),h=(0,d.useCallback)(()=>{let e=(0,S.Zi)();window.open(e,"_blank")},[]),p=s[i.headingFont||K.z8.headingFont]||s[K.z8.headingFont],j=s[i.bodyFont||K.z8.bodyFont]||s[K.z8.bodyFont],g=i.headingFontWeight||K.mI.heading,f=i.bodyFontWeight||K.mI.body;return(0,t.jsxs)(R.B,{children:[(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"PKjGhT"})})}),(0,t.jsxs)(eQ.T,{spacing:2,align:"stretch",children:[(0,t.jsx)(e$,{fonts:r,value:i.headingFont,updateValue:o,onFontUploadClick:h,weight:"bold",defaultFont:K.z8.headingFont,"data-testid":"custom-theme-heading-font-picker",my:0}),(0,t.jsx)(eq,{font:p,value:g,defaultWeight:700,updateValue:c,my:0}),(0,t.jsx)(i8,{}),(0,t.jsx)(sF,{children:(0,t.jsx)(sN,{variant:"heading"})})]})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"bGQplw"})})}),(0,t.jsxs)(eQ.T,{spacing:2,align:"stretch",children:[(0,t.jsx)(e$,{fonts:r,value:i.bodyFont,updateValue:a,onFontUploadClick:h,weight:"normal",defaultFont:K.z8.bodyFont,"data-testid":"custom-theme-body-font-picker",my:0}),(0,t.jsx)(eq,{font:j,value:f,defaultWeight:400,updateValue:x,my:0}),(0,t.jsx)(i3,{}),(0,t.jsx)(sF,{children:(0,t.jsx)(sN,{variant:"body"})})]})]}),(0,t.jsx)(e_.F,{mt:"4",colorScheme:"gray",children:(0,t.jsx)(m.E,{fontSize:"sm",children:(0,t.jsx)(b.x6,{id:"gXllrZ"})})})]})});sM.displayName="TypographySettings";let sz=[{name:()=>eF.Ru._({id:"EdQY6l"}),icon:D.tiU,key:"none"},{name:()=>eF.Ru._({id:"fVR7qN"}),icon:D.Jn3,key:"uppercase"}],sF=e=>{let{children:i}=e;return(0,t.jsx)(sy.n,{allowMultiple:!0,mt:0,mb:6,children:(0,t.jsxs)(sw.A,{border:"none",bg:"gray.50",borderRadius:"md",children:[(0,t.jsxs)(sC.J,{fontWeight:"500",ps:3,borderRadius:"md",children:[(0,t.jsx)(E.a,{as:"span",flex:"1",textAlign:"start",children:(0,t.jsx)(b.x6,{id:"sxkWRg"})}),(0,t.jsx)(sk.Q,{})]}),(0,t.jsx)(sS.v,{px:4,pb:2,children:i})]})})},sN=e=>{let{variant:i}=e,s=(0,u.GV)(C.eo),n=(0,u.jL)();if(!s)throw Error("Theme is undefined");let{letterSpacingHeading:l,letterSpacingBody:r,lineHeightHeading:o,lineHeightBody:c,fontSize:x,headingFontSize:h,headingTransform:p="none"}=s.config,m="heading"===i?l:r,j="heading"===i?o:c,f="heading"===i?sP.eL:sP.Uw,v="heading"===i?h:x,y=(0,d.useCallback)(e=>{"heading"===i?n((0,C.pG)({letterSpacing:e})):n((0,C.NS)({letterSpacing:e}))},[n,i]),w=(0,d.useCallback)(e=>{"heading"===i?n((0,C.h4)({lineHeight:e})):n((0,C.L7)({lineHeight:e}))},[n,i]),k=(0,d.useCallback)(e=>{"heading"===i?n((0,C.IA)({fontSize:e})):n((0,C.Gs)({fontSize:e}))},[n,i]),S=(0,d.useCallback)(e=>{n((0,C.Em)({transform:e}))},[n]);return(0,t.jsxs)(R.B,{py:2,minH:"100px",spacing:4,children:[(0,t.jsxs)(M.z,{children:[(0,t.jsxs)(E.a,{children:[(0,t.jsxs)(eA.l,{children:[(0,t.jsx)(b.x6,{id:"Wqh8xb"}),(0,t.jsx)(a.qT,{label:(0,t.jsx)(b.x6,{id:"d4Sact"}),ms:1.5})]}),(0,t.jsxs)(s_.M,{children:[(0,t.jsx)(sI.W,{pointerEvents:"none",color:"gray.600",children:(0,t.jsx)(P.g,{icon:D.$LH})}),(0,t.jsx)(sA.Q7,{min:1,max:2,step:.05,defaultValue:null!=j?j:"",onChange:(e,i)=>{""===e||isNaN(i)?w(void 0):w(sD()(i,1,2))},children:(0,t.jsx)(sA.OO,{bg:"white",ps:"var(--input-height)",pe:"var(--input-padding)",placeholder:f.toString(),textAlign:"end"})})]})]}),(0,t.jsxs)(E.a,{children:[(0,t.jsxs)(eA.l,{children:[(0,t.jsx)(b.x6,{id:"vhRvfF"}),(0,t.jsx)(a.qT,{label:(0,t.jsx)(b.x6,{id:"ov2xUH"}),ms:1.5})]}),(0,t.jsxs)(s_.M,{children:[(0,t.jsx)(sI.W,{pointerEvents:"none",color:"gray.600",children:(0,t.jsx)(P.g,{icon:D.myY})}),(0,t.jsx)(sA.Q7,{min:-10,max:10,step:1,defaultValue:m?100*m:"",onChange:(e,i)=>{""===e||isNaN(i)?y(void 0):y(sD()(i/100,-.1,.1))},children:(0,t.jsx)(sA.OO,{bg:"white",ps:"var(--input-height)",placeholder:"0",textAlign:"end"})}),(0,t.jsx)(sI.t,{pointerEvents:"none",color:"gray.600",children:"%"})]})]})]}),"body"!==i&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(E.a,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"A/6zEn"})}),(0,t.jsx)(g.e,{isAttached:!0,children:sz.map(e=>(0,t.jsx)(a.Tz,{label:e.name(),children:(0,t.jsx)(sR.K,{"aria-label":e.name(),icon:(0,t.jsx)(P.g,{icon:e.icon,fixedWidth:!0}),variant:p===e.key?"plainSelected":"plain",boxShadow:"none",onClick:()=>S(e.key)})},e.key))})]})}),(0,t.jsx)(sL,{value:v,setValue:k})]})},sL=e=>{let{value:i,setValue:s}=e,[n,l]=(0,d.useState)(!1),[r,o]=(0,d.useState)(i||1),c=(0,sO.lW)(s,300);return(0,t.jsxs)(E.a,{pb:"2",children:[(0,t.jsxs)(eA.l,{mb:"3",children:[(0,t.jsx)(b.x6,{id:"jIL7bk"})," ",(0,t.jsx)(a.qT,{label:(0,t.jsx)(b.x6,{id:"/qH3CQ"})})]}),(0,t.jsxs)(sE.Ap,{defaultValue:i,min:.75,max:1.25,step:.05,colorScheme:"trueblue",onChange:e=>{o(e),c(e)},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,t.jsx)(sE.hB,{children:(0,t.jsx)(sE.hJ,{})}),(0,t.jsx)(sE.d6,{value:1,h:"20px",w:"2px",bg:"gray.300",transform:"translateY(-50%) translateX(-50%)"}),(0,t.jsx)(a.Tz,{placement:"top",isOpen:n,label:"".concat(r.toFixed(2),"x"),shortcut:1===r?eF.Ru._({id:"ovBPCi"}):void 0,children:(0,t.jsx)(sE.OQ,{})})]})]})},sG=[{heading:{font:"Inter",weight:700,keywords:["sans-serif","bold"]},body:{font:"Inter",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"DM Sans",weight:600,keywords:["semi-bold","sans-serif"]},body:{font:"DM Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Overpass",weight:700,keywords:["sans-serif","bold"]},body:{font:"Overpass",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Barlow",weight:600,keywords:["narrow","semi-bold","sans-serif"]},body:{font:"Barlow",weight:400,keywords:["sans-serif","normal","narrow"]}},{heading:{font:"Nunito",weight:600,keywords:["semi-bold","fun","sans-serif","rounded"]},body:{font:"PT Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Lora",weight:400,keywords:["normal","serif"]},body:{font:"Source Sans 3",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Instrument Sans",weight:600,keywords:["semi-bold","sans-serif"]},body:{font:"Instrument Sans",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Roboto Slab",weight:400,keywords:["serif","slab-serif","normal"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Barlow",weight:700,keywords:["narrow","bold","sans-serif"]},body:{font:"Montserrat",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Libre Baskerville",weight:400,keywords:["serif","normal"]},body:{font:"DM Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Montserrat",weight:400,keywords:["normal","sans-serif"]},body:{font:"Heebo",weight:300,keywords:["light","sans-serif"]}},{heading:{font:"Prompt",weight:500,keywords:["sans-serif","bold"]},body:{font:"Mukta",weight:300,keywords:["sans-serif","light"]}},{heading:{font:"Inconsolata",weight:700,keywords:["monospace","serif","bold"]},body:{font:"Fira Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Fraunces",weight:500,keywords:["serif","fun","bold"]},body:{font:"Epilogue",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Gelasio",weight:400,keywords:["serif","normal"]},body:{font:"Lato",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Raleway",weight:400,keywords:["sans-serif","thin","normal"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Kanit",weight:300,keywords:["sans-serif","thin","normal"]},body:{font:"Martel Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Corben",weight:400,keywords:["normal","serif","wide","fun"]},body:{font:"Nobile",weight:400,keywords:["sans-serif","normal","narrow"]}},{heading:{font:"Crimson Pro",weight:700,keywords:["serif","bold"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Poppins",weight:300,keywords:["sans-serif","thin","normal"]},body:{font:"Roboto",weight:300,keywords:["thin","sans-serif","normal"]}},{heading:{font:"Red Hat Text",weight:400,keywords:["normal","sans-serif"]},body:{font:"Roboto",weight:300,keywords:["thin","sans-serif"]}},{heading:{font:"Gelasio",weight:400,keywords:["serif","normal"]},body:{font:"Gelasio",weight:400,keywords:["normal","serif"]}},{heading:{font:"Bitter",weight:500,keywords:["slab-serif","serif","normal"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Syne",weight:700,keywords:["wide","sans-serif","fun","bold"]},body:{font:"Arimo",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Roboto",weight:500,keywords:["sans-serif","narrow","semi-bold"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Playfair Display",weight:700,keywords:["serif","bold"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Quattrocento",weight:400,keywords:["thin","serif","normal"]},body:{font:"Quattrocento",weight:400,keywords:["serif","normal"]}},{heading:{font:"Montserrat",weight:700,keywords:["wide","bold","sans-serif"]},body:{font:"Source Sans 3",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Kanit",weight:400,keywords:["sans-serif","semi-bold","normal"]},body:{font:"Martel Sans",weight:300,keywords:["sans-serif","normal"]}},{heading:{font:"Lato",weight:700,keywords:["sans-serif","semi-bold","normal"]},body:{font:"Lato",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Fira Mono",weight:500,keywords:["narrow","monospace","semi-bold","normal"]},body:{font:"Fira Sans",weight:400,keywords:["sans-serif","narrow","normal"]}},{heading:{font:"Alexandria",weight:400,keywords:["wide","sans-serif","normal"]},body:{font:"Nobile",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Dela Gothic One",weight:400,keywords:["wide","bold","extrabold","sans-serif","fun"]},body:{font:"DM Sans",weight:400,keywords:["sans-serif","wide","normal"]}},{heading:{font:"Unbounded",weight:400,keywords:["normal","wide","sans-serif","fun"]},body:{font:"Cabin",weight:400,keywords:["wide","sans-serif"]}},{heading:{font:"Tomorrow",weight:600,keywords:["fun","bold","sans-serif"]},body:{font:"Tomorrow",weight:400,keywords:["fun","normal","sans-serif"]}},{heading:{font:"Roboto Mono",weight:500,keywords:["monospace","sans-serif","semi-bold"]},body:{font:"Roboto",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Syne",weight:700,keywords:["fun","semi-bold","bold","wide","fun"]},body:{font:"Overpass",weight:300,keywords:["normal","thin","sans-serif"]}},{heading:{font:"Syne",weight:800,keywords:["fun","wide","extrabold","bold","sans-serif"]},body:{font:"Syne",weight:400,keywords:["sans-serif","normal","wide"]}},{heading:{font:"Spline Sans",weight:700,keywords:["narrow","sans-serif","semi-bold"]},body:{font:"Barlow",weight:400,keywords:["narrow","sans-serif","normal"]}},{heading:{font:"Anton",weight:400,keywords:["narrow","sans-serif","bold","fun"]},body:{font:"Fira Sans",weight:400,keywords:["narrow","sans-serif","normal"]}},{heading:{font:"Unbounded",weight:700,keywords:["fun","bold","extrabold","wide","sans-serif"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Sora",weight:500,keywords:["serif","semi-bold"]},body:{font:"Noto Sans TC",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Libre Baskerville",weight:400,keywords:["serif","thin","normal"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"MuseoModerno",weight:500,keywords:["fun","sans-serif","semi-bold","bold"]},body:{font:"Source Sans 3",weight:400,keywords:["normal","sans-serif"]}},{heading:{font:"Merriweather",weight:700,keywords:["bold","serif"]},body:{font:"Open Sans",weight:400,keywords:["sans-serif","normal"]}},{heading:{font:"Alexandria",weight:600,keywords:["bold","wide","sans-serif"]},body:{font:"Sora",weight:300,keywords:["sans-serif","normal"]}},{heading:{font:"Patrick Hand",weight:400,keywords:["fun","handwriting","normal"]},body:{font:"Patrick Hand",weight:400,keywords:["fun","handwriting","normal"]}},{heading:{font:"Prata",weight:400,keywords:["serif","normal"]},body:{font:"Raleway",weight:400,keywords:["sans-serif","normal","fun"]}}],sB=()=>[{key:"all",label:(0,t.jsx)(b.x6,{id:"N40H+G"})},{key:"sans-serif",label:(0,t.jsx)(b.x6,{id:"cW+T4V"})},{key:"serif",label:(0,t.jsx)(b.x6,{id:"e5bnvv"})},{key:"monospace",label:(0,t.jsx)(b.x6,{id:"qJC2VT"})},{key:"fun",label:(0,t.jsx)(b.x6,{id:"rmN315"})},{key:"bold",label:(0,t.jsx)(b.x6,{id:"KmydK6"})},{key:"thin",label:(0,t.jsx)(b.x6,{id:"RGjFMI"})},{key:"wide",label:(0,t.jsx)(b.x6,{id:"I5S9ZE"})}],sU=(0,d.memo)(()=>{let{globalFonts:e}=(0,y.II)();return e.length?(0,t.jsx)(iQ,{defaultTab:(0,t.jsx)(sV,{}),customTab:(0,t.jsx)(sM,{})}):(0,t.jsx)(sW,{})});sU.displayName="FontsStep";let sW=(0,d.memo)(()=>(0,t.jsxs)(R.B,{spacing:4,children:[(0,t.jsxs)(M.z,{children:[(0,t.jsx)(sb.E,{height:7,flex:1}),(0,t.jsx)(sb.E,{height:7,flex:1})]}),(0,t.jsxs)(M.z,{children:[(0,t.jsx)(sb.E,{height:6,w:12}),(0,t.jsx)(sb.E,{height:6,w:12}),(0,t.jsx)(sb.E,{height:6,w:12})]}),(0,t.jsx)(iI.x,{mt:2,templateColumns:ik,gap:3,children:Array.from({length:4}).map((e,i)=>(0,t.jsx)(I.s,{px:2,children:(0,t.jsx)(sb.E,{mt:3,flex:1,height:20})},i))})]}));sW.displayName="FontsConfigSkeleton";let sV=(0,d.memo)(()=>{let{themeFontsMap:e,fontsMap:i}=(0,y.II)(),s=(0,u.jL)(),n=(0,u.GV)(C.eo),[l,r]=(0,d.useState)("all"),o=(0,d.useMemo)(()=>sG.filter(e=>"all"===l||null===l||e.heading.keywords.includes(l)),[l]),a=(0,d.useMemo)(()=>o.flatMap(i=>[e[i.heading.font],e[i.body.font]]).filter(Boolean),[o,e]),c=(0,d.useCallback)(e=>{s((0,C.BA)({fontPair:e,fontsMap:i}))},[s,i]),x=(0,d.useMemo)(()=>sB(),[]);if(!n)throw Error("Theme is undefined");return(0,t.jsxs)(R.B,{spacing:6,children:[(0,t.jsx)(iS.B,{children:x.map(e=>{let{key:i,label:s}=e;return(0,t.jsx)(i_.vw,{onClick:()=>{r(i)},colorScheme:l===i?"trueblue":"gray",cursor:"pointer",children:(0,t.jsx)(m.E,{children:s})},i)})}),(0,t.jsx)(iI.x,{templateColumns:ik,gap:3,children:o.map((i,s)=>{let l=n.headingFont===i.heading.font&&n.headingFontWeight===i.heading.weight&&n.bodyFont===i.body.font&&n.bodyFontWeight===i.body.weight,r=e[i.heading.font],o=e[i.body.font];return r&&o?(0,t.jsx)(sv,{isSelected:l,onClick:()=>c(i),heading:r,headingWeight:i.heading.weight,body:o,bodyWeight:i.body.weight,theme:n},s):null})}),(0,t.jsx)(eV.J,{fonts:a})]})});sV.displayName="FontsBuilderPicker";let sH=(0,d.memo)(()=>{let e=(0,u.jL)(),i=(0,u.GV)(C.$9);return(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"qy77B2"})}),(0,t.jsx)(E.a,{maxW:"min(100%, 300px)",children:(0,t.jsx)(e2,{value:i,onLogoUploadStart:()=>{e((0,C.QZ)())},updateValue:i=>{if(!i)return void e((0,C.Zw)());e((0,C.$k)({logoImage:(0,e8.yK)({result:i,isError:!1})}))},onLogoUploadFail:()=>{e((0,C.UY)())}})})]})});sH.displayName="LogoSettings";let sX=(0,d.memo)(()=>(0,t.jsx)(R.B,{spacing:6,alignItems:"center",children:(0,t.jsx)(E.a,{mx:"auto",maxW:"300px",children:(0,t.jsx)(sH,{})})}));sX.displayName="LogoStep";var s$=s(73689),sK=s(73867),sJ=s(27250),sq=s(59557);let sQ={position:"absolute",width:"104%",height:"104%",top:"-2%",left:"-2%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"transparent",backgroundSize:"cover",transition:"all 0.1s ease-out"},sZ=e=>{let{children:i}=e,s=(0,d.useRef)(null),n=(0,d.useRef)(null),l=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e=s.current,i=n.current,t=l.current;if(!e||!i||!t)return;let r=Array.from(t.children),o=r.length,a=s=>{let t=s.pageX,n=s.pageY,l=e.getBoundingClientRect(),a=e.clientWidth||e.offsetWidth||e.scrollWidth,d=e.clientHeight||e.offsetHeight||e.scrollHeight,c=.52-(t-l.left)/a,x=.52-(n-l.top)/d,u=n-l.top-d/2,h=t-l.left-a/2,p="rotateX(".concat((u-x)*.1,"deg) rotateY(").concat((c-h)*.07,"deg)"),m=180*Math.atan2(u,h)/Math.PI-90;m<0&&(m+=360),e.className.includes("over")&&(p+=" scale3d(1.07,1.07,1.07)"),e.style.transform=p,i.style.background="linear-gradient(".concat(m,"deg, rgba(255,255,255,").concat((n-l.top)/d*.4,") 0%,rgba(255,255,255,0) 80%)"),i.style.transform="translateX(".concat(c*o-.1,"px) translateY(").concat(x*o-.1,"px)"),r.forEach((e,i)=>{let s=o-i;e.style.transform="translateX(".concat(-(c*s*15),"px) translateY(").concat(-(x*s*15),"px)")})},d=()=>{e.className+=" over"},c=()=>{e.className=e.className.replace(" over",""),e.style.transform="",i.style.cssText="",r.forEach(e=>e.style.transform="")};return e.addEventListener("mousemove",a),e.addEventListener("mouseenter",d),e.addEventListener("mouseleave",c),()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseenter",d),e.removeEventListener("mouseleave",c)}}),(0,t.jsx)(sq.A,{children:e=>{let{width:r,height:o}=e;return(0,t.jsxs)(I.s,{ref:s,style:{perspective:"1600px",height:o,width:r,margin:"0 auto"},borderRadius:"md",transitionProperty:"all",transitionDuration:"normal",transitionTimingFunction:"ease-out",sx:{"&:hover .threeDImage-shadow":{shadow:"0 45px 100px rgba(14, 21, 47, 0.4), 0 16px 40px rgba(14, 21, 47, 0.4)"}},children:[(0,t.jsx)(I.s,{ref:l,bg:"white",sx:{position:"relative",width:"100%",height:"100%",borderRadius:"5px",overflow:"hidden",transformStyle:"preserve-3d"},children:Array.isArray(i)?i.map((e,i)=>(0,t.jsx)(E.a,{sx:sQ,"data-layer":i,pointerEvents:"none",children:e},i)):(0,t.jsx)(E.a,{sx:sQ,"data-layer":0,pointerEvents:"none",children:i})}),(0,t.jsx)(E.a,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"5px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0) 60%)",pointerEvents:"none"},ref:n}),(0,t.jsx)(E.a,{sx:{position:"absolute",top:"5%",left:"5%",width:"90%",height:"90%",transition:"all 0.2s ease-out",boxShadow:"0 8px 30px rgba(14, 21, 47, 0.6)",zIndex:-1},className:"threeDImage-shadow"})]})}})};var sY=s(9236);let s0=e=>{let{title:i,description:s,children:n}=e;return(0,t.jsxs)(R.B,{w:"100%",alignItems:"flex-start",children:[(0,t.jsxs)(R.B,{spacing:1,w:"100%",children:[(0,t.jsx)(m.E,{fontSize:"lg",fontWeight:"semibold",children:i}),(0,t.jsx)(m.E,{fontSize:"xs",color:"gray.600",children:s})]}),n]})},s1=(0,d.memo)(()=>{let{user:e}=(0,O.ur)(),i=(0,u.GV)(C.eo)||sY.S,s=(0,e3.Ik)((0,e3.H7)(i)),n=(0,u.GV)(C.sv),l=(0,u.jL)(),r=(0,d.useRef)(null),o=(0,d.useCallback)(e=>{l((0,C.qv)({name:e.target.value}))},[l]);(0,d.useEffect)(()=>{r.current&&(r.current.focus(),r.current.select())},[]);let[a,c]=(0,d.useState)(!1),{reward:x}=(0,s$.bS)("rewardId","confetti",{lifetime:200,angle:90,decay:.91,spread:90,startVelocity:45,elementCount:50,elementSize:10,colors:(0,e3.ND)(i).map(e3.Ik)});(0,d.useEffect)(()=>{let e=setTimeout(()=>{c(!0)},400),i=setTimeout(()=>{x()},550);return()=>{clearTimeout(i),clearTimeout(e)}},[]);let h="260px";return(0,t.jsxs)(R.B,{spacing:10,alignItems:"center",children:[(0,t.jsxs)(I.s,{pos:"relative",flex:1,direction:"column",w:"100%",children:[(0,t.jsx)(I.s,{h:h,align:"center",justify:"center",pos:"absolute",zIndex:0,w:"100%",children:(0,t.jsx)(I.s,{w:2,h:2,id:"rewardId"})}),(0,t.jsx)(E.a,{w:h,h:h,mx:"auto",bg:s,borderRadius:"md",borderWidth:"1px",opacity:+!!a,transform:"scale(".concat(a?1:.9,")"),transitionProperty:"common",transitionDuration:"slow",transitionTimingFunction:"cubic-bezier(0.68,-0.55,0.27,1.55)",children:(0,t.jsx)(sZ,{children:(0,t.jsxs)(E.a,{bg:s,w:"100%",pos:"relative",p:12,pb:24,h:"100%",children:[(0,t.jsx)(sJ.q,{theme:i,transform:"scale(1.2)",position:"relative",bottom:"7",left:"-3.5",w:"200px",boxShadow:"none"}),(0,t.jsxs)(R.B,{pos:"absolute",bottom:0,left:5,bg:"white",w:"108%",mx:"-8%",p:"8%",borderTopWidth:"1px",color:"gray.800",children:[(0,t.jsx)(m.E,{noOfLines:1,children:n||(0,t.jsx)(b.x6,{id:"rzKWuu"})}),(0,t.jsx)(sK.S,{createdByYou:!0,createdByName:null==e?void 0:e.displayName,createdByProfileImageUrl:null==e?void 0:e.profileImageUrl,timestampDescription:"Just now"})]})]})})})]}),(0,t.jsx)(E.a,{maxW:"100%",mx:"0 auto",w:"500px",children:(0,t.jsx)(s0,{title:(0,t.jsx)(b.x6,{id:"HZ7fEu"}),children:(0,t.jsx)(eR.p,{mx:"auto",size:"lg",ref:r,value:n,onChange:o,placeholder:eF.Ru._({id:"HZ7fEu"})})})}),(0,t.jsx)(E.a,{maxW:"100%",mx:"0 auto",w:"500px",children:(0,t.jsx)(s6,{})})]})});s1.displayName="ThemeNameStep";let s6=()=>{let e=(0,en.st)(),i=(0,d.useCallback)(i=>{null==e||e.track(en.VV.THEME_RATED,{rating:i,method:"builder"})},[e]),s=(0,d.useCallback)((i,s,t)=>{null==e||e.track(en.VV.THEME_FEEDBACK,{feedback:s,tags:t,rating:i,method:"builder"})},[e]);return(0,t.jsx)(e9.No,{feedbackTags:s5,trackRating:i,trackFeedback:s})},s5=[{key:"wrong-colors",label:(0,t.jsx)(b.x6,{id:"6dn0qr"})},{key:"wrong-fonts",label:(0,t.jsx)(b.x6,{id:"fe43sX"})},{key:"wrong-design",label:(0,t.jsx)(b.x6,{id:"z3jUzS"})},{key:"missing-logo",label:(0,t.jsx)(b.x6,{id:"4Z/w7+"})},{key:"other",label:(0,t.jsx)(b.x6,{id:"aQyGJc"})}],s2={colors:i7,fonts:sU,design:sf,logo:sX,themeName:s1},s4=e=>{let{onContinueClick:i}=e;return(0,t.jsxs)(R.B,{spacing:"6",children:[(0,t.jsx)(T._,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/39bd9e9e4ae347a39de0f1d27da20a52/original/Frame-1-32.png"}),(0,t.jsx)(m.E,{fontSize:"lg",children:(0,t.jsx)(b.x6,{id:"oXq4Vi"})}),(0,t.jsx)(g.e,{justifyContent:"center",children:(0,t.jsx)(f.$,{minW:"250px",variant:"solid",onClick:i,rightIcon:(0,t.jsx)(P.g,{icon:D.dmS}),children:(0,t.jsx)(b.x6,{id:"EsKTam"})})})]})},s3=e=>{let{step:i,setStep:s}=e,n=(0,es.d)();if("intro"===i)return(0,t.jsx)(s4,{onContinueClick:()=>{s("colors"),n({title:(0,t.jsx)(b.x6,{id:"okvzsv"}),position:"top",status:"success",duration:2e3,isClosable:!0})}});let l=iC[i],r=s2[i];return(0,t.jsxs)(R.B,{spacing:5,children:[(0,t.jsx)(m.E,{textAlign:"center",size:"md",color:"gray.600",children:l.description}),(0,t.jsx)(E.a,{children:(0,t.jsx)(r,{})})]})};var s8=s(1139);let s9=e=>{let{step:i,setStep:s}=e,n=Object.keys(iC).indexOf(i);return(0,t.jsx)(io.C,{index:n,w:"260px",minW:"0",gap:"0",size:"md",children:Object.entries(iC).map((e,i)=>{let[n,{name:l,icon:r}]=e;return(0,t.jsx)(a.Tz,{label:l,children:(0,t.jsxs)(ia.p,{gap:"0",children:[(0,t.jsx)(id.S,{as:f.$,variant:"ghost",shadow:"none",size:"sm",onClick:()=>s(n),cursor:"pointer",borderWidth:"0px",bg:"white",sx:{"[data-status=incomplete] &":{color:"gray.600"}},children:(0,t.jsx)(ic.x,{complete:(0,t.jsx)(P.g,{icon:r}),incomplete:(0,t.jsx)(P.g,{icon:r}),active:(0,t.jsx)(P.g,{icon:r})})}),(0,t.jsx)(ip.m,{mx:"0 !important"})]},i)},i)})})},s7=e=>{let{step:i,setStep:s,onFinishClick:n,errorMessage:l,isThemeSaving:r}=e,o=(0,d.useCallback)(()=>{let e=Object.keys(iC).indexOf(i)-1;s(Object.keys(iC)[e])},[i,s]),c=(0,d.useCallback)(()=>{let e=Object.keys(iC).indexOf(i)+1;s(Object.keys(iC)[e])},[i,s]),x="colors"===i,u="themeName"===i,h="colors"!==i,p={base:void 0,lg:"130px"};return(0,t.jsxs)(R.B,{direction:"row",justifyContent:x?"flex-end":"space-between",alignItems:"center",position:"relative",w:"100%",children:[(0,t.jsx)(s8.z,{in:h,children:(0,t.jsx)(sR.K,{variant:"outline","aria-label":eF.Ru._({id:"CKyk7Q"}),icon:(0,t.jsx)(P.g,{icon:D.Wzs}),onClick:o,pointerEvents:h?"auto":"none"})}),(0,t.jsx)(A.h,{}),(0,t.jsx)(s9,{step:i,setStep:s}),(0,t.jsx)(A.h,{}),u?(0,t.jsx)(a.Tz,{isDisabled:!l,label:l,shouldWrapChildren:!0,children:(0,t.jsx)(f.$,{onClick:n,variant:"solid",isLoading:r,isDisabled:!!l,rightIcon:(0,t.jsx)(P.g,{icon:D.e68}),minW:p,children:(0,t.jsx)(b.x6,{id:"JmZ/+d"})})}):(0,t.jsx)(f.$,{onClick:c,variant:"solid",rightIcon:(0,t.jsx)(P.g,{icon:D.XkK}),minW:p,children:(0,t.jsx)(b.x6,{id:"xGVfLh"})})]})},te=e=>{let{onComplete:i,onExitClick:s}=e,[n,l]=(0,d.useState)("colors"),r=(0,u.GV)(C.sv),o=(0,u.GV)(C.D6);er("builder");let{persistTheme:a,isThemeSaving:c}=el({onComplete:i,flow:"builder"}),x=(0,d.useMemo)(()=>r?o?(0,t.jsx)(b.x6,{id:"0y5u1g"}):void 0:(0,t.jsx)(b.x6,{id:"OL7UgX"}),[r,o]),h=(0,d.useCallback)(()=>{r&&a()},[r,a]),p=iC[n];return(0,t.jsxs)(ei,{children:[(0,t.jsx)(N,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(B,{children:[(0,t.jsx)(L,{children:"intro"===n?(0,t.jsx)(b.x6,{id:"pxh+PI"}):(0,t.jsxs)(M.z,{justifyContent:"center",color:"deepocean.950",children:[(0,t.jsx)(P.g,{icon:p.icon}),(0,t.jsx)(iv.D,{size:"md",fontWeight:"600",children:p.name})]})}),"colors"===n&&(0,t.jsx)(G,{onClick:()=>{s&&s()},leftIcon:D.CeG,children:(0,t.jsx)(b.x6,{id:"ydzS9x"})})]}),(0,t.jsx)(W,{children:(0,t.jsx)(s3,{step:n,setStep:l})}),"intro"!==n&&(0,t.jsx)(U,{children:(0,t.jsx)(s7,{step:n,setStep:l,errorMessage:x,isThemeSaving:c,onFinishClick:h})})]})}),(0,t.jsx)(V,{children:(0,t.jsx)(iw,{})})]})};var ti=s(34832),ts=s(17074),tt=function(e){return e.DISALLOWED_DOMAIN="DISALLOWED_DOMAIN",e.USE_GOOGLE_IMPORT="USE_GOOGLE_IMPORT",e.USE_FILE_IMPORT="USE_FILE_IMPORT",e.INVALID_URL="INVALID_URL",e}(tt||{});let tn=()=>{let[e,i]=(0,d.useState)(0),[s,n]=(0,d.useState)(null),[l,r]=(0,d.useState)(""),[o,a]=(0,d.useState)(""),[c,x]=(0,d.useState)(!1),[u,h]=(0,d.useState)(!1),p=(0,es.d)(),{createTheme:j}=el({flow:"generate"}),g=(0,d.useCallback)(e=>{let i=(0,O.gx)();if(!i)return void console.error("Could not find workspace id");if(0===e.length)return;let s=e.filter(e=>e.type.startsWith("image/"));if(0===s.length)return void p({title:(0,t.jsx)(b.x6,{id:"eC1gV9"}),description:(0,t.jsx)(b.x6,{id:"wdZZIf"}),status:"error",duration:3e3,isClosable:!0});let l=s[0],r=URL.createObjectURL(l),o={id:crypto.randomUUID(),src:r,name:l.name,isUploading:!0};n(o),(0,eZ.QM)(l,i,{onUploadComplete:e=>{n(i=>(null==i?void 0:i.id)===o.id?{...i,src:e.src,isUploading:!1}:i)},onUploadFailed:()=>{n(null),p({title:(0,t.jsx)(b.x6,{id:"b3Thhd"}),description:(0,t.jsx)(b.x6,{id:"nkNfWu"}),status:"error",duration:3e3,isClosable:!0})}},"node")},[p]),{inputElement:v,onClick:y}=(0,ts.c)({handleFilesCallback:g,multiple:!1,accept:"image/*"}),C=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h(!0)},[]),k=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h(!1)},[]),S=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h(!1);let i=Array.from(e.dataTransfer.files);i.length>0&&g(i)},[g]),_=(0,d.useCallback)(e=>({workspaceId:(0,O.gx)(),name:e.name,headingFont:e.headingFont,headingFontWeight:e.headingFontWeight,bodyFont:e.bodyFont,bodyFontWeight:e.bodyFontWeight,config:e.config,priority:1}),[]),A=(0,d.useCallback)(async()=>{if(0!==e||s&&!s.isUploading){if(1===e&&!l.trim())return void p({title:"URL Required",description:"Please enter a website URL",status:"error",duration:3e3,isClosable:!0});x(!0);try{let i,n,r=(0,O.gx)();if(0===e)i=s.src;else{let e=await fetch("".concat(eu.$.API_HOST,"/ai/screenshot/webpage"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:l.trim(),workspaceId:r}),credentials:"include"});if(!e.ok){let i=await e.json();throw Error((null==i?void 0:i.message)||"Screenshot failed: ".concat(e.status))}i=(await e.json()).imageUrl}let a=await (0,ti.K8)({promptKey:"GenerateThemeFromInput",variables:{inputType:"image",imageUrl:i,prompt:o||void 0}});console.log("result",a);try{n="string"==typeof a?JSON.parse(a):a}catch(e){throw console.error("Failed to parse AI response:",e),Error("Invalid AI response format")}n.name&&""!==n.name.trim()||(n.name="AI Generated Theme ".concat(new Date().toLocaleDateString()));let d=_(n),c=await j(d);if(!c)throw Error("Theme creation failed");c.name||(console.warn("Created theme is missing name, adding fallback"),c.name=d.name||"Untitled Theme"),p({title:(0,t.jsx)(b.x6,{id:"IoSkQ0"}),description:(0,t.jsx)(b.x6,{id:"e6Zq4g"}),status:"success",duration:3e3,isClosable:!0}),(0,eo.vd)({theme:c})}catch(s){console.error("Theme generation failed:",s);let e=(0,t.jsx)(b.x6,{id:"fXdlhE"}),i=(0,t.jsx)(b.x6,{id:"PQa7+H"});"DISALLOWED_DOMAIN"===s.message?(e=(0,t.jsx)(b.x6,{id:"lHX4lA"}),i=(0,t.jsx)(b.x6,{id:"URSRoC"})):"INVALID_URL"===s.message?(e=(0,t.jsx)(b.x6,{id:"sBZMWb"}),i=(0,t.jsx)(b.x6,{id:"oZDaL1"})):"USE_FILE_IMPORT"===s.message&&(e=(0,t.jsx)(b.x6,{id:"tIpDrH"}),i=(0,t.jsx)(b.x6,{id:"6/x2q3"})),p({title:e,description:i,status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}}},[e,s,l,o,p,_,j]),M=!c&&(0===e&&s&&!s.isUploading||1===e&&l.trim());return(0,t.jsxs)(E.a,{pt:"5vh",minH:"100vh",bg:"titanium.50",children:[(0,t.jsx)(z.m,{maxW:"2xl",children:(0,t.jsxs)(R.B,{spacing:"8",children:[(0,t.jsxs)(eQ.T,{spacing:"4",children:[(0,t.jsx)(f.$,{leftIcon:(0,t.jsx)(P.g,{icon:D.CeG}),variant:"ghost",alignSelf:"flex-start",onClick:()=>{w.R.emit("setThemeConfigurationView",{view:"splash"})},children:(0,t.jsx)(b.x6,{id:"iH8pgl"})}),(0,t.jsx)(iv.D,{as:"h1",variant:"brand",fontWeight:"600",size:"2xl",textAlign:"center",letterSpacing:"tight",children:(0,t.jsx)(b.x6,{id:"0Vpuih"})}),(0,t.jsx)(m.E,{textAlign:"center",color:"gray.600",maxW:"md",children:(0,t.jsx)(b.x6,{id:"WnmPO6"})})]}),(0,t.jsxs)(iX.t,{index:e,onChange:i,variant:"enclosed",colorScheme:"blue",children:[(0,t.jsxs)(i$.w,{children:[(0,t.jsx)(iK.o,{children:(0,t.jsx)(b.x6,{id:"lnCMdg"})}),(0,t.jsx)(iK.o,{children:(0,t.jsx)(b.x6,{id:"XYcw7G"})})]}),(0,t.jsxs)(iJ.T,{children:[(0,t.jsx)(iq.K,{px:"0",py:"6",children:s?(0,t.jsxs)(eQ.T,{spacing:"4",children:[(0,t.jsxs)(E.a,{position:"relative",borderRadius:"lg",overflow:"hidden",bg:"white",boxShadow:"md",maxW:"md",children:[(0,t.jsx)(T._,{src:s.src,alt:s.name,maxH:"300px",objectFit:"contain",w:"100%"}),s.isUploading&&(0,t.jsx)(I.s,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",bg:"blackAlpha.600",align:"center",justify:"center",children:(0,t.jsx)(m.E,{color:"white",fontWeight:"600",children:(0,t.jsx)(b.x6,{id:"GxkJXS"})})})]}),(0,t.jsx)(f.$,{variant:"ghost",size:"sm",onClick:y,isDisabled:s.isUploading,children:(0,t.jsx)(b.x6,{id:"JVx8tz"})})]}):(0,t.jsxs)(I.s,{direction:"column",align:"center",justify:"center",p:"12",border:"2px dashed",borderColor:u?"blue.400":"gray.300",borderRadius:"lg",bg:u?"blue.50":"white",cursor:"pointer",_hover:{borderColor:"blue.400",bg:"blue.50"},onClick:y,onDragOver:C,onDragLeave:k,onDrop:S,transition:"all 0.2s",children:[(0,t.jsx)(P.g,{icon:D.JmV,size:"3x",color:"#A0AEC0"}),(0,t.jsx)(m.E,{mt:"4",fontSize:"lg",fontWeight:"600",color:"gray.700",children:u?(0,t.jsx)(b.x6,{id:"FGEMuN"}):(0,t.jsx)(b.x6,{id:"gumZGX"})}),(0,t.jsx)(m.E,{mt:"2",fontSize:"sm",color:"gray.500",children:(0,t.jsx)(b.x6,{id:"8Sd8uY"})})]})}),(0,t.jsx)(iq.K,{px:"0",py:"6",children:(0,t.jsxs)(eQ.T,{spacing:"4",children:[(0,t.jsx)(eR.p,{type:"url",placeholder:"https://example.com",value:l,onChange:e=>r(e.target.value),size:"lg",borderRadius:"lg",bg:"white",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px #4299E1"}}),(0,t.jsx)(m.E,{fontSize:"sm",color:"gray.500",textAlign:"center",children:(0,t.jsx)(b.x6,{id:"T75hMs"})})]})})]})]}),(s||1===e&&l.trim())&&(0,t.jsxs)(eQ.T,{spacing:"4",children:[(0,t.jsxs)(E.a,{w:"100%",children:[(0,t.jsx)(m.E,{fontWeight:"600",mb:"2",children:(0,t.jsx)(b.x6,{id:"TqAsbe"})}),(0,t.jsx)(eR.p,{placeholder:eF.Ru._({id:"G3eMGm"}),value:o,onChange:e=>a(e.target.value),bg:"white"}),(0,t.jsx)(m.E,{fontSize:"sm",color:"gray.500",mt:"1",children:(0,t.jsx)(b.x6,{id:"PbBdmw"})})]}),(0,t.jsx)(f.$,{leftIcon:(0,t.jsx)(P.g,{icon:eH.Ys0}),colorScheme:"blue",size:"lg",onClick:A,isLoading:c,loadingText:"Generating theme...",isDisabled:!M,children:(0,t.jsx)(b.x6,{id:"jVFVXt"})})]})]})}),v]})};var tl=s(94497),tr=s(68301);let to=(e,i)=>({build:{label:(0,t.jsx)(b.x6,{id:"abydST"}),description:(0,t.jsx)(b.x6,{id:"n1Ux1f"}),imageComponent:(0,t.jsx)(I.s,{h:"100%",bg:"purple.200",w:"100%",align:"center",justify:"center",color:"purple.600",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.1)"},children:(0,t.jsx)(P.g,{icon:eH.l8N,size:"5x"})})},import:{label:(0,t.jsx)(b.x6,{id:"F6aY4g"}),description:(0,t.jsx)(b.x6,{id:"G++9tI"}),imageComponent:(0,t.jsx)(I.s,{h:"100%",bg:e?"teal.200":"gray.200",w:"100%",align:"center",justify:"center",color:e?"teal.600":"gray.600",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.1)"},children:(0,t.jsx)(P.g,{icon:eH.$MS,size:"5x"})}),isComingSoon:!e,isBeta:!0},...i?{generate:{label:(0,t.jsx)(b.x6,{id:"QKDyrj"}),description:(0,t.jsx)(b.x6,{id:"dwMAyM"}),imageComponent:(0,t.jsx)(I.s,{h:"100%",bg:"orange.200",w:"100%",align:"center",justify:"center",color:"orange.600",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.1)"},children:(0,t.jsx)(P.g,{icon:eH.Ys0,size:"5x"})}),isBeta:!0}}:{}}),ta=()=>{let e=(0,tr.u)("themeImportAi"),i=(0,tr.u)("generateTheme"),s=to(e,i);return(0,t.jsx)(E.a,{pt:"5vh",minH:"100vh",bg:"titanium.50",children:(0,t.jsx)(z.m,{maxW:"3xl",children:(0,t.jsxs)(R.B,{spacing:"8",children:[(0,t.jsx)(iv.D,{as:"h1",variant:"brand",fontWeight:"600",size:"2xl",textAlign:"center",letterSpacing:"tight",children:(0,t.jsx)(b.x6,{id:"FiwgR9"})}),(0,t.jsx)(R.B,{direction:"row",justify:"center",align:"center",alignItems:"stretch",spacing:"4",children:Object.entries(s).filter(e=>{let[s]=e;return"generate"!==s||i}).map(e=>{let[i,s]=e;return(0,t.jsx)(tl.V,{"data-testid":"splash-go-to-".concat(i),label:s.label,description:s.description,imageUrl:s.thumbnail,imageComponent:s.imageComponent,isBeta:s.isBeta,onClick:()=>{w.R.emit("setThemeConfigurationView",{view:i})},ctaIcon:(0,t.jsx)(P.g,{icon:D.dmS}),ctaLabel:(0,t.jsx)(b.x6,{id:"xGVfLh"})},i)})}),(0,t.jsx)(m.E,{textAlign:"center",color:"gray.600",children:(0,t.jsx)(b.x6,{id:"ekvthG",components:{0:(0,t.jsx)(f.$,{"data-testid":"splash-go-to-editor",fontWeight:"600",variant:"link",color:"gray.900",textDecoration:"underline",onClick:()=>{w.R.emit("setThemeConfigurationView",{view:"editor"})}})}})})]})})})};var td=s(74676),tc=s(36218),tx=s(2241),tu=s(83817),th=s.n(tu),tp=s(58495),tm=s(8266),tj=s(53587),tg=s(83743),tf=s(68364),tb=s(45574);s(7929),s(1136);let tv=e=>{let{uploadedImages:i,setUploadedImages:s,setIsLoading:n}=e,l=(0,u.GV)(e1.aQ),{currentWorkspace:r}=(0,O.ur)(),{orgId:o,templateId:c}=(0,y.PJ)(l||(null==r?void 0:r.id),"themeBackground"),x=(0,es.d)(),[h,p]=(0,d.useState)(0),[j,g]=(0,d.useState)(!1),f=(0,d.useCallback)(e=>{let{file:i,tempUrl:t}=e;n(!0);let l=t;i.type&&(0,e5.aI)(i.type)&&(l="HEIC_tempId_".concat((0,tp.Ak)())),s(e=>[...e,{tempUrl:l,name:i.name,src:null,showPlaceholder:!0,uploadStatus:eY.A.Uploading}])},[n,s]),v=(0,d.useCallback)(e=>{s(i=>i.map(i=>i.name===e.name?{...i,tempUrl:null,...(0,tb.yK)({result:e,isError:!1})}:i)),p(e=>e+1)},[s]);(0,d.useEffect)(()=>{n(!i.every(e=>"optimized"===e.uploadResultStep))},[n,i]);let w=(0,d.useCallback)(()=>{x({title:"Error uploading images, please try again",status:"error",duration:3e3,isClosable:!0}),p(e=>e+1)},[x]),C=(0,d.useMemo)(()=>{if(!o)throw Error("Tried uploading an image with no orgId");return eZ.Fk.createUppyInstance(o,{onUploadStart:f,onUploadComplete:v,onUploadFailed:w},"themeBackground",50,"image",c)},[h,o,f,v,w,c]),k=()=>(0,t.jsxs)(E.a,{pos:"relative",w:"100%",h:"100%",children:[(0,t.jsx)(I.s,{pos:"absolute",inset:0,justify:"center",align:"center",zIndex:1,pointerEvents:"none",mt:-14,color:"gray.600",children:(0,t.jsx)(P.g,{icon:sn.vMo,size:"3x"})}),o&&(0,t.jsx)(tf.OX,{width:"100%",note:eF.Ru._({id:"7TtsoC"}),uppy:C,locale:{strings:{browse:eF.Ru._({id:"wZ9s+A"})}}})]});return i.length>0?(0,t.jsxs)(eQ.T,{align:"flex-start",spacing:4,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},children:[j&&(0,t.jsx)(k,{}),(0,t.jsx)(tg.r,{gap:2,columns:{base:2,"2xl":3},children:i.map(e=>{let{src:i,meta:n,name:l,tempUrl:r}=e||{},o=i?(0,e5.bI)(i,{width:500}):void 0;return(0,t.jsxs)(R.B,{spacing:1,position:"relative",role:"group",children:[(0,t.jsx)(T._,{src:o||r||"",alt:"",ignoreFallback:!0,borderRadius:"md"}),(0,t.jsx)(a.Tz,{label:(0,t.jsx)(b.x6,{id:"ZTnXof"}),placement:"top",children:(0,t.jsx)(sR.K,{"aria-label":eF.Ru._({id:"Rz0Yis"}),icon:(0,t.jsx)(P.g,{icon:D.yLS}),onClick:()=>{s(i=>i.filter(i=>i.name!==e.name))},isRound:!0,position:"absolute",top:1,right:1,size:"sm",color:"red.600",opacity:0,_hover:{color:"red.600"},_groupHover:{opacity:1}})}),n&&n.width&&n.height&&(0,t.jsxs)(m.E,{fontSize:"xs",children:[n.width,"\xd7",n.height,"px"]}),l&&(0,t.jsx)(m.E,{fontSize:"xs",lineHeight:4,children:l})]},e.tempUrl)})})]}):(0,t.jsx)(k,{})};var ty=s(49172);let tw=e=>e.backgroundType===iP.h.IMAGE,tC={...tm.cJ,accentId:void 0},tk=e=>{let{theme:i,accentImages:s,updateAccentImages:n}=e,[l,r]=(0,d.useState)(!1),[o,a]=(0,d.useState)(null),[c,x]=(0,d.useState)(null),u=o&&!!o.accentId,h=(0,tr.u)("bulkUploadAccentImages"),p=(0,d.useCallback)(()=>{x(tC),a(tC)},[]),m=(0,d.useCallback)(()=>{a(null),x(null)},[]),j=(0,d.useCallback)(e=>{let i=e||o;if(!i)return;let t={...i,source:tj.j,originalSource:i.source,accentId:(0,tp.Ak)()},l=s||[];if(u){let e=l.findIndex(e=>e.accentId===o.accentId);if(-1===e)return void console.warn("[AccentImagePicker] Could not find accent image to edit");n({accentBackgrounds:[...l.slice(0,e),t,...l.slice(e+1)]})}else n({accentBackgrounds:[...l,t]});m()},[s,o,u,m,n]),v=(0,d.useCallback)(e=>{n({accentBackgrounds:(s||[]).filter(i=>i.accentId!==e.accentId)})},[s,n]),y=(0,d.useCallback)(e=>{x({...e,source:e.originalSource}),a({...e,source:e.originalSource})},[]),w=(0,d.useCallback)(e=>{if(e.source===eZ.ae.key||e.source===eZ.Pl.key)return void j(e);if(e.source===eZ.mx.key){var i,s,t,n;(null==(i=e.image)?void 0:i.uploadStatus)===eY.A.Uploading?r(!0):(null==(s=e.image)?void 0:s.uploadStatus)===eY.A.Done&&(null==(t=e.image)?void 0:t.uploadResultStep)==="optimized"?r(!1):(null==(n=e.image)?void 0:n.uploadStatus)===eY.A.Error&&r(!1)}a(e)},[j]),C=(0,d.useMemo)(()=>!th()(o,c),[o,c]),k=(0,e3.Mw)(i),[S,_]=(0,d.useState)([]),[I,A]=(0,d.useState)(!1),E=(0,d.useCallback)(()=>{_([]),A(!1)},[]),T=(0,d.useCallback)(()=>{n({accentBackgrounds:[...S.map(e=>({type:iP.h.IMAGE,source:tj.j,originalSource:"image.custom",image:e,accentId:(0,tp.Ak)()})),...s||[]]}),E()},[S,s,n,E]);return o?(0,t.jsxs)(R.B,{p:6,children:[(0,t.jsx)(i4,{setBackground:w,background:o,isValidSource:tw,defaultMessage:(0,t.jsxs)(e_.F,{children:[(0,t.jsx)(iY._,{}),(0,t.jsx)(b.x6,{id:"VPwqDS"})]}),isDark:k}),(0,t.jsxs)(g.e,{pt:6,display:"flex",children:[(0,t.jsx)(f.$,{variant:"ghost",onClick:m,children:(0,t.jsx)(b.x6,{id:"dEgA5A"})}),(0,t.jsx)(f.$,{variant:"solid",onClick:()=>j(),isLoading:l,isDisabled:!C,flex:1,children:u?(0,t.jsx)(b.x6,{id:"tfDRzk"}):(0,t.jsx)(b.x6,{id:"B6vyEa"})})]})]}):(0,t.jsxs)(R.B,{spacing:6,children:[(0,t.jsxs)(R.B,{spacing:3,children:[(0,t.jsx)(f.$,{leftIcon:(0,t.jsx)(P.g,{icon:D.QLR}),alignSelf:"flex-start",onClick:p,children:(0,t.jsx)(b.x6,{id:"5phU36"})}),h&&(0,t.jsx)(tv,{uploadedImages:S,setUploadedImages:_,setIsLoading:A}),s&&0!=s.length&&(0,t.jsx)(ty.A,{accentImages:s,isDark:k,handleDelete:v,handleItemClick:y,editType:"themeBackground"})]}),S.length>0&&(0,t.jsxs)(g.e,{display:"flex",w:"100%",bottom:0,left:0,bg:"white",py:3,px:6,borderTop:"1px",borderColor:"gray.300",children:[(0,t.jsx)(f.$,{variant:"ghost",onClick:E,children:(0,t.jsx)(b.x6,{id:"dEgA5A"})}),(0,t.jsx)(f.$,{variant:"solid",onClick:T,isLoading:I,flex:1,children:(0,t.jsx)(b.x6,{id:"elVIdl",values:{0:S.length}})})]})]})},tS=(0,d.memo)(()=>{let e=(0,u.jL)(),i=(0,u.GV)(C.eo);if(!i)throw Error("Theme is undefined");return(0,t.jsxs)(iX.t,{variant:"soft-rounded",isFitted:!0,size:"sm",children:[(0,t.jsxs)(i$.w,{children:[(0,t.jsx)(iK.o,{children:(0,t.jsx)(b.x6,{id:"O+LXs1"})}),(0,t.jsx)(iK.o,{children:(0,t.jsx)(b.x6,{id:"COXEr5"})})]}),(0,t.jsxs)(iJ.T,{children:[(0,t.jsx)(iq.K,{px:"0",children:(0,t.jsxs)(R.B,{children:[(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"Jvf2ff"})}),(0,t.jsx)(eI.eK,{mb:"4",children:(0,t.jsx)(b.x6,{id:"nM7mjF"})}),(0,t.jsx)(tc.T,{defaultValue:i.config.stylePrompt,onChange:i=>{e((0,C.jI)({stylePrompt:i.target.value}))}})]}),(0,t.jsxs)(R.B,{children:[(0,t.jsx)(m.E,{children:(0,t.jsx)(b.x6,{id:"voRH7M"})}),(0,t.jsx)(M.z,{alignItems:"flex-start",spacing:4,children:t_.map((e,i)=>(0,t.jsxs)(R.B,{flex:"1",children:[(0,t.jsx)(T._,{src:e.url,borderRadius:"md"}),(0,t.jsxs)(m.E,{fontSize:"xs",fontFamily:"monospace",children:[(0,t.jsxs)(tx.B.span,{color:"gray.500",children:[e.prompt(),","]})," ",(0,t.jsx)(tx.B.span,{fontWeight:"600",children:e.stylePrompt()})]})]},i))})]})]})}),(0,t.jsxs)(iq.K,{px:"0",children:[(0,t.jsx)(eI.MJ,{children:(0,t.jsx)(eI.eK,{mb:"4",children:(0,t.jsx)(b.x6,{id:"0imEek"})})}),(0,t.jsx)(tk,{accentImages:i.config.accentBackgrounds,updateAccentImages:i=>{let{accentBackgrounds:s}=i;return e((0,C.r4)({accentBackgrounds:s}))},theme:i})]})]})]})});tS.displayName="AccentImagesSettings";let t_=[{url:"/_next/static/media/golden-gate-bridge-photography.86a71fac.png",prompt:()=>eF.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eF.Ru._({id:"A6PocU"})},{url:"/_next/static/media/golden-gate-bridge-illustration.c25343ad.png",prompt:()=>eF.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eF.Ru._({id:"dannsm"})},{url:"/_next/static/media/golden-gate-bridge-claymation.0c82160a.png",prompt:()=>eF.Ru._({id:"0dIaoJ"}),stylePrompt:()=>eF.Ru._({id:"E72rOz"})}];var tI=s(5091),tA=s(91140);let tR=async(e,i,t)=>{try{let t=(await Promise.all([s.e(4266),s.e(451)]).then(s.bind(s,41729))).default,n=(await Promise.all([s.e(4266),s.e(5276)]).then(s.bind(s,13606))).default,l=t.parse(e),r=n.objectify(l);i(r)}catch(e){t(e.message)}},tE=async(e,i,t)=>{try{let t=(await Promise.all([s.e(4266),s.e(451)]).then(s.bind(s,41729))).default,n=(await Promise.all([s.e(4266),s.e(5276)]).then(s.bind(s,13606))).default;t().process(e,{parser:n}).then(e=>{let{css:s}=e;i(s)})}catch(e){t(e.message)}},tT=e=>{let{label:i,initialValue:n,updateValue:l,helperText:r}=e,[o,a]=(0,d.useState)(""),[c,x]=(0,d.useState)(null),[u,h]=(0,d.useState)(),p=(0,sO.lW)(tR,100);return((0,d.useEffect)(()=>{Promise.all([s.e(6171),s.e(6374),s.e(960)]).then(s.bind(s,30960)).then(e=>{h(e.css())})},[]),(0,sO.Vg)(()=>{x(null),n&&tE(n,a,x)},[n],[]),(0,sO.Vg)(()=>{x(null),p(o,l,x)},[o,l,p],[o]),u)?(0,t.jsxs)(eI.MJ,{isInvalid:!!c,children:[(0,t.jsx)(eA.l,{children:i}),c&&(0,t.jsx)(tI.Wt,{children:c}),r&&(0,t.jsx)(eI.eK,{children:r}),(0,t.jsx)(E.a,{border:"1px solid",borderColor:"gray.200",fontSize:"md",children:(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)("span",{}),children:(0,t.jsx)(tA.j,{value:o,height:"300px",extensions:[u],onChange:a})})})]}):null},tD=(0,d.memo)(()=>{var e,i,s,n,l;let r=(0,u.jL)(),o=(0,u.GV)(C.eo);if(!o)throw Error("Theme is undefined");return(0,t.jsxs)(R.B,{spacing:4,children:[(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"S0kLOH"})}),(0,t.jsx)(eR.p,{defaultValue:o.id,readOnly:!0})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"PPYsiY"})}),(0,t.jsx)(tc.T,{defaultValue:null==(i=o.config.keywords)||null==(e=i.color)?void 0:e.join(", "),onChange:e=>{r((0,C.RR)({colorKeywords:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}))}}),(0,t.jsx)(eI.eK,{children:(0,t.jsx)(b.x6,{id:"j3OJ2O"})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"valYIJ"})}),(0,t.jsx)(tc.T,{defaultValue:null==(n=o.config.keywords)||null==(s=n.tone)?void 0:s.join(", "),onChange:e=>{r((0,C.oL)({toneKeywords:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}))}}),(0,t.jsx)(eI.eK,{children:(0,t.jsx)(b.x6,{id:"j3OJ2O"})})]}),(0,t.jsxs)(eI.MJ,{children:[(0,t.jsx)(eA.l,{children:(0,t.jsx)(b.x6,{id:"1hKEom"})}),(0,t.jsx)(sA.Q7,{defaultValue:o.priority,onChange:(e,i)=>{r((0,C.xu)({priority:Number.isNaN(i)?void 0:i}))},children:(0,t.jsx)(sA.OO,{})}),(0,t.jsx)(eI.eK,{children:(0,t.jsx)(b.x6,{id:"RyAyyY"})})]}),(0,t.jsx)(tT,{label:(0,t.jsx)(b.x6,{id:"3loch2"}),initialValue:null==(l=o.config)?void 0:l.contentStyles,updateValue:e=>r((0,C.gt)({contentStyles:e}))})]})});tD.displayName="AdvancedConfig";let tP={colors:i9,fonts:sM,logo:sH,design:sh,images:tS,advanced:tD},tO=[{id:"colors",testId:"colors",label:()=>eF.Ru._({id:"1HfW/F"}),icon:sn.l8N},{id:"fonts",testId:"fonts",label:()=>eF.Ru._({id:"I0oBSl"}),icon:sn.tiU},{id:"logo",testId:"logo",label:()=>eF.Ru._({id:"iG7KNr"}),icon:sn.r5G,description:()=>eF.Ru._({id:"lm6ARH"})},{id:"design",testId:"design",label:()=>eF.Ru._({id:"f8fH8W"}),description:()=>eF.Ru._({id:"7FMNYC"}),icon:sn.ffg},{id:"images",testId:"images",label:()=>eF.Ru._({id:"an5hVd"}),icon:sn.yvG},{id:"advanced",testId:"advanced",label:()=>eF.Ru._({id:"sxkWRg"}),description:()=>"Advanced settings that currently only ".concat(ea.On," employees can see."),icon:sn.BH7,isForGammaOnly:!0}],tM=(e,i)=>!!e.isForGammaOnly&&!i,tz=()=>{let{isGammaOrgUser:e}=(0,O.ur)(),[i,s]=(0,d.useState)(0),n=(0,F.h5)({base:!0,lg:!1,default:!1}),l=(0,d.useMemo)(()=>tO.filter(i=>!tM(i,e)),[e]),r=(0,d.useCallback)(e=>{s(e)},[]),o=tP[l[i].id];return(0,t.jsxs)(iX.t,{display:"flex",alignItems:"flex-start",flexDirection:n?"column":"row",variant:"soft-rounded",defaultIndex:0,w:"100%",flex:"1",isLazy:!0,index:i,onChange:r,children:[(0,t.jsx)(i$.w,{display:"flex",flexDirection:n?"row":"column",overflowX:"auto",position:"sticky",top:"0",p:"2",bg:"white",zIndex:"1",minW:n?"100%":"190px",alignItems:n?"flex-start":"stretch",gap:n?void 0:"1",w:n?"100%":void 0,children:l.map((e,i)=>(0,t.jsx)(iK.o,{"data-testid":"theme-config-tab-".concat(e.testId),justifyContent:"flex-start",whiteSpace:n?"nowrap":void 0,borderRadius:"md",_hover:{bg:"trueblue.50"},children:(0,t.jsxs)(M.z,{spacing:"2.5",fontSize:"sm",children:[(0,t.jsx)(E.a,{color:"trueblue.400",children:(0,t.jsx)(P.g,{icon:e.icon,fixedWidth:!0})}),(0,t.jsx)(m.E,{textAlign:"start",noOfLines:{base:void 0,md:1},whiteSpace:"no-wrap",children:e.label()}),e.isForGammaOnly&&(0,t.jsx)(td.E,{colorScheme:"deepocean",fontSize:"xxs",children:"Employee Only"})]})},i))}),(0,t.jsx)(ed.c,{orientation:n?"horizontal":"vertical"}),(0,t.jsx)(iJ.T,{flex:1,minH:0,h:"100%",children:l.map((e,i)=>(0,t.jsxs)(iq.K,{bg:"white",p:{base:3,md:5},pb:{base:5,md:12},overflowY:"auto",h:"100%",maxH:"100%",as:R.B,w:"100%",spacing:{base:"4",md:"6"},children:[(0,t.jsxs)(R.B,{spacing:"1",children:[(0,t.jsx)(iv.D,{size:"md",color:"gray.700",fontWeight:"500",children:e.label()}),e.description&&(0,t.jsx)(m.E,{fontSize:"sm",color:"gray.600",children:e.description()})]}),(0,t.jsx)(o,{})]},i))})]})};var tF=s(56151),tN=s(30709),tL=s(85813),tG=s(99733),tB=s(898),tU=s(58809),tW=s(79958);let tV=e=>{let{value:i,onSave:s}=e;return(0,t.jsxs)(eI.MJ,{isInvalid:0===i.length,children:[(0,t.jsx)(tF.F,{defaultValue:i,placeholder:(0,k.Y)(),onSubmit:s,submitOnBlur:!0,color:"gray.700",isPreviewFocusable:!0,fontSize:"2xl",fontWeight:"500",children:(0,t.jsxs)(M.z,{spacing:"2",minHeight:10,minW:"10",children:[(0,t.jsx)(tN.l,{px:"1",bg:"gray.50",w:"100%","data-testid":"custom-theme-name-preview",_hover:{bg:"gray.200"}}),(0,t.jsx)(tL.j,{px:"1","data-testid":"custom-theme-name-input"}),(0,t.jsx)(tH,{})]})}),(0,t.jsx)(tI.Wt,{fontWeight:"500",pb:2,children:(0,t.jsx)(b.x6,{id:"iwj88Q"})})]})},tH=()=>{let{isEditing:e,getSubmitButtonProps:i,getCancelButtonProps:s,getEditButtonProps:n}=(0,tG._)();return e?(0,t.jsxs)(g.e,{justifyContent:"center",size:"sm",spacing:0,children:[(0,t.jsx)(a.Tz,{label:(0,t.jsx)(b.x6,{id:"dEgA5A"}),placement:"top",children:(0,t.jsx)(sR.K,{size:"md",colorScheme:"red",variant:"ghost","aria-label":eF.Ru._({id:"dEgA5A"}),icon:(0,t.jsx)(P.g,{icon:eH.yYc}),...s()})}),(0,t.jsx)(a.Tz,{label:(0,t.jsx)(b.x6,{id:"fNzdjk"}),placement:"top",children:(0,t.jsx)(sR.K,{size:"md",colorScheme:"green",variant:"ghost","aria-label":eF.Ru._({id:"fNzdjk"}),icon:(0,t.jsx)(P.g,{icon:eH.e68}),...i(),"data-testid":"save-theme-name-button"})})]}):(0,t.jsx)(I.s,{justifyContent:"center",children:(0,t.jsx)(a.Tz,{label:(0,t.jsx)(b.x6,{id:"+MxT3Q"}),placement:"top",children:(0,t.jsx)(E.a,{children:(0,t.jsx)(sR.K,{size:"md",variant:"ghost",colorScheme:"gray",color:"gray.400","aria-label":eF.Ru._({id:"+MxT3Q"}),icon:(0,t.jsx)(P.g,{icon:eH.hpd}),...n(),ref:null})})})})},tX=()=>{var e;let i=(0,u.GV)(C.TJ),[s,n]=(0,d.useState)(),l=(0,u.jL)(),r=(0,u.GV)(C.sv),o=(0,u.GV)(tU.Jo),{data:a,loading:c}=(0,et.eKT)({variables:{id:i},skip:!i||"new"===i}),x=(0,tW.B)(null==o?void 0:o.title);(0,d.useEffect)(()=>{!c&&a&&a.theme&&n(a.theme)},[c,a,n]);let h=(0,d.useCallback)(e=>{let i=e||(0,k.Y)();l((0,C.qv)({name:i}))},[l]);return(0,t.jsxs)(R.B,{spacing:"1.5",children:[(0,t.jsx)(tV,{value:r||(0,k.Y)(),onSave:h}),c?(0,t.jsx)(tB.r,{noOfLines:1,fontSize:"sm",maxW:"300px"}):(0,t.jsxs)(m.E,{color:"gray.600",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:[(null==s?void 0:s.createdBy)&&(0,t.jsx)(b.x6,{id:"qeNU2j",values:{0:s.createdBy.displayName}})," ",(null==s?void 0:s.docCount)&&(null==s?void 0:s.docCount)===1&&(null==s?void 0:s.id)===(null==o||null==(e=o.theme)?void 0:e.id)?(0,t.jsx)(b.x6,{id:"On+kRG",values:{docTitle:x,GAMMA_ARTIFACT_PROPER_NOUN:ea.TP},components:{0:(0,t.jsx)("strong",{})}}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(b.x6,{id:"eVRfvp",values:{GAMMA_ARTIFACT_PROPER_NOUN:ea.TP,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:ea.Ix,0:(null==s?void 0:s.docCount)||0},components:{0:(0,t.jsx)("strong",{}),1:(0,t.jsx)("strong",{})}})})]})]})},t$=()=>(0,t.jsx)(I.s,{direction:"row",h:"100%",maxH:"100%",overflow:"auto",w:"100%",children:(0,t.jsx)(I.s,{direction:"column",w:"100%",borderLeft:"1px solid",borderColor:"gray.200",position:"relative",children:(0,t.jsxs)(I.s,{flex:"1",position:"relative",h:"100%",flexDirection:"column",children:[(0,t.jsx)(I.s,{p:{base:3,md:5},alignItems:"stretch",flexDirection:"column",children:(0,t.jsx)(tX,{})}),(0,t.jsx)(ed.c,{}),(0,t.jsx)(I.s,{w:"100%",overflowY:"hidden",children:(0,t.jsx)(tz,{})})]})})});(0,d.memo)(e=>{let{onTabChange:i,currentTab:s}=e;return(0,t.jsxs)(g.e,{p:2,position:"absolute",top:"3",insetInlineStart:"50%",transform:"translateX(-50%)",zIndex:"sticky",bg:"white",size:"sm",variant:"ghost",borderRadius:"md",boxShadow:"md",children:[(0,t.jsx)(f.$,{borderRadius:"md",bg:"testerDoc"===s?"trueblue.50":"transparent",color:"testerDoc"===s?"trueblue.500":"gray.600",onClick:()=>{i("testerDoc")},"data-testid":"preview-tab-tester-doc",children:(0,t.jsx)(b.x6,{id:"ypSaiK"})}),(0,t.jsx)(f.$,{borderRadius:"md",bg:"currentDoc"===s?"trueblue.50":"transparent",color:"currentDoc"===s?"trueblue.500":"gray.600",onClick:()=>{i("currentDoc")},"data-testid":"preview-tab-current-doc",children:(0,t.jsx)(b.x6,{id:"VJUm9p"})})]})}).displayName="PreviewTabSwitcher";let tK=e=>{let{onCancelClick:i,onComplete:s}=e,n=(0,u.GV)(C.eo),l=(0,u.GV)(C.D6);er("editor");let{persistTheme:r,isThemeSaving:o}=el({onComplete:s,flow:"editor"}),c=(0,u.GV)(C.jE),x=(0,d.useCallback)(()=>{r()},[r]),h=(0,F.h5)({base:"md","2xl":"lg"});return n?(0,t.jsxs)(ei,{children:[(0,t.jsx)(N,{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(t$,{}),(0,t.jsx)(U,{children:(0,t.jsx)(I.s,{justifyContent:"flex-end",w:"100%","data-theme-editor-footer":!0,children:(0,t.jsxs)(g.e,{size:h,children:[(0,t.jsx)(f.$,{variant:"plain",onClick:i,children:(0,t.jsx)(b.x6,{id:"dEgA5A"})}),(0,t.jsx)(a.Tz,{isDisabled:!l,label:(0,t.jsx)(b.x6,{id:"yz1qqg"}),children:(0,t.jsx)(E.a,{display:"inline-flex",children:(0,t.jsx)(f.$,{variant:"solid",isLoading:o,isDisabled:!c,onClick:x,"data-testid":"custom-theme-save",children:(0,t.jsx)(b.x6,{id:"EsJdRp"})})})})]})})})]})}),(0,t.jsx)(V,{children:(0,t.jsx)(iw,{})})]}):(0,t.jsx)(t.Fragment,{})},tJ=e=>{let{onThemeCreated:i,getCollaborativeEditorInstance:s}=e,h=(0,u.jL)(),{isOpen:p,onOpen:m,onClose:j}=(0,x.E)({id:"unsaved-changes"}),g=(0,d.useRef)(null);(0,y.II)();let[f,b]=(0,d.useState)(!1),[I,A]=(0,d.useState)("splash"),R=(0,d.useCallback)(()=>{A("splash"),h((0,C.y0)()),b(!1),j()},[h,j]),E=(0,d.useCallback)(()=>{j(),"themeBuilderExit"===g.current?(h((0,C.y0)()),w.R.emit("setThemeConfigurationView",{view:"splash"})):R()},[R,j,h]),T=(0,d.useCallback)(e=>{let{exitType:i}=e;g.current=i;let s=(0,u.KA)().getState();return"splash"===I?void R():"import"===I?void((0,_.dZ)(s)?m():R()):void((0,C.jE)(s)?m():R())},[R,m,I]),D=(0,d.useCallback)(e=>{if(b(!0),h((0,C.aG)()),e.baseTheme){let i=e.baseTheme;e.isNewFork&&(i={...e.baseTheme,id:"new",name:(0,k.Y)()}),h((0,C.Dm)({baseTheme:i})),h((0,C.p0)({originalTheme:i}))}if(null==s?void 0:s()){var i;h((0,C.eE)({json:null==(i=s())?void 0:i.getJSON()}))}A(e.view||"splash")},[h,s]);return((0,d.useEffect)(()=>{w.R.on("openThemeConfiguration",e=>{D(e)}),w.R.on("closeThemeConfiguration",()=>{b(!1),h((0,C.y0)())}),w.R.on("setThemeConfigurationView",e=>{let{view:i}=e;if(null==s?void 0:s()){var t;h((0,C.eE)({json:null==(t=s())?void 0:t.getJSON()}))}"splash"===i&&h((0,C.aG)()),A(i)})},[h,D,s]),(0,d.useEffect)(()=>{"true"===(0,S.sF)().openThemeEditor&&(D({view:"editor"}),(0,c.g5)({query:{...(0,S.sF)(),openThemeEditor:void 0},emitChange:!1}))},[D]),f)?(0,t.jsxs)(a.L8,{isDark:!1,children:[(0,t.jsxs)(n.aF,{returnFocusOnClose:!1,isOpen:f,trapFocus:!1,size:"full",onClose:()=>T({exitType:"genericExit"}),motionPreset:"slideInBottom",children:[(0,t.jsx)(l.m,{}),(0,t.jsxs)(r.$,{h:"calc(100% - 24px)",minH:"calc(100% - 24px)",flex:1,overflow:"hidden",mt:"24px",children:[(0,t.jsx)(o.s,{top:"3",insetEnd:"3",position:"absolute",zIndex:"100",bg:"gray.50"}),"splash"===I&&(0,t.jsx)(ta,{}),"import"===I&&(0,t.jsx)(ib,{}),"generate"===I&&(0,t.jsx)(tn,{}),"build"===I&&(0,t.jsx)(te,{onComplete:i,onExitClick:()=>T({exitType:"themeBuilderExit"})}),"editor"===I&&(0,t.jsx)(tK,{onCancelClick:R,onComplete:i})]})]}),(0,t.jsx)(v,{isOpen:p,onClose:j,onConfirm:E})]}):(0,t.jsx)(t.Fragment,{})}},69413:(e,i,s)=>{"use strict";s.d(i,{Cr:()=>c,Eu:()=>b,G0:()=>f,H9:()=>j,J3:()=>x,L_:()=>g,M$:()=>p,Q3:()=>y,g9:()=>v,jI:()=>m,yA:()=>h});var t=s(83817),n=s.n(t),l=s(79784),r=s(88586);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=["italic","oblique"];for(let s of e)for(let e of i)if(-1!==s.toLowerCase().indexOf(e))return!0;return!1},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let i of e){if(d(i,["thin"]))return 100;if(d(i,["light","lite"],["extra","ultra","x"]))return 200;if(d(i,["light"]))return 300;if(d(i,["medium"]))return 500;if(d(i,["bold"],["demi","semi"]))return 600;if(d(i,["bold"],["extra","x"]))return 800;if(d(i,["bold"]))return 700;if(d(i,["black","heavy","ultra"]))return 900}return 400},d=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let t of i)if(0===s.length){if(-1!==e.toLowerCase().indexOf(t.toLowerCase()))return!0}else for(let i of s)if(-1!==e.toLowerCase().indexOf(t.toLowerCase())&&-1!==e.toLowerCase().indexOf(i.toLowerCase()))return!0;return!1};class c extends Error{}let x=async e=>new Promise((i,s)=>{let t=new FileReader;t.onload=e=>{var t,n,r,d,x,u,h,p,m,j,g,f,b,v,y,w,C,k,S;let _=null==(t=e.target)?void 0:t.result;try{let e=(0,l.qg)(_),s=null!=(w=null==(n=Object.values(null!=(y=null==(d=e.tables)||null==(r=d.name)?void 0:r.preferredSubfamily)?y:null==(u=e.tables)||null==(x=u.name)?void 0:x.fontSubfamily))?void 0:n[0])?w:"",t=null!=(C=null==(h=Object.values(null==(m=e.tables)||null==(p=m.name)?void 0:p.fullName))?void 0:h[0])?C:"",I=null!=(S=null==(j=Object.values(null!=(k=null==(f=e.tables)||null==(g=f.name)?void 0:g.preferredFamily)?k:null==(v=e.tables)||null==(b=v.name)?void 0:b.fontFamily))?void 0:j[0])?S:"";if(e.tables.fvar)throw new c;i({familyName:I,isItalic:o([s,t]),weight:a([s,t])})}catch(e){s(e)}},t.onerror=e=>{console.error("[parseFontFile] unable to read the font file, providing defaults",e),i({familyName:"",isItalic:!1,weight:400})},t.readAsArrayBuffer(e)}),u=e=>{let i=e.lastIndexOf(".");return -1===i||i===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,i),extension:e.slice(i+1)}},h=e=>{let{extension:i}=u(e);return i===r.AKY.Otf||i===r.AKY.Ttf?i:r.AKY.Ttf},p=e=>{let{existingFont:i}=e;if(!i)return!0;let s={fontName:i.name,fontId:i.id,fontFiles:i.fontFiles.map(e=>({id:e.id,name:e.name,weight:e.weight,isItalic:e.isItalic,fileType:e.fileType,sourceUrl:e.sourceUrl}))},t={fontName:e.fontName,fontId:e.fontId,fontFiles:e.uploadFontFiles.map(e=>({id:e.fontFile.id,name:e.fontFile.name,weight:e.fontFile.weight,isItalic:e.fontFile.isItalic,fileType:e.fontFile.fileType,sourceUrl:e.fontFile.sourceUrl}))};return!n()(s,t)},m=e=>Object.keys(e.reduce((e,i)=>{let s=[i.weight,i.isItalic].join("__");return{...e,[s]:!0}},{})).length,j=e=>Object.values(e.reduce((e,i)=>{let s=i.fontFile,t=[s.weight,s.isItalic,s.fileType].join("__");return e[t]=e[t]||[],e[t].push(i),e},{})).reduce((e,i)=>{if(i.length>1)for(let s of i)e[s.uploadId]=!0;return e},{}),g=e=>e.reduce((e,i)=>{let s=i.fontFile.weight;return{...e,[s]:[...e[s]||[],i]}},{}),f=function(e){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.sort((e,s)=>i?Number(e)-Number(s):Number(s)-Number(e))},b=e=>f(Array.from(new Set(e.map(e=>e.weight)))),v=(e,i)=>{if(void 0===i)return;if(i>e[e.length-1])return e[e.length-1];let s=1/0,t=-1;for(let n=0;n<e.length;n++){let l=Math.abs(i-e[n]);if(l<s)s=l,t=n;else break}return e[t]},y=e=>!!e&&0!==e.length&&-1===e.findIndex(e=>!e.isItalic)},70583:()=>{},72480:(e,i,s)=>{"use strict";s.d(i,{_:()=>i1});var t=s(6029),n=s(90394),l=s(46898),r=s(67909),o=s(36071),a=s(54731),d=s(17920),c=s(26420),x=s(3674),u=s(96500),h=s(40691),p=s(26385),m=s(41781),j=s(29810),g=s(49611),f=s(16426),b=s(40452),v=s(99492),y=s(48621),w=s(47412),C=s(19564),k=s(55729),S=s(7761),_=s(82328),I=s(68301),A=s(22445),R=s(39892),E=s(46091),T=s(20715),D=s(24729),P=s(72737),O=s(96804),M=s(44141),z=s(91792),F=s(82927),N=s(2942),L=s(29608),G=s(70006),B=s(48810),U=s(17496),W=s(64268),V=s(51504),H=s(96990),X=s(58297),$=s(77650),K=s(38822),J=s.n(K),q=s(88586),Q=s(99038),Z=s(75748),Y=s(11403),ee=s(58959),ei=s(80314),es=s(18351),et=s(8077);let en=e=>{let{channel:i,doc:s,isDisabled:n,showDisabledIcon:l=!1}=e,{removeDocChannel:r}=(0,es.k)(),o=(0,k.useCallback)(()=>{s&&r(s,i.id)},[i.id,s,r]),a=(0,G.gU)({slug:i.slug,id:i.id});return(0,t.jsxs)(ee.z,{py:2,w:"100%",justify:"space-between","data-testid":"workspace-row-".concat(i.id),children:[(0,t.jsx)(c.a,{children:(0,t.jsxs)(b.s,{alignItems:"center",children:[(0,t.jsx)(et.$,{icon:D.$Q,showDisabled:l}),(0,t.jsx)(c.a,{ml:3,opacity:l?.5:1,children:(0,t.jsx)(ei.N,{href:a,target:"_blank",children:i.name})})]})}),(0,t.jsx)(g.$,{size:"sm",variant:"hazardous",onClick:o,isDisabled:n,children:(0,t.jsx)(C.x6,{id:"t/YqKh"})})]},i.id)};var el=s(78686),er=s(24302),eo=s(61204),ea=s(72470),ed=s(3276),ec=s(77979),ex=s(40913),eu=s(24351);let eh=e=>{let{workspaceId:i,docId:s,existingChannels:n,isDisabled:l}=e,r=(0,k.useRef)(null),[o,a]=(0,k.useState)(""),[d,x]=(0,k.useState)([]),[u,h]=(0,k.useState)(!1),{addDocChannel:m}=(0,es.k)(),{data:j,loading:g}=(0,q.FKb)({variables:{query:o,workspaceId:i},skip:!o});(0,k.useEffect)(()=>{if(g||!j)return;let e=j.search.filter(Boolean);x(e),h(0===e.length)},[j,g]);let f=(0,k.useMemo)(()=>o?d.filter(e=>!n.find(i=>i.id===e.id)):[],[n,o,d]),v=(0,k.useCallback)(e=>{let i=f.find(i=>i.id===e);if(!i)return void console.error("[ChannelSearchBar.addSelectedChannel] No matching channel found");m({docId:s,channel:i,existingChannels:n})},[m,s,n,f]),S=(0,er.dU)("gray.50","gray.600"),_=(0,er.dU)("light","dark"),I=(0,er.dU)("trueblue.50","whiteAlpha.100");return(0,t.jsx)(eo.e,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-channel-search-bar",children:(0,t.jsx)(c.a,{flex:1,children:(0,t.jsxs)(ea.M,{w:"100%",justifyContent:"center",zIndex:1,children:[(0,t.jsx)(b.s,{display:"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",bg:S,zIndex:"overlay",opacity:.4,children:(0,t.jsx)(ed.y,{})}),(0,t.jsxs)(ex.j9,{rollNavigation:!0,multiple:!0,emptyState:()=>!!u&&(0,t.jsx)(b.s,{direction:"column",justify:"center",align:"center",w:"100%",my:6,children:(0,t.jsx)(c.a,{w:"80%",maxW:"200px",mb:6,alignContent:"center",children:(0,t.jsx)(eu.p,{size:"sm",title:(0,t.jsx)(C.x6,{id:"aywdyd"}),description:(0,t.jsx)(C.x6,{id:"kXnLEt"})})})}),suggestWhenEmpty:!1,openOnFocus:!0,filter:()=>!0,onSelectOption:e=>{let{item:i}=e;v(i.value),a("")},children:[(0,t.jsxs)(ec.W,{pointerEvents:"none",color:(0,er.dU)("gray.300","gray.600"),h:"100%",flexDirection:"column",children:[(0,t.jsx)(b.s,{flex:1}),(0,t.jsx)(b.s,{h:10,py:4,alignItems:"center",children:(0,t.jsx)(el.W,{w:10})})]}),(0,t.jsx)(ex.Rv,{ref:r,"data-testid":"autocomplete-channels-input",cursor:l?"not-allowed":void 0,disabled:l,w:"100%",paddingInlineStart:5,wrapStyles:{px:2},fontSize:"md",placeholder:$.Ru._({id:"KmCmUJ"}),transition:"width 1s ease-in-out",value:o,onChange:e=>{let{target:i}=e,{value:s}=i;a(s),s||x([])}}),(0,t.jsx)(ex.HN,{w:"100%",mt:0,display:o.length>0?"flex":"none","data-theme":_,children:f.length>0&&f.map(e=>{let{id:i,name:s,memberCount:n,isMember:l,members:r}=e;return(0,t.jsx)(ex.qF,{"data-testid":"autocomplete-item-channel-".concat(i),value:{id:e.id},getValue:e=>e.id,align:"center",_focus:{bg:I},children:(0,t.jsxs)(ee.z,{spacing:4,p:0,flex:1,children:[(0,t.jsx)(c.a,{color:"gray.600",children:(0,t.jsx)(y.g,{icon:D.$Q})}),(0,t.jsxs)(p.B,{spacing:0,flex:"1",children:[(0,t.jsx)(B.E,{children:s}),(0,t.jsx)(B.E,{fontSize:"sm",color:"gray.400",children:l?(0,t.jsx)(C.x6,{id:"tWPlLK",values:{0:n||0}}):(0,t.jsx)(C.x6,{id:"pkIIls",values:{0:n||0}})})]}),(0,t.jsx)(w.KZ,{size:"xs",overflowTooltipLabel:$.Ru._({id:"25VyZX"}),avatars:r||[],max:3,onClick:e=>{e.preventDefault(),e.stopPropagation()}})]})},i)})})]})]})})})};var ep=s(27229),em=s(1139),ej=s(66897),eg=s(18833),ef=s(36216);let eb=e=>{let{invitationCount:i,isOpen:s,onClose:n,onSendInvitationsClick:l,onDiscardClick:c}=e;return s?(0,t.jsxs)(r.aF,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:!0,isCentered:!0,children:[(0,t.jsx)(o.m,{}),(0,t.jsxs)(a.$,{children:[(0,t.jsx)(d.r,{children:(0,t.jsx)(C.x6,{id:"tW/kB6",values:{invitationCount:i}})}),(0,t.jsx)(x.s,{}),(0,t.jsx)(h.c,{children:(0,t.jsx)(B.E,{children:(0,t.jsx)(C.x6,{id:"qxNK2k",values:{invitationCount:i}})})}),(0,t.jsx)(f.j,{children:(0,t.jsxs)(p.B,{spacing:2,direction:"row",align:"center",children:[(0,t.jsx)(g.$,{onClick:c,children:(0,t.jsx)(C.x6,{id:"bzSI52"})}),(0,t.jsx)(g.$,{variant:"solid",onClick:l,children:(0,t.jsx)(C.x6,{id:"6dWGPZ",values:{invitationCount:i}})})]})})]})]}):null};var ev=s(95889),ey=s(75570),ew=s(43787),eC=s(2252),ek=s(13006);let eS=(0,eg.P)(c.a),e_=(e,i,s)=>{if(!s)return e;let t=[...e],n=e.findIndex(e=>"email"in e&&e.email===s),l=i.find(e=>e.email===s);return -1!==n&&t.splice(n,1),[...t,l||{email:s}]},eI=(e,i)=>{let s=(0,ew.e7)(i.map(e=>"displayName"in e?e.displayName:e.email),3);return e===q.aXG.Manage?$.Ru._({id:"4bKxWq",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}}):e===q.aXG.Edit?$.Ru._({id:"3rbi6Y",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}}):e===q.aXG.Comment?$.Ru._({id:"uGWY40",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}}):e===q.aXG.View?$.Ru._({id:"p5IG6F",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}}):$.Ru._({id:"Ai1TAT",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}})},eA=e=>{let{workspaceId:i,docId:s,user:n,existingDocCollaborators:r,existingInvitations:o,registerDoneFn:a,isDisabled:d}=e,x=(0,l.d)(),[u,h]=(0,k.useState)(!1),p=(0,k.useRef)(),m=(0,k.useRef)(null),[j,f]=(0,k.useState)(""),[S,_]=(0,k.useState)([]),[I,A]=(0,k.useState)(q.aXG.Edit),[R,E]=(0,k.useState)(new ey.c),[T,D]=(0,k.useState)([]),P=T.filter(e=>"email"in e),O=(0,ev.st)(),M=r.map(e=>e.user),{isOpen:z,onOpen:F,onClose:N}=(0,ep.j)({id:"unsentInvitationsModalDisclosure"}),[L,{loading:G,error:U}]=(0,q.VXs)();(0,Y.KW)("Error inviting collaborators.",U);let W=(0,ef.t)(q.HdQ),{data:V,loading:K}=(0,q.puH)({variables:{query:j,workspaceId:i},skip:!j});(0,k.useEffect)(()=>{!K&&V&&_(V.search.filter(Boolean))},[V,K]);let J=(0,k.useMemo)(()=>j?S.filter(e=>"User"===e.__typename&&e.id!==n.id&&!P.concat(M).find(i=>i.email===e.email)):[],[S,M,j,P,n.id]),Q=!!j&&!J.find(e=>e.email===j),Z=I===q.aXG.Manage&&P.some(e=>!("__typename"in e&&"User"===e.__typename)),ei=T.concat({email:j}).filter(e=>!("email"in e)||(0,ej.t)(e.email||"")),es=!!T.length,et=!!ei.length;(0,k.useEffect)(()=>{a(()=>()=>(et?F():R.resolve(),R.promise))},[a,R,et,F]);let en=(0,k.useCallback)(async e=>{h(!0),D(i=>e.reduce((e,i)=>e_(e,J,i.trim()),i));let s=(await Promise.all(e.map(e=>W({workspaceId:i,query:e}).then(i=>{var s;return null==(s=i.data)?void 0:s.search.find(i=>"User"===i.__typename&&i.email===e)})))).filter(Boolean);D(i=>e.reduce((e,i)=>e_(e,s,i.trim()),i)),h(!1)},[J,W,i]),eu=(0,k.useCallback)(async()=>{if(0===P.length)return;let e=e_(P,J,j.trim()).filter(e=>"email"in e&&(0,ej.t)(e.email||"")),i=[...r,...e.map(e=>{if("id"in e)return{docId:s,user:e,guest:!1,permission:I,__typename:"DocCollaborator"}})].filter(e=>!!e),t=[...o,...e.map(e=>{if(!("id"in e))return{id:"temp",docTitle:"temp-title",invitedBy:n,docId:s,email:e.email,permission:I,__typename:"DocInvitation"}})].filter(e=>!!e);return L({variables:{docId:s,collaborators:e.map(e=>({..."id"in e?{userId:e.id}:{email:e.email},permission:I}))},update:(e,i)=>{let{data:t}=i;e.writeFragment({id:"Doc:".concat(s),fragment:q.rgw,data:null==t?void 0:t.addCollaborators})},optimisticResponse:{addCollaborators:{id:s,collaborators:i,invitations:t}}}).then(()=>{x({title:$.Ru._({id:"Ka86rB",values:{0:e.length}}),description:eI(I,e),status:"success",duration:5e3,isClosable:!0,position:"top"}),null==O||O.track(ev.VV.DOC_COLLABORATOR_INVITED,{doc_id:s,source:"share-panel",number_of_invites_sent:e.length,permissions:I})})},[L,s,j,I,J,P,r,o,x,n,O]),eh=(0,k.useCallback)(async()=>Promise.all([eu()]).then(()=>{var e;D([]),f(""),null==(e=p.current)||e.resetItems(!0),R.resolve(),E(new ey.c)}).catch(e=>{console.warn(e)}),[eu,R]),eg=d||G||u,ew=(0,er.dU)("light","dark"),eA=(0,er.dU)("trueblue.50","whiteAlpha.100"),eR=(0,er.dU)("trueblue.100","whiteAlpha.200");return(0,t.jsxs)(eo.e,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-search-bar",children:[(0,t.jsx)(c.a,{flex:1,children:(0,t.jsxs)(ea.M,{w:"100%",justifyContent:"center",zIndex:2,children:[(0,t.jsx)(b.s,{display:u?"flex":"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",zIndex:"overlay",opacity:.4,children:(0,t.jsx)(ed.y,{})}),(0,t.jsxs)(ex.j9,{ref:p,values:T,maxSelections:100,maxSuggestions:20,creatable:!0,multiple:!0,freeSolo:!0,suggestWhenEmpty:!1,openOnFocus:!0,filter:(e,i)=>!P.find(e=>e.email===i),onSelectOption:e=>{let{item:i}=e,{type:s}=i.originalValue;"collaborator"===s&&D(e=>e_(e,J,i.value)),f("")},onTagRemoved:e=>{D(i=>[...i].filter(i=>"email"in i?i.email!==e:!("id"in i)||i.id!==e))},children:[(0,t.jsxs)(ec.W,{pointerEvents:"none",color:(0,er.dU)("gray.300","gray.600"),h:"100%",flexDirection:"column",children:[(0,t.jsx)(b.s,{flex:1}),(0,t.jsx)(b.s,{h:10,py:4,alignItems:"center",children:(0,t.jsx)(el.W,{w:10})})]}),(0,t.jsx)(ex.Rv,{ref:m,"data-testid":"autocomplete-collaborators-input",cursor:eg?"not-allowed":void 0,disabled:eg,w:"100%",paddingInlineStart:5,wrapStyles:{px:2},fontSize:"md",placeholder:$.Ru._({id:"P8H57Z"}),transition:"width 1s ease-in-out",value:j,onKeyDown:e=>{let{key:i}=e;if("Backspace"===i&&0===j.length&&T.length>0){let e=T.slice(-1).pop();if(e){var s;null==(s=p.current)||s.removeItem("email"in e?e.email:e.id)}}},onPaste:e=>{e.preventDefault(),e.stopPropagation(),en(e.clipboardData.getData("Text").trim().split(/[,|;\s]+/)),f(""),_([])},onChange:e=>{let{target:i}=e,{value:s}=i;f(s),s||_([])},children:T.map((e,i)=>(0,t.jsx)(ek.w,{idx:i,selectedCollaborator:e,handleRemoveClick:()=>{var i;null==(i=p.current)||i.removeItem(e.email)}},"id"in e?e.id:e.email))}),(0,t.jsx)(ex.HN,{w:"100%",mt:0,display:j.length>0?"flex":"none","data-theme":ew,children:J.map(e=>{let{id:i,email:s,displayName:n,profileImageUrl:l}=e;return(0,t.jsx)(ex.qF,{fixed:!0,"data-testid":"autocomplete-item-user-".concat(i),value:{email:s,type:"collaborator"},getValue:e=>e.email,align:"center",_focus:{bg:eA},children:(0,t.jsxs)(ee.z,{children:[(0,t.jsx)(H.e,{size:"sm",name:n,src:l}),(0,t.jsxs)(c.a,{children:[(0,t.jsx)(B.E,{textTransform:"capitalize",children:n}),(0,t.jsx)(B.E,{fontSize:"xs",color:"gray.500",children:null==s?void 0:s.toLowerCase()})]})]})},i)}).concat((0,t.jsx)(ex.qF,{value:{email:j,type:"collaborator"},align:"center",display:Q?"flex":"none",_focus:{bg:eA},children:(0,t.jsxs)(ee.z,{children:[(0,t.jsx)(X.j,{bg:eR,size:8,children:(0,t.jsx)(y.g,{icon:v.y_8})}),(0,t.jsx)(B.E,{size:"md",children:j})]})},j))})]}),(0,t.jsx)(em.z,{in:es,unmountOnExit:!0,children:(0,t.jsx)(ec.t,{w:"auto",justifyContent:"flex-end",pe:1,children:(0,t.jsx)(eC.qk,{isDisabled:G,options:[q.aXG.Manage,q.aXG.Edit,q.aXG.Comment,q.aXG.View],variant:"ghost",selected:I,onClick:e=>A(e)})})})]})}),(0,t.jsx)(eS,{overflowX:"hidden",me:-2,transition:"slow",animate:{maxWidth:es?"200px":"0px"},children:(0,t.jsx)(w.Tz,{label:(0,t.jsx)(C.x6,{id:"Rxin92"}),"aria-label":$.Ru._({id:"Rxin92"}),isDisabled:!Z,placement:"top",children:(0,t.jsx)(c.a,{children:(0,t.jsx)(g.$,{variant:"solid",onClick:eh,isDisabled:!et||Z,isLoading:G,"data-testid":"add-selected-items",children:(0,t.jsx)(C.x6,{id:"m16xKo"})})})})}),(0,t.jsx)(w.L8,{isDark:!1,children:(0,t.jsx)(eb,{invitationCount:ei.length,onDiscardClick:()=>{N(),R.resolve(),E(new ey.c)},onSendInvitationsClick:()=>{N(),eh()},onClose:()=>{N(),R.reject(),E(new ey.c)},isOpen:z})})]})};var eR=s(86574),eE=s(57405);let eT=e=>{let{children:i,showDivider:s=!0,isDark:n=!1,...l}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eE.T,{spacing:1,align:"stretch",py:4,...l,children:i}),s&&(0,t.jsx)(u.c,{borderColor:n?"gray.600":"gray.200"})]})};var eD=s(76733);let eP=(e,i)=>{var s,t;let n="DocCollaborator"===e.__typename?null==(s=e.user.displayName)?void 0:s.toUpperCase():"DocInvitation"===e.__typename?e.email.toUpperCase():"",l="DocCollaborator"===i.__typename?null==(t=i.user.displayName)?void 0:t.toUpperCase():"DocInvitation"===i.__typename?i.email.toUpperCase():"";return!l||n&&n<l?-1:!n||l&&n>l?1:0},eO=(e,i)=>{if(e.permission!==i.permission){if("manage"===e.permission)return -1;if("manage"===i.permission)return 1}return eP(e,i)},eM=e=>{var i,s;let{workspaceId:n,isFromOtherOrg:r,doc:o,user:a,setVerifySearchDone:d,canManage:x,isDark:u=!1}=e,h=(0,l.d)(),{isConnected:p}=(0,q.utY)(),[m,{error:j}]=(0,q.VXs)(),[g,{error:f}]=(0,q.AmA)();(0,Y.KW)("Error updating collaborator.",j),(0,Y.KW)("Error removing collaborator.",f);let[w]=(0,q.Ix6)(),k=x&&p,S=!r,_=!!(!(null==o?void 0:o.orgAccess)&&(null==o?void 0:o.channels)&&(null==o?void 0:o.channels.length)>0&&(null==o?void 0:o.channels.every(e=>J()(e.permission)))),I=(0,P.vz)(o),A=(null==o?void 0:o.collaborators)||[],R=(null==o?void 0:o.invitations)||[],E=A.filter(e=>e.permission===q.aXG.Manage).length,T=[...A,...R].sort(eO),D=e=>()=>{h({title:"updated"===e?$.Ru._({id:"Xpw8aE"}):$.Ru._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},O=o.orgAccess?o.orgAccess:eC.F$.NoAccess,M=O!==eC.F$.NoAccess;return(0,t.jsxs)(b.s,{direction:"column",maxH:"max(calc(100dvh - 390px), 500px)",children:[k&&(0,t.jsx)(eA,{workspaceId:n,docId:o.id,user:a,existingDocCollaborators:A,existingInvitations:R,registerDoneFn:d,isDisabled:!x}),(0,t.jsx)(Z.r,{description:(0,t.jsx)(C.x6,{id:"i5bpoc"}),isConnected:p,mb:4}),I&&(0,t.jsx)(B.E,{fontSize:"sm",pt:2,children:I}),(0,t.jsxs)(eT,{isDark:u,children:[(0,t.jsx)(eR._,{testId:"workspace",title:(0,t.jsx)(C.x6,{id:"wtxjAY"}),subtitle:M?eC.ef[O].longDescription(null==o||null==(i=o.organization)?void 0:i.name):"",img:(0,t.jsx)(et.$,{icon:v.URI,showDisabled:!M}),isDisabled:!k,disabledText:eC.ef[O].title(),permissionsControl:(0,t.jsx)(eC.qk,{isDisabled:!k,selected:O,options:[q.aXG.Manage,q.aXG.Edit,q.aXG.Comment,q.aXG.View,eC.F$.NoAccess],onClick:e=>{let i={id:o.id,orgAccess:e===eC.F$.NoAccess?null:e};w({variables:i,optimisticResponse:{updateDoc:{...i,__typename:"Doc"}},refetchQueries:["GetDocs"]}).then(D(e===eC.F$.NoAccess?"removed":"updated"))}})}),S&&(null==(s=o.channels)?void 0:s.map(e=>(0,t.jsx)(en,{channel:e,doc:o,isDisabled:!p,showDisabledIcon:_},e.id))),!!o.orgAccess&&S&&!o.site&&!_&&(0,t.jsx)(c.a,{w:"100%",mt:2,children:(0,t.jsx)(eh,{existingChannels:o.channels,workspaceId:n,docId:o.id,isDisabled:!p})}),(0,t.jsx)(U.S,{in:S&&_,children:(0,t.jsxs)(W.F,{status:"warning",children:[(0,t.jsx)(V._,{}),(0,t.jsx)(C.x6,{id:"RZRM4l",values:{GAMMA_ARTIFACT_PROPER_NOUN:Q.TP}})]})})]}),T&&(0,t.jsx)(c.a,{overflowY:"auto",children:(0,t.jsx)(eT,{showDivider:!1,isDark:u,children:T.map(e=>{let i=e.permission===q.aXG.Manage&&E<2,s=!k||i,l=i?$.Ru._({id:"0q0LJR"}):void 0,r=eC.ef[e.permission].title();if("DocCollaborator"===e.__typename){var d;let i=e.user;return(0,t.jsx)(eR._,{testId:i.email,title:"".concat(i.displayName," ").concat(i.id===a.id?$.Ru._({id:"dDUgzP"}):""),img:(0,t.jsx)(H.e,{name:i.displayName,src:i.profileImageUrl,size:"sm"}),subtitle:s?void 0:i.email,isDisabled:s,disabledText:r,tooltipText:l,workspaceGuestInvite:!s&&e.guest?(0,t.jsx)(eD.L,{name:i.displayName,workspaceName:null==(d=o.organization)?void 0:d.name,workspaceId:n,email:e.user.email}):void 0,permissionsControl:(0,t.jsx)(eC.qk,{isDisabled:s,selected:e.permission,options:[q.aXG.Manage,q.aXG.Edit,q.aXG.Comment,q.aXG.View],disabledOptions:e.guest?[{permission:q.aXG.Manage,reason:$.Ru._({id:"Rxin92"})}]:[],onClick:e=>{let s={docId:o.id,collaborators:[{userId:i.id,permission:e}]};m({variables:s,optimisticResponse:{addCollaborators:{id:s.docId,collaborators:A.map(s=>({...s,permission:s.user.id===i.id?e:s.permission})),invitations:R,__typename:"Doc"}}}).then(D("updated")).catch(()=>{})},onRemove:()=>{let e={docId:o.id,collaborators:[{userId:i.id}]};g({variables:e,optimisticResponse:{removeCollaborators:{id:e.docId,collaborators:A.filter(e=>e.user.id!==i.id),invitations:R,__typename:"Doc"}}}).then(D("removed"))}})},i.id)}return"DocInvitation"===e.__typename?(0,t.jsx)(eR._,{testId:e.email,title:e.email,subtitle:$.Ru._({id:"MActeE"}),img:(0,t.jsx)(X.j,{bg:"trueblue.50",size:8,children:(0,t.jsx)(y.g,{icon:v.y_8,size:"sm"})}),isDisabled:s,disabledText:r,permissionsControl:(0,t.jsx)(eC.qk,{selected:e.permission,options:[q.aXG.Manage,q.aXG.Edit,q.aXG.Comment,q.aXG.View],disabledOptions:[{permission:q.aXG.Manage,reason:$.Ru._({id:"Rxin92"})}],onClick:i=>{let s={docId:o.id,collaborators:[{email:e.email,permission:i}]};m({variables:s,optimisticResponse:{addCollaborators:{id:s.docId,invitations:R.map(s=>({...s,permission:s.email===e.email?i:s.permission})),collaborators:A,__typename:"Doc"}}}).then(D("updated")).catch(()=>{console.warn("Error updating permission")})},onRemove:()=>{let i={docId:o.id,collaborators:[{email:e.email}]};g({variables:i,optimisticResponse:{removeCollaborators:{id:i.docId,invitations:R.filter(i=>i.email!==e.email),collaborators:A,__typename:"Doc"}}}).then(D("removed"))}})},e.email):null})})})]})};var ez=s(28847),eF=s(43183);let eN=e=>{let{doc:i,onSharePanelOpen:s,onSharePanelClose:n}=e,l=(0,k.useMemo)(()=>(0,G.Wp)({docId:i.id,docTitle:i.title}),[i.id,i.title]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.E,{fontSize:"sm",pt:2,pb:2,children:(0,t.jsx)(C.x6,{id:"2QJhbq",values:{GAMMA_ARTIFACT_PROPER_NOUN:Q.TP}})}),(0,t.jsx)(c.a,{pb:4,children:(0,t.jsx)(ez.h,{embedCode:l,docId:i.id,isDisabled:!1})}),(0,t.jsx)(eF.w,{onClose:n,onOpen:s,segmentEvent:ev.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_REMOVE_WATERMARK,targetWorkspace:i.organization})]})};var eL=s(5221),eG=s(99745),eB=s(78140),eU=s(36999),eW=s(41283),eV=s(37930),eH=s(48478),eX=s(83638),e$=s(38036),eK=s(5091),eJ=s(40162),eq=s(16491),eQ=s(91938),eZ=s(55597);let eY=e=>{let{title:i=(0,t.jsx)(C.x6,{id:"uKp64B"}),description:s=(0,t.jsx)(C.x6,{id:"iUGE+t"}),buttonLabel:n=(0,t.jsx)(C.x6,{id:"u5hSeG"}),completedMessage:l=(0,t.jsx)(C.x6,{id:"ZOLfB/"}),onClick:r}=e,[o,a]=(0,k.useState)(!1);return(0,t.jsx)(W.F,{colorScheme:"purple",children:(0,t.jsxs)(ee.z,{w:"100%",spacing:"4",children:[(0,t.jsxs)(p.B,{alignItems:"center",spacing:"0",children:[(0,t.jsx)(c.a,{color:"purple.500",children:(0,t.jsx)(y.g,{icon:eZ.rIc,size:"lg"})}),(0,t.jsx)(B.E,{fontWeight:"bold",fontSize:"xs",color:"purple.600",children:(0,t.jsx)(C.x6,{id:"ICUIAA"})})]}),(0,t.jsxs)(p.B,{spacing:"0",w:"100%",children:[(0,t.jsx)(B.E,{fontWeight:"bold",fontSize:"sm",children:i}),(0,t.jsx)(B.E,{fontSize:"xs",children:s})]}),o?(0,t.jsxs)(ee.z,{spacing:"2",children:[(0,t.jsx)(y.g,{icon:eZ.SGM}),(0,t.jsx)(B.E,{fontSize:"sm",fontWeight:"semibold",whiteSpace:"nowrap",children:l})]}):(0,t.jsx)(g.$,{size:"sm",variant:"plain",flexShrink:0,onClick:()=>{a(!0),r()},children:n})]})})};var e0=s(37605),e1=s(11916),e6=s(17928),e5=s(97315),e2=s(76373),e4=s(85455),e3=s(53932);let e8=e=>{let{doc:i,editor:s,onSharePanelOpen:n,onSharePanelClose:l,isMultipage:r=!1,cardRangesDefault:o=""}=e,a=i.title,d=(0,F.Iy)("edit",i),c=(0,e1.Is)(i),x=!!(s&&d),[u,h]=(0,k.useState)(o),[m,j]=(0,k.useState)(""),[f,b]=(0,k.useState)(""!==o?"custom":"all"),w=(0,I.u)("docShowcase"),S=(0,I.u)("export"),_=(0,I.u)("googleSlidesExport");return S?(0,t.jsx)(eE.T,{spacing:4,align:"start",pt:2,children:(0,t.jsxs)(eq.G_,{clientId:eQ.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:[(0,t.jsx)(B.E,{fontSize:"sm",children:r?(0,t.jsx)(C.x6,{id:"WrniAy",values:{docTitle:a},components:{0:(0,t.jsx)("strong",{})}}):(0,t.jsx)(C.x6,{id:"qwhOQ/",values:{GAMMA_ARTIFACT_PROPER_NOUN:Q.TP}})}),(0,t.jsxs)(ee.z,{width:"100%",children:[(0,t.jsxs)(eB.W,{closeOnSelect:!0,children:[(0,t.jsxs)(eU.I,{size:"md",boxShadow:"none",textAlign:"start",alignSelf:"flex-start",flex:1,as:g.$,rightIcon:(0,t.jsx)(y.g,{icon:v.Jt$}),children:["all"===f&&(0,t.jsx)(C.x6,{id:"4upC5z"}),"custom"===f&&(0,t.jsx)(C.x6,{id:"ioxL7D"})]}),(0,t.jsx)(eW.c,{children:(0,t.jsxs)(eV.i,{defaultValue:f,value:f,type:"radio",onChange:e=>b(e),children:[(0,t.jsx)(eH.k,{value:"all",children:(0,t.jsx)(C.x6,{id:"4upC5z"})},"all"),(0,t.jsx)(eH.k,{value:"custom",children:(0,t.jsx)(C.x6,{id:"ioxL7D"})},"custom")]})})]}),(0,t.jsxs)(eX.MJ,{flex:1,isInvalid:!!m,children:["custom"===f&&(0,t.jsx)(e$.p,{id:"card-range",type:"text",value:u,onKeyUp:()=>{if(!u)return void j("");let e=u.match(/^\d+(?:-\d+)?(?:,\h*\d+(?:-\d+)?)*$/gm);e||j($.Ru._({id:"nmWMk6"})),m&&e&&j("")},onChange:e=>h(e.currentTarget.value),placeholder:$.Ru._({id:"pHUJ/X"})}),(0,t.jsx)(U.S,{in:""!==m,children:(0,t.jsx)(eK.Wt,{children:m})})]})]}),(0,t.jsxs)(p.B,{spacing:2,width:"100%",children:[(0,t.jsx)(e7,{format:"pdf",label:"PDF",icon:e4.q.pdf.icon,accentColor:e4.q.pdf.accentColor,doc:i,editor:s,cardRanges:"custom"===f&&""!==u?u:void 0}),(0,t.jsx)(e7,{format:"pptx",label:"PowerPoint",icon:e4.q.pptx.icon,accentColor:e4.q.pptx.accentColor,doc:i,editor:s,cardRanges:"custom"===f&&""!==u?u:void 0}),_&&(0,t.jsx)(e7,{format:"google_slides",label:"Google Slides",icon:e4.q.google_slides.icon,accentColor:e4.q.google_slides.accentColor,doc:i,editor:s,cardRanges:"custom"===f&&""!==u?u:void 0,customLabel:$.Ru._({id:"wj3Fyq"}),customInProgressMessage:$.Ru._({id:"9ZkGtt"})}),(0,t.jsx)(e7,{format:"image",label:"PNG",icon:e4.q.png.icon,accentColor:e4.q.png.accentColor,doc:i,editor:s,cardRanges:"custom"===f&&""!==u?u:void 0,customLabel:$.Ru._({id:"wAyz08"}),customInProgressMessage:$.Ru._({id:"RSRVl9"})})]}),d&&(0,t.jsxs)(p.B,{children:[(0,t.jsx)(B.E,{fontSize:"sm",children:r?(0,t.jsx)(C.x6,{id:"ZQ1V5I"}):(0,t.jsx)(C.x6,{id:"If/5+e"})}),(0,t.jsx)(e3.O,{exportMode:f,cardRangesInput:u,doc:i})]}),(0,t.jsx)(e9,{fontDownloadLinks:c,showPageSetupTip:x,onOpenPageSetup:()=>{l(),e6.LF.emit(e6.DN.OPEN_PAGE_SETUP,"cards")}}),(0,t.jsxs)(p.B,{w:"100%",children:[d&&(0,t.jsx)(eF.w,{onClose:l,onOpen:n,segmentEvent:e0.VV.GAMMA_PRO_UPSELL_EXPORT_SETTINGS_REMOVE_WATERMARK,targetWorkspace:i.organization}),w&&(0,t.jsx)(eY,{title:(0,t.jsx)(C.x6,{id:"Dj23Em"}),description:(0,t.jsx)(C.x6,{id:"vmddJA",values:{GAMMA_PROPER_NOUN:Q.On}}),buttonLabel:(0,t.jsx)(C.x6,{id:"p9wZJA",values:{GAMMA_PROPER_NOUN:Q.On}}),onClick:()=>{null===ev.zS||void 0===ev.zS||ev.zS.track(e0.VV.AI_DOC_SHOWCASE_ALLOWED,{doc_id:i.id})}})]})]})}):(0,t.jsxs)(W.F,{status:"warning",children:[(0,t.jsx)(eL.X,{children:(0,t.jsx)(C.x6,{id:"CfztD3"})}),(0,t.jsx)(eG.T,{children:(0,t.jsx)(C.x6,{id:"iKtv2V"})})]})},e9=e=>{let{fontDownloadLinks:i,showPageSetupTip:s,onOpenPageSetup:n}=e,l=i.length>0;return l||s?(0,t.jsxs)(p.B,{spacing:2.5,w:"100%",children:[l&&(0,t.jsxs)(W.F,{variant:"subtle",colorScheme:"gray",children:[(0,t.jsx)(V._,{pt:"1",children:(0,t.jsx)(y.g,{icon:v.jrc,fixedWidth:!0})}),(0,t.jsxs)(p.B,{spacing:.5,children:[(0,t.jsx)(eL.X,{children:(0,t.jsx)(C.x6,{id:"UcLOKc"})}),(0,t.jsx)(B.E,{children:(0,t.jsx)(C.x6,{id:"izsdAT"})}),(0,t.jsx)(eJ.B,{spacing:"2",pt:"2",children:i.map(e=>{let{name:i,url:s}=e;return(0,t.jsx)(g.$,{size:"xs",onClick:s?()=>window.open(s,"_blank"):void 0,cursor:s?"pointer":void 0,leftIcon:s?(0,t.jsx)(y.g,{icon:v.a_I,size:"sm",fixedWidth:!0}):void 0,children:i},"".concat(i,"-").concat(null!=s?s:"no-url"))})})]})]}),(0,t.jsxs)(W.F,{variant:"subtle",colorScheme:"gray",children:[(0,t.jsx)(V._,{pt:"1",children:(0,t.jsx)(y.g,{icon:v.zpE,fixedWidth:!0})}),(0,t.jsxs)(p.B,{spacing:.5,children:[(0,t.jsx)(eL.X,{children:(0,t.jsx)(C.x6,{id:"6ME5PO"})}),(0,t.jsxs)(B.E,{children:[(0,t.jsx)(C.x6,{id:"OrqjGh"})," ",(0,t.jsx)(w.qT,{label:(0,t.jsx)(C.x6,{id:"Sis0Fm",values:{GAMMA_PROPER_NOUN:Q.On}})})]})]})]}),s&&(0,t.jsx)(B.E,{fontSize:"sm",children:(0,t.jsx)(C.x6,{id:"8LhjM/",components:{0:(0,t.jsx)(g.$,{variant:"link",fontSize:"inherit",cursor:"pointer",onClick:n})}})})]}):null},e7=e=>{let{format:i,doc:s,editor:n,icon:l,accentColor:r,label:o,badge:a,customLabel:d,customInProgressMessage:c,cardRanges:x}=e,u=(0,I.u)("googleSlidesExport"),{interceptFileExport:h}=(0,e2.w)({doc:s,source:"share_panel",editor:n,cardRanges:x}),{handleExport:p,exportInProgress:m}=(0,e1.Up)({doc:s,source:"share_panel",editor:n,format:i,formatLabel:o,cardRanges:x,...u?{interceptFileExport:h}:{}});return(0,t.jsx)(e5.N,{onClick:p,icon:l,formatLabel:o,accentColor:r,exportInProgress:m,exportInProgressNote:(0,t.jsx)(C.x6,{id:"57bp6s"}),badge:a,customLabel:d,customInProgressMessage:c})};var ie=s(82203),ii=s.n(ie),is=s(84287),it=s(16936),il=s(23293),ir=s(5061);let io=e=>{let{children:i,setMobileSharePanelState:s,backButton:n=!0}=e,l=(0,ir.fW)();return(0,t.jsxs)(b.s,{width:"100%",position:"relative",mb:4,children:[n&&(0,t.jsx)(it.K,{icon:(0,t.jsx)(y.g,{icon:l?v.vmR:v.Uec}),"aria-label":"Back",variant:"unstyled",position:"absolute",height:"100%",insetStart:-4,onClick:()=>s("main")}),(0,t.jsx)(il.D,{size:"md",w:"100%",textAlign:"center",children:i})]})};var ia=s(14322),id=s(41471);let ic=()=>new BroadcastChannel("social_post"),ix=e=>{var i;let{doc:s,exportMode:n,cardRangesInput:l}=e,{isOpen:r,onOpen:o,onClose:a}=(0,ep.j)({id:"linkedin-post-modal"}),{data:d}=(0,q.kvr)(),c=null==d||null==(i=d.userIntegrations)?void 0:i.integrations;(0,k.useEffect)(()=>ic().addEventListener("message",e=>{"true"===e.data.success&&"linkedin"===e.data.platform&&o()}),[o]);let x=(0,k.useCallback)(()=>(null==c?void 0:c.includes(q.n30.Linkedin))?o():(0,ia.GE)({url:(0,G.n$)(),title:$.Ru._({id:"Abf1Uw"}),w:800,h:600}),[c,o]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e5.N,{onClick:x,formatLabel:"LinkedIn",icon:e4.q.linkedin.icon,rightIcon:v.t5Z,accentColor:e4.q.linkedin.accentColor,customLabel:$.Ru._({id:"x7i6H+"}),exportInProgress:!1}),r&&(0,t.jsx)(id.A,{isSocialPostModalOpen:r,onSocialPostModalClose:a,socialPlatform:"linkedin",cardRangesInput:"all"===n?"":l,doc:s})]})},iu=e=>{let{doc:i,editor:s,setMobileSharePanelState:n}=e,l=(0,I.u)("googleSlidesExport"),{product:r}=(0,is.I)();return(0,t.jsx)(eq.G_,{clientId:eQ.$.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,t.jsxs)(p.B,{alignItems:"center",flex:1,children:[(0,t.jsx)(io,{setMobileSharePanelState:n,children:(0,t.jsx)(C.x6,{id:"GS+Mus"})}),(0,t.jsxs)(p.B,{direction:"column",spacing:6,width:"100%",children:[(0,t.jsx)(ih,{format:"pdf",label:"PDF",icon:e4.q.pdf.icon,accentColor:e4.q.pdf.accentColor,doc:i,editor:s,cardRanges:void 0}),(0,t.jsx)(ih,{format:"pptx",label:"PowerPoint",icon:e4.q.pptx.icon,accentColor:e4.q.pptx.accentColor,doc:i,editor:s,cardRanges:void 0}),l&&(0,t.jsx)(ih,{format:"google_slides",label:"Google Slides",icon:e4.q.google_slides.icon,accentColor:e4.q.google_slides.accentColor,doc:i,editor:s,cardRanges:void 0,customLabel:$.Ru._({id:"wj3Fyq"}),customInProgressMessage:$.Ru._({id:"9ZkGtt"}),badge:void 0}),(0,t.jsx)(ih,{format:"image",label:"PNG",icon:e4.q.png.icon,accentColor:e4.q.png.accentColor,doc:i,editor:s,cardRanges:void 0,customLabel:$.Ru._({id:"wAyz08"}),customInProgressMessage:$.Ru._({id:"RSRVl9"})}),(0,t.jsx)(ix,{exportMode:"all",cardRangesInput:"",doc:i})]}),!r&&(0,t.jsx)(g.$,{width:"fit-content",mt:6,fontSize:"sm",variant:"ghost",display:"flex",as:ii(),href:"/pricing",leftIcon:(0,t.jsx)(w.uh,{w:4}),children:(0,t.jsx)(C.x6,{id:"vo61Ld",values:{GAMMA_PROPER_NOUN:Q.On}})}),(0,t.jsx)(j.h,{}),(0,t.jsx)(g.$,{variant:"toolbar",onClick:()=>n("main"),children:(0,t.jsx)(C.x6,{id:"yz7wBu"})})]})})},ih=e=>{let{format:i,doc:s,editor:n,icon:l,accentColor:r,label:o,badge:a,customLabel:d,customInProgressMessage:c,cardRanges:x,debuggingForceInProgress:u=!1}=e,h=(0,I.u)("googleSlidesExport"),{interceptFileExport:p}=(0,e2.w)({doc:s,source:"share_panel",editor:n,cardRanges:x}),{handleExport:m,exportInProgress:j}=(0,e1.Up)({doc:s,source:"share_panel",editor:n,format:i,formatLabel:o,cardRanges:x,...h?{interceptFileExport:p}:{}});return(0,t.jsx)(e5.N,{onClick:m,icon:l,formatLabel:o,accentColor:r,exportInProgress:j||u,exportInProgressNote:"",badge:a,customLabel:d,customInProgressMessage:c})};var ip=s(87827);let im=e=>{let{onRemoveUser:i,onCancel:s}=e,n=(0,er.dU)("gray.900","gray.50"),l=(0,er.dU)("gray.600","gray.200");return(0,t.jsxs)(p.B,{flex:1,children:[(0,t.jsx)(io,{setMobileSharePanelState:()=>{},backButton:!1,children:(0,t.jsx)(C.x6,{id:"3zSBeh"})}),(0,t.jsx)(B.E,{color:n,fontSize:"md",fontWeight:"semibold",children:(0,t.jsx)(C.x6,{id:"QhdP/l"})}),(0,t.jsx)(B.E,{color:l,fontSize:"sm",children:(0,t.jsx)(C.x6,{id:"Hl3Hbm"})}),(0,t.jsx)(j.h,{}),(0,t.jsx)(g.$,{variant:"hazardous",onClick:i,size:"lg",children:(0,t.jsx)(C.x6,{id:"t/YqKh"})}),(0,t.jsx)(g.$,{variant:"ghost",onClick:s,children:(0,t.jsx)(C.x6,{id:"dEgA5A"})})]})},ij=e=>{var i,s;let{doc:n,setMobileSharePanelState:l,confirmCallback:r,closeCallback:o,onRemoveUser:a,initialAccessType:d,accessOptions:x,passwordDialog:h="hidden",showRemoveUser:m=!1,showBackButton:f=!1,customHeader:w}=e,[S,_]=(0,k.useState)(d),I=(0,ir.fW)(),A=null==(i=x.find(e=>e.accessType===S))?void 0:i.disabled,R=null==n||null==(s=n.accessLinks)?void 0:s[0],E=(null==R?void 0:R.type)==="password",[T,D]=(0,k.useState)(!1);return T&&a?(0,t.jsx)(im,{onRemoveUser:a,onCancel:()=>{D(!1)}}):(0,t.jsxs)(b.s,{direction:"column",justifyContent:"space-between",flex:1,children:[(0,t.jsxs)(p.B,{spacing:5,children:[w||(0,t.jsx)(io,{setMobileSharePanelState:l,backButton:f,children:(0,t.jsx)(il.D,{size:"md",children:(0,t.jsx)(C.x6,{id:"zk0Twx"})})}),(0,t.jsx)(p.B,{children:(0,t.jsxs)(p.B,{mx:1,spacing:6,children:[x.map(e=>{let{disabled:i,accessType:s,errorText:n}=e;return(0,t.jsxs)(ee.z,{onClick:()=>i?null:_(s),children:[(0,t.jsx)(c.a,{w:4,transform:"translate(-.25rem)",children:s===S?(0,t.jsx)(y.g,{icon:v.e68}):""}),(0,t.jsxs)(p.B,{w:"100%",spacing:0,children:[(0,t.jsx)(B.E,{color:i?"gray.400":"",fontWeight:"semibold",children:eC.ef[s].title()}),(0,t.jsx)(B.E,{fontSize:"sm",color:i?"gray.400":"gray.500",fontWeight:"medium",children:eC.ef[s].description()}),n&&(0,t.jsx)(B.E,{color:"red.500",fontSize:"sm",mb:-2,children:n})]})]},s)}),(0,t.jsx)(u.c,{}),m&&(0,t.jsxs)(ee.z,{justifyContent:"space-between",alignItems:"center",onClick:()=>D(!0),color:"red.500",w:"100%",children:[(0,t.jsx)(c.a,{w:4,transform:"translate(-.25rem)",children:(0,t.jsx)(y.g,{icon:v.yLS,size:"xs"})}),(0,t.jsx)(B.E,{fontWeight:"semibold",children:(0,t.jsx)(C.x6,{id:"3zSBeh"})}),(0,t.jsx)(j.h,{})]}),("visible"===h||"disabled"===h)&&(0,t.jsxs)(ee.z,{justifyContent:"space-between",alignItems:"center",opacity:"disabled"===h?.6:1,onClick:()=>{"visible"===h&&l("password")},children:[(0,t.jsx)(c.a,{w:4,transform:"translate(-.25rem)",children:(0,t.jsx)(y.g,{icon:v.DW4})}),(0,t.jsxs)(p.B,{spacing:0,children:[(0,t.jsx)(B.E,{fontSize:"md",fontWeight:"semibold",children:(0,t.jsx)(C.x6,{id:"8ZsakT"})}),(0,t.jsx)(B.E,{fontSize:"sm",color:"gray.500",children:E?(0,t.jsx)(C.x6,{id:"GZ6qi2"}):(0,t.jsx)(C.x6,{id:"H6KqVd"})})]}),(0,t.jsx)(j.h,{}),(0,t.jsx)(y.g,{icon:I?v.Uec:v.vmR})]})]})})]}),(0,t.jsxs)(p.B,{spacing:5,children:[(0,t.jsx)(g.$,{variant:"solid",onClick:()=>A?null:r(S),isDisabled:A,size:"lg",fontWeight:"semibold",children:(0,t.jsx)(C.x6,{id:"7VpPHA"})}),(0,t.jsx)(g.$,{variant:"ghost",onClick:o,children:(0,t.jsx)(C.x6,{id:"dEgA5A"})})]})]})};var ig=s(4192);let ib=e=>{let{selectedCollaborator:i,handleRemoveClick:s}=e,n=i&&(0,ej.t)((null==i?void 0:i.email)||"");return(0,t.jsxs)(ig.vw,{size:"lg",minW:110,...n?{}:{colorScheme:"red"},children:["id"in i?(0,t.jsx)(w.Tz,{label:i.email,"aria-label":i.email,children:(0,t.jsxs)(ee.z,{children:[(0,t.jsx)(H.e,{size:"2xs",m:0,name:i.displayName,src:i.profileImageUrl}),(0,t.jsx)(B.E,{textTransform:"capitalize",wordBreak:"break-word",noOfLines:1,lineHeight:"1.5",children:i.displayName})]})}):(0,t.jsx)(w.Tz,{label:n?i.email:(0,t.jsx)(C.x6,{id:"XILg0L"}),"aria-label":i.email,children:(0,t.jsxs)(ee.z,{flex:1,children:[(0,t.jsx)(X.j,{size:6,children:(0,t.jsx)(y.g,{icon:n?v.y_8:v.bxP})}),(0,t.jsx)(B.E,{wordBreak:"break-all",display:"block",height:"100%",width:"100%",noOfLines:1,lineHeight:"1.5",children:i.email})]})}),(0,t.jsx)(ig.TV,{onClick:s})]})},iv=(0,eg.P)(c.a),iy=e=>{let{autoCompleteFilter:i,autoCompleteInputOnChange:s,autoCompleteInputOnKeyDown:n,autoCompleteInputOnPaste:l,autoCompleteOnSelectOption:r,autoCompleteOnTagRemoved:o,autocompleteRef:a,inputRef:d,inputValue:x,isProcessingBatch:u,searchUsers:h,selectedItems:p,shouldDisableInput:m,showControls:j,showCreatable:g}=e,f=(0,er.dU)("light","dark"),w=(0,er.dU)("trueblue.50","whiteAlpha.100"),C=(0,er.dU)("trueblue.100","whiteAlpha.200");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(eo.e,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-search-bar",children:[(0,t.jsx)(c.a,{flex:1,children:(0,t.jsxs)(ea.M,{w:"100%",justifyContent:"center",zIndex:2,children:[(0,t.jsx)(b.s,{display:u?"flex":"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",zIndex:"overlay",opacity:.4,children:(0,t.jsx)(ed.y,{})}),(0,t.jsxs)(ex.j9,{ref:a,values:p,maxSelections:100,maxSuggestions:20,creatable:!0,multiple:!0,freeSolo:!0,suggestWhenEmpty:!1,openOnFocus:!0,filter:i,onSelectOption:r,onTagRemoved:o,children:[(0,t.jsxs)(ec.W,{pointerEvents:"none",color:(0,er.dU)("gray.300","gray.600"),h:"100%",flexDirection:"column",children:[(0,t.jsx)(b.s,{flex:1}),(0,t.jsx)(b.s,{h:10,py:4,alignItems:"center",children:(0,t.jsx)(el.W,{w:10})})]}),(0,t.jsx)(ex.Rv,{ref:d,"data-testid":"autocomplete-collaborators-input",cursor:m?"not-allowed":void 0,disabled:m,w:"100%",paddingInlineStart:5,wrapStyles:{px:2},fontSize:"md",placeholder:$.Ru._({id:"P8H57Z"}),transition:"width 1s ease-in-out",value:x,onKeyDown:n,onPaste:l,onChange:s}),(0,t.jsx)(ex.HN,{w:"100%",mt:0,display:x.length>0?"flex":"none","data-theme":f,children:h.map(e=>{let{id:i,email:s,displayName:n,profileImageUrl:l}=e;return(0,t.jsx)(ex.qF,{fixed:!0,"data-testid":"autocomplete-item-user-".concat(i),value:{email:s,type:"collaborator"},getValue:e=>e.email,align:"center",_focus:{bg:w},children:(0,t.jsxs)(ee.z,{children:[(0,t.jsx)(H.e,{size:"sm",name:n,src:l}),(0,t.jsxs)(c.a,{children:[(0,t.jsx)(B.E,{textTransform:"capitalize",children:n}),(0,t.jsx)(B.E,{fontSize:"xs",color:"gray.500",children:null==s?void 0:s.toLowerCase()})]})]})},i)}).concat((0,t.jsx)(ex.qF,{value:{email:x,type:"collaborator"},align:"center",display:g?"flex":"none",_focus:{bg:w},children:(0,t.jsxs)(ee.z,{children:[(0,t.jsx)(X.j,{bg:C,size:8,children:(0,t.jsx)(y.g,{icon:v.y_8})}),(0,t.jsx)(B.E,{size:"md",children:x})]})},x))})]})]})}),(0,t.jsx)(iv,{overflowX:"hidden",me:-2,transition:"slow",animate:{maxWidth:j?"200px":"0px"}})]}),p.map((e,i)=>(0,t.jsx)(c.a,{children:(0,t.jsx)(ib,{idx:i,selectedCollaborator:e,handleRemoveClick:()=>{var i;null==(i=a.current)||i.removeItem(e.email)}})},"id"in e?e.id:e.email))]})},iw=()=>({view:{subtitle:$.Ru._({id:"ihPQra"}),tooltip:(0,D.h9)()},comment:{subtitle:$.Ru._({id:"qPZYdC"}),tooltip:$.Ru._({id:"oKPro/",values:{0:(0,D.h9)()}})},edit:{subtitle:$.Ru._({id:"TVFcVE"}),tooltip:$.Ru._({id:"2gPY9r",values:{0:(0,D.h9)()}})},manage:{subtitle:$.Ru._({id:"bKvp4s"}),tooltip:$.Ru._({id:"+OkTAI",values:{0:(0,D.h9)()}})}}),iC=(e,i,s)=>{if(!s)return e;let t=[...e],n=e.findIndex(e=>"email"in e&&e.email===s),l=i.find(e=>e.email===s);return -1!==n&&t.splice(n,1),[...t,l||{email:s}]},ik=(e,i)=>{let s=(0,ew.e7)(i.map(e=>"displayName"in e?e.displayName:e.email),3);return e===q.aXG.Manage?$.Ru._({id:"4bKxWq",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}}):e===q.aXG.Edit?$.Ru._({id:"3rbi6Y",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}}):e===q.aXG.Comment?$.Ru._({id:"uGWY40",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}}):e===q.aXG.View?$.Ru._({id:"p5IG6F",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}}):$.Ru._({id:"Ai1TAT",values:{userNames:s,GAMMA_ARTIFACT_PROPER_NOUN:Q.TP,0:i.length}})},iS=e=>{var i,s;let{doc:n,setMobileSharePanelState:r,lastSearchText:o,setLastSearchText:a}=e,d=(0,l.d)(),c=(0,ir.fW)(),[x,h]=(0,k.useState)([]),m=(0,F.ur)().user,f=(0,k.useRef)(null),[b,w]=(0,k.useState)(!1),S=(0,ip.n)(iw),_=null==n||null==(i=n.accessLinks)?void 0:i[0],I=(null==_?void 0:_.type)==="password",A=(null==n?void 0:n.collaborators)||[],R=(null==n||null==(s=n.organization)?void 0:s.id)||"",[E,T]=(0,k.useState)(!1),[D,P]=(0,k.useState)(q.aXG.Edit),O=b&&"manage"===D,M=(0,k.useCallback)(()=>{T(!0)},[T]),[z,N]=(0,k.useState)(!1),L=(0,k.useRef)(),G=(0,k.useRef)(null),[U,W]=(0,k.useState)(null!=o?o:""),[V,H]=(0,k.useState)([]),[X,K]=(0,k.useState)(new ey.c),J=x.filter(e=>"email"in e),Q=(0,ev.st)(),Z=A.map(e=>e.user),[ei,{error:es}]=(0,q.VXs)();(0,Y.KW)("Error inviting collaborators.",es);let en=(0,q.tzS)(q.HdQ),{data:el,loading:er}=(0,q.puH)({variables:{query:U,workspaceId:R},skip:!U});(0,k.useEffect)(()=>{!er&&el&&H(el.search.filter(Boolean))},[el,er]);let eo=(0,k.useMemo)(()=>U?V.filter(e=>"User"===e.__typename&&e.id!==m.id&&!J.concat(Z).find(i=>i.email===e.email)):[],[V,Z,U,J,m.id]),ea=!!U&&!eo.find(e=>e.email===U),ed=J.some(e=>!("__typename"in e&&"User"===e.__typename)),ec=D===q.aXG.Manage&&ed;(0,k.useEffect)(()=>{w(ed)},[w,ed]);let ex=!!x.length,eu=!!J.some(e=>{var i;return"__typename"in e&&"User"===e.__typename||(0,ej.t)(null!=(i=e.email)?i:"")}),eh=(null==n?void 0:n.id)||"",ep=(0,k.useCallback)(async e=>{N(!0),h(i=>e.reduce((e,i)=>iC(e,eo,i.trim()),i));let i=(await Promise.all(e.map(async e=>{var i;return null==(i=(await en({workspaceId:R,query:e})).data)?void 0:i.search.find(i=>"User"===i.__typename&&i.email===e)}))).filter(Boolean);h(s=>e.reduce((e,s)=>iC(e,i,s.trim()),s)),N(!1)},[eo,en,R,h]),em=(0,k.useCallback)(async()=>{if(0===J.length)return;let e=iC(J,eo,U.trim()).filter(e=>"email"in e&&(0,ej.t)(e.email||"")),i=[...A,...e.map(e=>{if("id"in e)return{docId:eh,user:e,guest:!1,permission:D,__typename:"DocCollaborator"}})].filter(e=>!!e),s=[...(null==n?void 0:n.invitations)||[],...e.map(e=>{if(!("id"in e))return{id:"temp",docTitle:"temp-title",invitedBy:m,docId:eh,email:e.email,permission:D,__typename:"DocInvitation"}})].filter(e=>!!e);return ei({variables:{docId:eh,collaborators:e.map(e=>({..."id"in e?{userId:e.id}:{email:e.email},permission:D}))},update:(e,i)=>{let{data:s}=i;e.writeFragment({id:"Doc:".concat(eh),fragment:q.rgw,data:null==s?void 0:s.addCollaborators})},optimisticResponse:{addCollaborators:{id:eh,collaborators:i,invitations:s}}}).then(()=>{d({title:$.Ru._({id:"Ka86rB",values:{0:e.length}}),description:ik(D,e),status:"success",duration:5e3,isClosable:!0,position:"top"}),null==Q||Q.track(ev.VV.DOC_COLLABORATOR_INVITED,{doc_id:eh,source:"share-panel",number_of_invites_sent:e.length,permissions:D})})},[ei,eh,null==n?void 0:n.invitations,U,D,eo,J,A,d,m,Q]),eg=(0,k.useCallback)(async()=>Promise.all([em()]).then(()=>{var e;h([]),W(""),null==(e=L.current)||e.resetItems(!0),X.resolve(),K(new ey.c)}).catch(e=>{console.warn(e)}),[em,X,h]);return((0,k.useEffect)(()=>{f&&(f.current=eg)},[f,eg]),(0,k.useEffect)(()=>{"string"==typeof o&&(0,ej.t)(o)&&(ep([o]),W("")),a(void 0)},[ep,o,a]),E)?(0,t.jsx)(ij,{initialAccessType:D,setMobileSharePanelState:e=>r(e),confirmCallback:e=>{P(e),T(!1)},closeCallback:()=>T(!1),accessOptions:[{accessType:q.aXG.Manage,disabled:b,...b?{errorText:"User needs to be part of your workspace to have Full Access."}:{}},{accessType:q.aXG.Edit},{accessType:q.aXG.Comment},{accessType:q.aXG.View}]}):(0,t.jsxs)(p.B,{flex:1,children:[(0,t.jsx)(io,{setMobileSharePanelState:r,children:(0,t.jsx)(C.x6,{id:"MFKlMB"})}),m&&(0,t.jsx)(iy,{autoCompleteFilter:(e,i)=>!J.find(e=>e.email===i),autoCompleteInputOnChange:e=>{let{target:i}=e,{value:s}=i;W(s),s||H([])},autoCompleteInputOnKeyDown:e=>{let{key:i}=e;if("Backspace"===i&&0===U.length&&x.length>0){let e=x.slice(-1).pop();if(e){var s;null==(s=L.current)||s.removeItem("email"in e?e.email:e.id)}}},autoCompleteInputOnPaste:e=>{e.preventDefault(),e.stopPropagation(),ep(e.clipboardData.getData("Text").trim().split(/[,|;\s]+/)),W(""),H([])},autoCompleteOnSelectOption:e=>{let{item:i}=e,{type:s}=i.originalValue;"collaborator"===s&&h(e=>iC(e,eo,i.value)),W("")},autoCompleteOnTagRemoved:e=>{h(i=>[...i].filter(i=>"email"in i?i.email!==e:!("id"in i)||i.id!==e))},autocompleteRef:L,inputRef:G,inputValue:U,isProcessingBatch:z,searchUsers:eo,showControls:ex,showCreatable:ea,selectedItems:x,shouldDisableInput:!1}),(0,t.jsx)(j.h,{}),(0,t.jsx)(u.c,{}),(0,t.jsx)(B.E,{children:(0,t.jsx)(C.x6,{id:"9cDpsw"})}),(0,t.jsxs)(ee.z,{spacing:2,justify:"space-between",children:[(0,t.jsx)(et.$,{icon:I?v.OKD:v.CQO,showDisabled:b&&"manage"===D,size:10}),(0,t.jsxs)(p.B,{spacing:.5,children:[(0,t.jsx)(B.E,{color:O?"gray.400":"",children:eC.ef[D].title()}),(0,t.jsx)(B.E,{fontSize:"xs",color:O?"gray.400":"gray.500",children:S[D].subtitle})]}),(0,t.jsx)(j.h,{}),(0,t.jsxs)(g.$,{variant:"ghost",onClick:M,children:[(0,t.jsx)(B.E,{me:3,children:(0,t.jsx)(C.x6,{id:"o+XJ9D"})}),(0,t.jsx)(y.g,{icon:c?v.Uec:v.vmR,size:"lg"})]})]}),O&&(0,t.jsx)(B.E,{color:"red.500",fontSize:"sm",children:(0,t.jsx)(C.x6,{id:"yxdnLB"})}),(0,t.jsx)(u.c,{m:4}),(0,t.jsx)(g.$,{variant:"solid",size:"lg",onClick:()=>{f.current&&f.current(),r("main")},isDisabled:!eu||ec,children:(0,t.jsx)(C.x6,{id:"MFKlMB"})}),(0,t.jsx)(g.$,{variant:"ghost",color:"inherit",onClick:()=>r("main"),children:(0,t.jsx)(C.x6,{id:"dEgA5A"})})]})};var i_=s(33787),iI=s(74892),iA=s(45143);let iR=e=>{let{icon:i,text:s,ariaLabel:n,onClick:l}=e,r=(0,z.rd)();return(0,t.jsxs)(p.B,{direction:"column",alignItems:"center",spacing:2,onClick:l,flex:1,overflow:"hidden",whiteSpace:"nowrap",children:[(0,t.jsx)(it.K,{bg:"gray.200",color:"gray.700",borderRadius:"full","aria-label":n,textAlign:"center",variant:"ghost",size:"lg",children:(0,t.jsx)(y.g,{icon:i})}),(0,t.jsx)(B.E,{fontSize:"sm",color:r?"white":"deepocean.950",fontWeight:"semibold",align:"center",textOverflow:"ellipsis",maxW:"100%",overflow:"hidden",whiteSpace:"normal",noOfLines:2,children:s})]})},iE=e=>{let{icon:i,onClick:s,text:n,rightText:l}=e,r=(0,ir.fW)();return(0,t.jsx)(g.$,{onClick:s,width:"100%",variant:"unstyled",fontWeight:"",children:(0,t.jsxs)(ee.z,{children:[(0,t.jsx)(X.j,{color:"gray.700",textAlign:"center",bg:"gray.200",size:10,children:(0,t.jsx)(y.g,{icon:i})}),(0,t.jsx)(B.E,{children:n}),(0,t.jsx)(j.h,{}),(0,t.jsx)(g.$,{variant:"unstyled",minW:"0",children:l?(0,t.jsxs)(ee.z,{spacing:3,children:[(0,t.jsx)(B.E,{children:l}),(0,t.jsx)(y.g,{icon:r?v.Uec:v.vmR})]}):(0,t.jsx)(y.g,{icon:r?v.Uec:v.vmR})})]})})},iT=e=>{var i,s,r,o,a,d,c;let{doc:x,setMobileSharePanelState:h,handleViewAnalyticsClick:m,closeSharePanel:f,showAnalytics:S}=e,_=(0,k.useRef)(!1),{user:I}=(0,F.ur)(),A=(0,l.d)(),R=(0,P.ZP)(x,I),E=R?(0,P.bC)()[R]:null;(null==x||null==(i=x.organization)?void 0:i.id)||_.current||(console.error("[SharePanelModal] Doc unexpectedly doesnt have a workspaceId",{docId:x.id,organization:x.organization}),_.current=!0);let D=null!=(d=null==x||null==(s=x.titleCard)?void 0:s.previewUrl)?d:iI.A.src,O=null==x||null==(r=x.accessLinks)?void 0:r[0],M=(0,k.useMemo)(()=>(0,G.LN)({docTitle:null==x?void 0:x.title,docId:null==x?void 0:x.id,token:null==O?void 0:O.token,absolute:!0}),[x,null==O?void 0:O.token]),{anonymousUser:z}=(0,F.ur)(),N={...z,organizations:[]},{profileImageUrl:L}=I||N,U=(0,iA.h5)(["xs","sm"]),{onCopy:W}=(0,n.i)(M),V="link-copied-toast",X=(0,k.useCallback)(()=>{W(),A.isActive(V)||A({id:V,title:(0,t.jsx)(C.x6,{id:"pQjjYo"}),status:"success",duration:5e3,position:"top"}),(0,T.dd)({docId:x.id,source:"sharePanel",type:"tokenUrl"})},[x.id,W,A]),K=(0,k.useCallback)(async()=>{let e={title:x.title,text:"Shared via Gamma",url:M};await navigator.share(e)},[x.title,M]),J=(null==O?void 0:O.permission)?null==O?void 0:O.permission:eC.F$.NoAccess,q=x&&I&&(null==x||null==(o=x.createdBy)?void 0:o.id)===(null==I?void 0:I.id)?$.Ru._({id:"av/PD9"}):null!=(c=null==x||null==(a=x.createdBy)?void 0:a.firstName)?c:"";return null===E?(console.error("[SharePanel] Unknown VisibilityValue for doc",x),null):(0,t.jsxs)(p.B,{w:"100%",spacing:2,children:[(0,t.jsxs)(b.s,{justify:"space-between",children:[(0,t.jsx)(il.D,{children:(0,t.jsx)(C.x6,{id:"Z8lGw6"})}),(0,t.jsx)(g.$,{"data-share-panel-close-button":!0,variant:"ghost",px:0,onClick:e=>{e.preventDefault(),f()},children:(0,t.jsx)(B.E,{fontWeight:"semibold",children:(0,t.jsx)(C.x6,{id:"DPfwMq"})})})]}),(0,t.jsxs)(p.B,{alignItems:"center",spacing:5,mb:2,children:[(0,t.jsx)(i_._,{borderRadius:"md",shadow:"xl",src:D,w:250}),(0,t.jsxs)(b.s,{gap:2,alignItems:"center",children:[(0,t.jsx)(H.e,{src:L,showBorder:!1,size:U}),(0,t.jsx)(B.E,{color:"gray.600",fontSize:"sm",children:(0,t.jsx)(C.x6,{id:"0jxROC",values:{createdByUser:q}})})]})]}),S&&(0,t.jsx)(g.$,{variant:"ghost",color:"inherit",onClick:m,leftIcon:(0,t.jsx)(y.g,{icon:v.q9c}),children:(0,t.jsx)(B.E,{fontSize:"md",children:(0,t.jsx)(C.x6,{id:"YaUqUV"})})}),(0,t.jsxs)(p.B,{spacing:4,mt:2,children:[(0,t.jsx)(w._x,{children:(0,t.jsx)(C.x6,{id:"xXYV+r"})}),(0,t.jsx)(iE,{icon:v.CQO,onClick:()=>h("manage-access"),rightText:eC.ef[J].title(),text:(0,t.jsx)(C.x6,{id:"qZu20V"})}),(0,t.jsx)(iE,{icon:v.USd,onClick:()=>h("members"),text:(0,t.jsx)(C.x6,{id:"hB02vO"})})]}),(0,t.jsx)(j.h,{}),(0,t.jsxs)(p.B,{spacing:6,children:[(0,t.jsx)(u.c,{}),(0,t.jsxs)(ee.z,{w:"100%",overflow:"hidden",alignItems:"start",children:[(0,t.jsx)(iR,{onClick:X,text:(0,t.jsx)(C.x6,{id:"A/z0Uc"}),ariaLabel:$.Ru._({id:"y1eoq1"}),icon:v.CQO}),(0,t.jsx)(iR,{onClick:()=>h("invite"),text:(0,t.jsx)(C.x6,{id:"wEi1R1"}),ariaLabel:$.Ru._({id:"MFKlMB"}),icon:v.nWR}),(0,t.jsx)(iR,{onClick:K,text:(0,t.jsx)(C.x6,{id:"Mh3GfE"}),ariaLabel:$.Ru._({id:"Z8lGw6"}),icon:v.t5Z}),(0,t.jsx)(iR,{onClick:()=>h("export"),text:(0,t.jsx)(C.x6,{id:"WwCRK2"}),ariaLabel:$.Ru._({id:"GS+Mus"}),icon:v.a_I})]})]})]})},iD=e=>{var i,s;let{doc:n,setMobileSharePanelState:r}=e,o=(null==n||null==(s=n.accessLinks)||null==(i=s[0])?void 0:i.permission)||eC.F$.NoAccess,a=(0,l.d)(),d=e=>()=>{a({title:"updated"===e?$.Ru._({id:"Xpw8aE"}):$.Ru._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},[c]=(0,q.vcy)(),x=e=>{var i;let s=null==n||null==(i=n.accessLinks)?void 0:i[0],t=null==s?void 0:s.id,l={id:n.id,accessLinks:e===eC.F$.NoAccess?[{permission:null}]:[{permission:e}]};c({variables:l,optimisticResponse:{updateDoc:{...l,accessLinks:[{__typename:"AccessLink",id:t||"temp-id",permission:e===eC.F$.NoAccess?null:e}],__typename:"Doc"}}}).then(d(e===eC.F$.NoAccess?"removed":"updated"))};return(0,t.jsx)(ij,{doc:n,setMobileSharePanelState:r,confirmCallback:e=>{x(e),r("main")},closeCallback:()=>r("main"),initialAccessType:o,accessOptions:[{accessType:q.aXG.Edit},{accessType:q.aXG.Comment},{accessType:q.aXG.View},{accessType:eC.F$.NoAccess}],passwordDialog:o===eC.F$.NoAccess?"disabled":"visible",showBackButton:!0})},iP=e=>{let{icon:i,rtlIcon:s,...n}=e,l=(0,ir.fW)();return(0,t.jsx)(y.g,{icon:l?s:i,...n})},iO=(e,i)=>{var s,t;let n="DocCollaborator"===e.__typename?null==(s=e.user.displayName)?void 0:s.toUpperCase():"DocInvitation"===e.__typename?e.email.toUpperCase():"",l="DocCollaborator"===i.__typename?null==(t=i.user.displayName)?void 0:t.toUpperCase():"DocInvitation"===i.__typename?i.email.toUpperCase():"";return!l||n&&n<l?-1:!n||l&&n>l?1:0},iM=(e,i)=>{if(e.permission!==i.permission){if("manage"===e.permission)return -1;if("manage"===i.permission)return 1}return iO(e,i)},iz=e=>{var i,s;let{doc:n,setMobileSharePanelState:r,canManage:o,setLastSearchText:a}=e,d=(0,l.d)(),{user:x}=(0,F.ur)(),u=(0,ir.fW)(),[h,m]=(0,k.useState)(!1),[f,b]=(0,k.useState)(null),[w,S]=(0,k.useState)(!1),_=(null==n?void 0:n.collaborators)||[],[I]=(0,q.VXs)(),A=(null==n?void 0:n.invitations)||[],R=[..._,...A].sort(iM),E=_.filter(e=>e.permission===q.aXG.Manage).length,T=(null==n||null==(i=n.organization)?void 0:i.id)||"",{isConnected:D}=(0,q.utY)(),P=o&&D,[O,M]=(0,k.useState)(""),[z]=(0,q.AmA)(),N=(0,er.dU)("gray.600","gray.200"),L=e=>()=>{d({title:"updated"===e?$.Ru._({id:"Xpw8aE"}):$.Ru._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},G=e=>{if((null==f?void 0:f.__typename)!=="DocCollaborator")return;let i=f.user;if(!i)return;let s={docId:n.id,collaborators:[{userId:i.id,permission:e}]};I({variables:s,optimisticResponse:{addCollaborators:{id:s.docId,collaborators:_.map(s=>({...s,permission:s.user.id===i.id?e:s.permission})),invitations:A,__typename:"Doc"}}}).then(L("updated")).catch(()=>{})},U=e=>{if((null==f?void 0:f.__typename)!=="DocInvitation")return;let i={docId:n.id,collaborators:[{email:f.email,permission:e}]};I({variables:i,optimisticResponse:{addCollaborators:{id:i.docId,invitations:A.map(i=>({...i,permission:i.email===f.email?e:i.permission})),collaborators:_,__typename:"Doc"}}}).then(L("updated")).catch(()=>{console.warn("Error updating permission")})},W=()=>{if(f)if((null==f?void 0:f.__typename)==="DocCollaborator"){if(!f)return;let e=f.user.id,i={docId:n.id,collaborators:[{userId:e}]};z({variables:i,optimisticResponse:{removeCollaborators:{id:i.docId,collaborators:_.filter(i=>i.user.id!==e),invitations:A,__typename:"Doc"}}}).then(L("removed"))}else{let e={docId:n.id,collaborators:[{email:f.email}]};z({variables:e,optimisticResponse:{removeCollaborators:{id:e.docId,invitations:A.filter(e=>e.email!==f.email),collaborators:_,__typename:"Doc"}}}).then(L("removed"))}},V=f&&"user"in f?f.user.profileImageUrl:"",K=null==f?"":"user"in f?null==(s=f.user)?void 0:s.displayName:null==f?void 0:f.email,J=(0,iA.h5)(["xs","sm"]),Q=R.filter(e=>{var i,s,t,n;let l=O.toLowerCase();if("DocCollaborator"===e.__typename){let t=e.user;return(null==t||null==(i=t.email)?void 0:i.toLowerCase().includes(l))||(null==t||null==(s=t.displayName)?void 0:s.toLowerCase().includes(l))}return"DocInvitation"===e.__typename&&(null==e||null==(n=e.email)||null==(t=n.toLowerCase())?void 0:t.includes(l))});return h?(0,t.jsx)(ij,{setMobileSharePanelState:r,confirmCallback:e=>{(null==f?void 0:f.__typename)==="DocCollaborator"&&G(e),(null==f?void 0:f.__typename)==="DocInvitation"&&U(e),m(!1)},closeCallback:()=>m(!1),onRemoveUser:()=>{W(),m(!1)},initialAccessType:null==f?void 0:f.permission,showRemoveUser:!0,accessOptions:[...w?[{accessType:q.aXG.Manage}]:[],{accessType:q.aXG.Edit},{accessType:q.aXG.Comment},{accessType:q.aXG.View}],customHeader:(0,t.jsxs)(p.B,{spacing:4,children:[(0,t.jsxs)(ee.z,{w:"100%",position:"relative",alignItems:"flex-start",children:[(0,t.jsx)(it.K,{icon:(0,t.jsx)(iP,{icon:v.Uec,rtlIcon:v.vmR}),"aria-label":"Back",variant:"unstyled",position:"absolute",height:"fit-content",insetStart:-4,onClick:()=>m(!1)}),(0,t.jsxs)(ee.z,{justifyContent:"center",minW:"100%",children:[(0,t.jsx)(H.e,{src:V,size:J}),(0,t.jsx)(B.E,{children:K})]})]}),(0,t.jsx)(B.E,{fontSize:"sm",color:"#7A7A7A",children:(0,t.jsx)(C.x6,{id:"zk0Twx"})})]})}):(0,t.jsxs)(p.B,{spacing:3,flex:1,children:[(0,t.jsx)(io,{setMobileSharePanelState:r,children:(0,t.jsx)(C.x6,{id:"wlQNTg"})}),(0,t.jsxs)(ea.M,{children:[(0,t.jsx)(ec.W,{children:(0,t.jsx)(y.g,{icon:v.$UM,size:"xs"})}),(0,t.jsx)(e$.p,{value:O,onChange:e=>M(e.target.value),placeholder:$.Ru._({id:"Ar2aUr"})})]}),(0,t.jsx)(B.E,{fontSize:"xs",color:"gray.500",children:(0,t.jsx)(C.x6,{id:"t9qtWL"})}),Q.length>0?(0,t.jsx)(eT,{showDivider:!1,isDark:!1,children:Q.map(e=>{let i=e.permission===q.aXG.Manage&&E<2,s=!P||i,l=eC.ef[e.permission].title();if("DocCollaborator"===e.__typename){var r;let i=e.user;return(0,t.jsx)(c.a,{onClick:()=>{b(e),S(!(null==e?void 0:e.guest)),m(!0)},as:"button",textAlign:"start",children:(0,t.jsx)(eR._,{testId:i.email,title:"".concat(i.displayName," ").concat(i.id===(null==x?void 0:x.id)?$.Ru._({id:"dDUgzP"}):""),img:(0,t.jsx)(H.e,{name:i.displayName,src:i.profileImageUrl,size:"sm"}),subtitle:s?void 0:i.email,isDisabled:s,disabledText:l,workspaceGuestInvite:!s&&e.guest?(0,t.jsx)(eD.L,{name:i.displayName,workspaceName:null==(r=n.organization)?void 0:r.name,workspaceId:T,email:e.user.email}):void 0,permissionsControl:(0,t.jsxs)(ee.z,{spacing:3,children:[(0,t.jsx)(B.E,{children:l}),(0,t.jsx)(it.K,{minW:"auto",icon:(0,t.jsx)(y.g,{icon:u?v.Uec:v.vmR}),variant:"unstyled","aria-label":"change user's permission"})]})},i.id)})}return"DocInvitation"===e.__typename?(0,t.jsx)(c.a,{onClick:()=>{b(e),S(!1),m(!0)},as:"button",textAlign:"start",children:(0,t.jsx)(eR._,{testId:e.email,title:e.email,subtitle:$.Ru._({id:"MActeE"}),img:(0,t.jsx)(X.j,{bg:"trueblue.50",size:8,children:(0,t.jsx)(y.g,{icon:v.y_8,size:"sm"})}),isDisabled:s,disabledText:l,permissionsControl:(0,t.jsxs)(ee.z,{spacing:3,children:[(0,t.jsx)(B.E,{children:l}),(0,t.jsx)(it.K,{icon:(0,t.jsx)(y.g,{icon:v.vmR}),minW:"auto",variant:"unstyled","aria-label":"change user's permission"})]})},e.email)}):null})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.h,{}),(0,t.jsxs)(p.B,{alignItems:"center",spacing:4,children:[(0,t.jsxs)(p.B,{alignItems:"center",children:[(0,t.jsx)(il.D,{size:"lg",children:"We didn’t find a match"}),(0,t.jsx)(B.E,{textAlign:"center",color:N,children:(0,t.jsx)(C.x6,{id:"WSFelQ"})})]}),(0,t.jsx)(g.$,{leftIcon:(0,t.jsx)(y.g,{icon:v.nWR}),shadow:"md",size:"sm",onClick:()=>{a(O),r("invite")},children:(0,t.jsx)(C.x6,{id:"x1m5RZ"})})]}),(0,t.jsx)(j.h,{})]}),(0,t.jsx)(j.h,{}),(0,t.jsx)(g.$,{variant:"ghost",onClick:()=>r("main"),children:(0,t.jsx)(C.x6,{id:"2YCifi"})})]})};var iF=s(99430),iN=s(89528),iL=s(74003);let iG=e=>{var i;let{onClose:s,onOpen:n,accessLinkEnabled:r,doc:o,isDark:a,segmentEvent:d,isMobile:c=!1}=e,x=(0,l.d)(),{openUpsellModal:u}=(0,iL.I)(),h=(0,ev.st)(),[f,{data:b,loading:v}]=(0,q.FTT)(),[y,S]=(0,k.useState)(""),[_,I]=(0,k.useState)(""),[A,{loading:E}]=(0,q.cdD)(),[T]=(0,q.M5P)(),[D]=(0,q.snR)(),O=(0,R.ez)("password_protected_docs",o.organization),M=null==o||null==(i=o.accessLinks)?void 0:i[0],z=(null==M?void 0:M.type)==="password",[F,N]=(0,k.useState)((null==b?void 0:b.getDocPassword)||""),[L,G]=(0,k.useState)(z),W=z||L;(0,k.useEffect)(()=>{if(G(z),!z){S(""),N("");return}f({variables:{docId:o.id},fetchPolicy:"network-only",nextFetchPolicy:"network-only"}).then(e=>{let{data:i}=e;S((null==i?void 0:i.getDocPassword)||""),N((null==i?void 0:i.getDocPassword)||"")})},[o,z,f,S]);let V=(0,k.useCallback)(e=>{if(r)if(O){if(G(e.target.checked),!e.target.checked){if(!z)return;T({variables:{docId:o.id}}).then(()=>{var e;null==h||h.track(ev.VV.DOC_PASSWORD_DISABLED,{doc_id:o.id,file_id:null==(e=o.file)?void 0:e.id}),x({title:(0,t.jsx)(C.x6,{id:"UbegbY"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}),S(""),N("")}}else e.preventDefault(),u({onOpenCallback:s,onCloseCallback:n,segmentEvent:d})},[r,o,z,O,u,n,s,T,d,x,h]),H=(0,k.useCallback)(async()=>{var e,i;if(y.length<4||y.length>64)return void I($.Ru._({id:"S04MAD",values:{MIN_PASSWORD_LENGTH:4,MAX_PASSWORD_LENGTH:64}}));let s=null==(e=o.file)?void 0:e.searchEngineIndexingEnabled,n=null==(i=o.file)?void 0:i.id;if(!n)return void x({title:(0,t.jsx)(C.x6,{id:"SlfejT"}),description:(0,t.jsx)(C.x6,{id:"v41fCm"}),status:"error",duration:5e3,isClosable:!0,position:"top"});await A({variables:{docId:o.id,password:y},refetchQueries:["GetDocPassword","GetDoc"]}),null==h||h.track(ev.VV.DOC_PASSWORD_ENABLED,{doc_id:o.id,file_id:n}),s?(await D({variables:{fileId:n,enable:!1}}),x((0,P.oe)(o.title))):x({title:(0,t.jsx)(C.x6,{id:"Hw2MHB"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),N(y)},[o,y,N,I,A,D,x,h]);return(0,t.jsxs)(p.B,{w:"100%",children:[(0,t.jsxs)(ee.z,{mt:4,mb:2*!!c,children:[(0,t.jsxs)(ee.z,{children:[(0,t.jsx)(B.E,{children:(0,t.jsx)(C.x6,{id:"F5g7OG"})}),!O&&(0,t.jsx)(iN.zL,{product:"pro"})]}),(0,t.jsx)(j.h,{}),(0,t.jsx)(w.Tz,{label:r?"":(0,t.jsx)(C.x6,{id:"5JvE0U"}),isDisabled:r,shouldWrapChildren:!0,placement:"top",children:(0,t.jsx)(iF.d,{isChecked:L,disabled:!r,onChange:V})})]}),(0,t.jsx)(U.S,{in:W,children:(0,t.jsxs)(eX.MJ,{isInvalid:!!_,children:[(0,t.jsx)(ee.z,{children:v?(0,t.jsx)(m.E,{height:"40px",width:"50%",borderRadius:"md"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e$.p,{id:"password",type:"text",value:y,onChange:e=>S(e.currentTarget.value),onKeyUp:e=>{"Enter"===e.key&&H(),_&&y.length>=4&&y.length<=64&&I("")},width:c?"100%":"50%",placeholder:$.Ru._({id:"f7sXvi"}),bg:a?void 0:"white"}),(0,t.jsx)(g.$,{isDisabled:y===F,variant:"plain",onClick:H,isLoading:E,children:(0,t.jsx)(C.x6,{id:"tfDRzk"})})]})}),(0,t.jsx)(U.S,{in:""!==_,children:(0,t.jsx)(eK.Wt,{children:_})})]})})]})},iB=e=>{var i;let{doc:s,setMobileSharePanelState:n}=e,l=null==s||null==(i=s.accessLinks)?void 0:i[0],r=((null==l?void 0:l.permission)?null==l?void 0:l.permission:eC.F$.NoAccess)===eC.F$.NoAccess;return(0,t.jsx)(b.s,{direction:"column",justifyContent:"space-between",pb:2,flex:1,children:(0,t.jsxs)(c.a,{children:[(0,t.jsx)(io,{setMobileSharePanelState:n,children:(0,t.jsx)(C.x6,{id:"8ZsakT"})}),(0,t.jsx)(iG,{segmentEvent:ev.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_SET_PASSWORD,doc:s,isDark:!1,isMobile:!0,accessLinkEnabled:!r}),(0,t.jsx)(B.E,{fontSize:"xs",color:"gray.500",my:3,children:(0,t.jsx)(C.x6,{id:"mpXIQf",values:{GAMMA_ARTIFACT_PROPER_NOUN:Q.TP}})}),(0,t.jsx)(B.E,{fontSize:"xs",color:"gray.500",mb:4,children:(0,t.jsx)(C.x6,{id:"jMXOQQ"})})]})})},iU=e=>{let{isSharePanelOpen:i,closeIfReady:s,doc:n,editor:l,handleViewAnalyticsClick:r,showAnalytics:o}=e,[a,d]=(0,k.useState)("main"),c=(0,z.rd)(),x=(0,k.useCallback)(()=>{s(),d("main")},[s,d]),[u,h]=(0,k.useState)(void 0);return n?(0,t.jsx)(w.L8,{isDark:c,children:(0,t.jsx)(w.mr,{isOpen:i,onClose:x,topMargin:3,drawerProps:{blockScrollOnMount:!1},children:(0,t.jsxs)(b.s,{px:5,py:4,height:"100%",children:["main"===a&&(0,t.jsx)(iT,{doc:n,setMobileSharePanelState:e=>d(e),handleViewAnalyticsClick:()=>r(),closeSharePanel:x,showAnalytics:o}),"invite"===a&&(0,t.jsx)(iS,{doc:n,setMobileSharePanelState:e=>d(e),selectedAccessLinkPermission:q.aXG.Manage,lastSearchText:u,setLastSearchText:e=>h(e)}),"export"===a&&(0,t.jsx)(iu,{doc:n,editor:l,setMobileSharePanelState:e=>d(e)}),"manage-access"===a&&(0,t.jsx)(iD,{doc:n,setMobileSharePanelState:e=>d(e)}),"members"===a&&(0,t.jsx)(iz,{doc:n,setMobileSharePanelState:e=>d(e),canManage:!0,setLastSearchText:e=>{h(e)}}),"password"===a&&(0,t.jsx)(iB,{doc:n,setMobileSharePanelState:e=>d(e),closeSharePanel:x})]})})}):(0,t.jsx)(t.Fragment,{})};var iW=s(32844),iV=s(59554),iH=s(6743),iX=s(30928),i$=s(62117),iK=s(2362);let iJ=e=>{let{subtitle:i,tooltipLabel:s,ariaLabel:n,icon:l}=e;return(0,t.jsxs)(ee.z,{spacing:1,align:"center",children:[(0,t.jsx)(B.E,{fontSize:"xs",color:"gray.500",children:i}),(0,t.jsx)(w.Tz,{label:s,placement:"top","aria-label":n,children:(0,t.jsx)(c.a,{color:"gray.500",lineHeight:"1",children:(0,t.jsx)(y.g,{size:"xs",icon:l})})})]})},iq=e=>{var i,s;let{doc:n,accessLinkEnabled:r,onClose:o,onOpen:a,segmentEvent:d,isMobile:c=!1}=e,x=(0,l.d)(),{openUpsellModal:u}=(0,iL.I)(),h=(0,ev.st)(),m=(0,I.u)("searchEngineIndexing"),g=(0,R.ez)("search_engine_indexing",n.organization),[f]=(0,q.snR)(),[b]=(0,q.M5P)(),v=(0,k.useCallback)(async e=>{var i,s;if(!r)return;let l=e.target.checked,c=null==(i=n.file)?void 0:i.id,p=n.id;if(!c)return void x({title:(0,t.jsx)(C.x6,{id:"SlfejT"}),description:(0,t.jsx)(C.x6,{id:"v41fCm"}),status:"error",duration:5e3,isClosable:!0,position:"top"});if(!l){await f({variables:{fileId:c,enable:l}}),null==h||h.track(ev.VV.FILE_SEARCH_ENGINE_INDEXING_DISABLED,{doc_id:p,file_id:c}),x({title:(0,t.jsx)(C.x6,{id:"XclkFW"}),status:"success",duration:5e3,isClosable:!0,position:"top"});return}if(!g){e.preventDefault(),u({onOpenCallback:o,onCloseCallback:a,segmentEvent:d});return}let m=null==n||null==(s=n.accessLinks)?void 0:s[0],j=(null==m?void 0:m.type)==="password";l&&j&&await b({variables:{docId:p}}),await f({variables:{fileId:c,enable:l}}),null==h||h.track(ev.VV.FILE_SEARCH_ENGINE_INDEXING_ENABLED,{doc_id:p,file_id:c}),l&&j?x({title:(0,t.jsx)(C.x6,{id:"rTxIf4"}),description:(0,t.jsx)(C.x6,{id:"lO2nUo"}),status:"info",duration:5e3,isClosable:!0,position:"top"}):x({title:l?(0,t.jsx)(C.x6,{id:"EUuzTf"}):(0,t.jsx)(C.x6,{id:"XclkFW"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},[r,g,u,o,a,d,null==(i=n.file)?void 0:i.id,f,b,x,n.id,n.accessLinks,h]);return m?(0,t.jsx)(p.B,{w:"100%",children:(0,t.jsxs)(ee.z,{mt:4,mb:2*!!c,children:[(0,t.jsxs)(p.B,{spacing:0,children:[(0,t.jsxs)(ee.z,{children:[(0,t.jsx)(B.E,{children:(0,t.jsx)(C.x6,{id:"9Mdt3l"})}),!g&&(0,t.jsx)(iN.zL,{product:"pro"})]}),(0,t.jsx)(B.E,{fontSize:"xs",color:"gray.500",children:(0,t.jsx)(C.x6,{id:"ey2XCa",values:{GAMMA_ARTIFACT_PROPER_NOUN:Q.TP}})})]}),(0,t.jsx)(j.h,{}),(0,t.jsx)(w.Tz,{label:r?"":(0,t.jsx)(C.x6,{id:"qMGQSp"}),isDisabled:r,shouldWrapChildren:!0,placement:"top",children:(0,t.jsx)(iF.d,{isChecked:(null==(s=n.file)?void 0:s.searchEngineIndexingEnabled)||!1,disabled:!r,onChange:v})})]})}):null},iQ=()=>({view:{subtitle:$.Ru._({id:"ihPQra"}),tooltip:(0,D.h9)()},comment:{subtitle:$.Ru._({id:"qPZYdC"}),tooltip:$.Ru._({id:"oKPro/",values:{0:(0,D.h9)()}})},edit:{subtitle:$.Ru._({id:"TVFcVE"}),tooltip:$.Ru._({id:"2gPY9r",values:{0:(0,D.h9)()}})}}),iZ=e=>{var i;let{doc:s,isConnected:n,onSharePanelOpen:r,onSharePanelClose:o,canManage:a,isDark:d}=e,x=(0,ir.fW)(),u=(0,l.d)(),h=(0,ip.n)(iQ),p=(0,I.u)("passwordProtectedDoc")&&a,m=null==s||null==(i=s.accessLinks)?void 0:i[0],j=(null==m?void 0:m.type)==="password",[g]=(0,q.vcy)(),[f]=(0,q.snR)(),b=(null==m?void 0:m.permission)?null==m?void 0:m.permission:eC.F$.NoAccess,y=b===eC.F$.NoAccess,w=e=>()=>{u({title:"updated"===e?$.Ru._({id:"Xpw8aE"}):$.Ru._({id:"jwO7L7"}),status:"success",duration:5e3,isClosable:!0,position:"top"})},S=(0,k.useMemo)(()=>(0,G.LN)({docTitle:null==s?void 0:s.title,docId:null==s?void 0:s.id,token:null==m?void 0:m.token,absolute:!0}),[s,null==m?void 0:m.token]),_=!!m,A=a&&n&&_,R=(0,t.jsx)(eF.w,{onClose:o,onOpen:r,segmentEvent:ev.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_REMOVE_WATERMARK,targetWorkspace:s.organization});return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsxs)(eT,{showDivider:!1,children:[(0,t.jsx)(eR._,{title:j?(0,t.jsx)(C.x6,{id:"gbBlJ4"}):(0,t.jsx)(C.x6,{id:"qZu20V"}),subtitle:y?$.Ru._({id:"vMZPZT"}):(0,t.jsx)(iJ,{subtitle:h[b].subtitle,tooltipLabel:h[b].tooltip,ariaLabel:h[b].subtitle,icon:v.mEO}),img:(0,t.jsx)(et.$,{icon:j?v.OKD:v.CQO,showDisabled:y}),isDisabled:!A,disabledText:eC.ef[eC.F$.NoAccess].title(),permissionsControl:(0,t.jsx)(eC.qk,{selected:b,options:[q.aXG.Edit,q.aXG.Comment,q.aXG.View,eC.F$.NoAccess],onClick:e=>{var i,t;let n=null==m?void 0:m.id,l={id:s.id,accessLinks:e===eC.F$.NoAccess?[{permission:null}]:[{permission:e}]},r=()=>g({variables:l,refetchQueries:["GetDoc"],optimisticResponse:{updateDoc:{...l,accessLinks:[{__typename:"AccessLink",id:n||"temp-id",permission:e===eC.F$.NoAccess?null:e}],__typename:"Doc"}}}),o=()=>{w(e===eC.F$.NoAccess?"removed":"updated")()},a=()=>{u((0,P.oe)(s.title))},d=null==(i=s.file)?void 0:i.searchEngineIndexingEnabled,c=null==(t=s.file)?void 0:t.id;d&&c&&e===eC.F$.NoAccess?f({variables:{fileId:c,enable:!1},refetchQueries:["GetDoc"]}).then(r).then(()=>{o(),a()}):r().then(o)}})}),(0,t.jsx)(U.S,{animateOpacity:!0,in:!!(null==m?void 0:m.permission),children:(0,t.jsx)(iK.X,{url:S,paddingLeft:x?32:void 0,customLabel:$.Ru._({id:"y1eoq1"}),onClick:()=>{(0,T.dd)({docId:s.id,source:"sharePanel",type:"tokenUrl"})}})})]}),p?(0,t.jsx)(iW.n,{defaultIndex:[0],allowToggle:!0,borderRadius:"md",borderColor:"transparent",mb:4,children:(0,t.jsxs)(iV.A,{children:[(0,t.jsxs)(iH.J,{children:[(0,t.jsx)(c.a,{as:"span",flex:"1",textAlign:"start",fontWeight:"600",children:(0,t.jsx)(C.x6,{id:"VNgKZz"})}),(0,t.jsx)(iX.Q,{})]}),(0,t.jsxs)(i$.v,{children:[R,(0,t.jsx)(iq,{onClose:o,onOpen:r||(()=>{}),segmentEvent:ev.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_SEARCH_ENGINE_INDEXING,doc:s,accessLinkEnabled:!y}),(0,t.jsx)(iG,{onClose:o,onOpen:r,segmentEvent:ev.VV.GAMMA_PRO_UPSELL_SHARE_SETTINGS_SET_PASSWORD,doc:s,isDark:d,accessLinkEnabled:!y})]})]})}):R]})};var iY=s(76983);let i0={edit:(0,t.jsx)(C.x6,{id:"RGu+kO"}),comment:(0,t.jsx)(C.x6,{id:"4xnd7M"}),view:(0,t.jsx)(C.x6,{id:"8WmxwF"}),noAccess:(0,t.jsx)(C.x6,{id:"Lkjre5"}),workspaceAccess:(0,t.jsx)(C.x6,{id:"k/3XD1"})},i1=(0,E.A)(e=>{var i,s;let{doc:E,editor:B,isSharePanelOpen:U,onSharePanelClose:W,onSharePanelOpen:V,onAnalyticsPanelOpen:H,view:X,setView:$,showAnalytics:K=!0,showSharePublic:J=!0,showEmbed:q=!0,showSiteSettings:Q=!0,cardRangesInput:Z="",setCardRangesInput:Y}=e,ee=(0,z.rd)(),ei=(0,R.Fd)(),{openSiteSettings:es}=(0,N.ip)(),et=(0,I.u)("mobileSharePanel"),en=null==E||null==(i=E.accessLinks)?void 0:i[0],el=null==en?void 0:en.permission,er=(0,k.useMemo)(()=>(0,G.LN)({docTitle:null==E?void 0:E.title,docId:null==E?void 0:E.id,token:null==en?void 0:en.token,absolute:!0}),[E,null==en?void 0:en.token]),{hasCopied:eo,onCopy:ea}=(0,n.i)(er),ed=(0,l.d)(),ec="link-copied-toast",ex=(0,k.useRef)(!1),{user:eu,currentWorkspace:eh,isGammaAdminUser:ep}=(0,F.ur)(),{isConnected:em}=(0,_.u)(),ej=(0,F.Iy)("manage",E)||ep,eg=(0,F.Iy)("comment",E)||ep,ef=(0,F.Iy)("edit",E)||ep,{isOpen:eb,onClose:ev}=(0,A.E)({id:"create-site-modal"}),ey=E&&E.site&&E.site.routes.length>1,ew=E&&(0,M.dv)(E.site),eC=(0,D.zI)({showInvite:ef,showExport:eg,showSharePublic:J&&ej&&!ew,showEmbed:q&&ej&&!ew}),ek=ej&&H&&E&&!ew,[eS,e_]=(0,k.useState)(()=>()=>Promise.resolve()),eI=(0,k.useCallback)(()=>{W(),ev()},[W,ev]),eA=E?ey?E.site.name:E.title:null,eR=(0,k.useCallback)(()=>{eS().then(()=>{$("invite"),Y&&Y(""),W()},()=>{console.debug("[handleSharePanelClose] CollaboratorSearchBar rejected \uD83D\uDC4E\uD83C\uDFFC")})},[$,Y,W,eS]),eE=(0,k.useCallback)(()=>{H&&(W(),H())},[H,W]),eT=(0,k.useCallback)(()=>{es("domains"),W()},[W,es]);if(!eu)return null;let eD=(0,P.ZP)(E,eu),eP=eD?(0,P.bC)()[eD]:null,eO=(0,P.D5)(E,eh);if(E&&null===eP)return console.error("[SharePanel] Unknown VisibilityValue for doc",E),null;let ez=null==E||null==(s=E.organization)?void 0:s.id;!E||ez||ex.current||(console.error("[SharePanelModal] Doc unexpectedly doesnt have a workspaceId",{docId:E.id,organization:E.organization}),ex.current=!0);let eF=eC.find(e=>e.key===X)||eC[0],eL=eC.length>1&&eF,eG=E&&null!==E.orgAccess,eB=i0[null!=el?el:eG?"workspaceAccess":"noAccess"];return et&&(0,L.Xb)()?(0,t.jsx)(iU,{isSharePanelOpen:U,closeIfReady:eR,doc:E,editor:B,handleViewAnalyticsClick:eE,showAnalytics:K&&ek}):(0,t.jsxs)(w.L8,{isDark:ee,children:[(0,t.jsxs)(r.aF,{onEsc:eR,isOpen:U,onClose:W,trapFocus:!0,size:"3xl",returnFocusOnClose:!1,children:[(0,t.jsx)(o.m,{}),(0,t.jsxs)(a.$,{"data-share-panel-modal-content":!0,mx:2,children:[(0,t.jsxs)(d.r,{children:[eP&&(0,t.jsx)(c.a,{as:"span",me:3,children:(0,t.jsx)(iY.l,{visibility:eP,isFromOtherOrg:eO})}),eA?(0,t.jsx)(C.x6,{id:"sit2to",values:{displayName:eA}}):(0,t.jsx)(C.x6,{id:"Z8lGw6"})]}),(0,t.jsx)(x.s,{"data-share-panel-close-button":!0,onClick:e=>{e.preventDefault(),eR()}}),(0,t.jsx)(u.c,{}),E?(0,t.jsx)(h.c,{"data-testid":"share-panel-modal-body",children:E&&ez&&(0,t.jsxs)(t.Fragment,{children:[eL&&(0,t.jsxs)(p.B,{direction:"row",alignItems:"center",my:4,children:[(0,t.jsx)(S.x,{selectedOption:eF,setSelectedOption:e=>$(e.key),options:eC,dropdownButtonLeftIcon:eF.icon,breakpoints:{base:!0,md:!1}}),ej&&Q&&!(null==E?void 0:E.site)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.h,{}),(0,t.jsx)(g.$,{flexShrink:0,onClick:eT,variant:"plain",size:"sm",alignSelf:"flex-start",children:(0,t.jsx)(C.x6,{id:"sAalO9"})})]})]}),(!eg||"invite"==X)&&(0,t.jsx)(eM,{workspaceId:ez,doc:E,user:eu,setVerifySearchDone:e_,canManage:ej,isFromOtherOrg:eO,isMultipage:ey,isDark:ee}),ej&&"public"===X&&(0,t.jsx)(iZ,{doc:E,isConnected:em,onSharePanelOpen:V,onSharePanelClose:W,canManage:ej,isDark:ee}),ej&&"embed"===X&&(0,t.jsx)(eN,{doc:E,onSharePanelOpen:V,onSharePanelClose:W}),eg&&"export"===X&&(0,t.jsx)(e8,{doc:E,editor:B,onSharePanelOpen:V,onSharePanelClose:W,isMultipage:ey,cardRangesDefault:Z})]})}):(0,t.jsx)(h.c,{pb:6,"data-testid":"share-panel-modal-body",children:(0,t.jsxs)(p.B,{children:[(0,t.jsx)(m.E,{height:"55px"}),(0,t.jsx)(m.E,{height:"55px"}),(0,t.jsx)(m.E,{height:"55px"}),(0,t.jsx)(m.E,{height:"55px"})]})}),(0,t.jsx)(u.c,{}),(0,t.jsx)(f.j,{children:(0,t.jsxs)(b.s,{justifyContent:"space-between",flex:1,children:[K&&ek&&(0,t.jsx)(g.$,{isDisabled:!em,leftIcon:(0,t.jsx)(y.g,{icon:v.q9c}),variant:"ghost",onClick:eE,children:(0,t.jsx)(C.x6,{id:"YaUqUV"})}),(0,t.jsx)(j.h,{}),ew?(0,t.jsx)(g.$,{onClick:e=>{e.preventDefault(),eR()},variant:"solid","data-share-panel-done-button":!0,children:(0,t.jsx)(C.x6,{id:"DPfwMq"})}):(0,t.jsx)(w.Tz,{label:eB,isDisabled:!E,children:(0,t.jsx)(c.a,{children:(0,t.jsx)(g.$,{leftIcon:(0,t.jsx)(y.g,{icon:eo?v.e68:v.KTq}),isDisabled:!E,onClick:e=>{E&&(e.preventDefault(),ea(),ed.isActive(ec)||ed({id:ec,title:(0,t.jsx)(C.x6,{id:"pQjjYo"}),status:"success",duration:5e3,position:"top"}),(0,T.dd)({docId:E.id,source:"sharePanel",type:"tokenUrl"}))},variant:"ghost",children:(0,t.jsx)(C.x6,{id:"y1eoq1"})})})})]})})]})]}),(null==E?void 0:E.id)&&ei&&ej&&(0,t.jsx)(O.B,{isOpen:eb,onClose:eI,existingDoc:E})]})})},72737:(e,i,s)=>{"use strict";s.d(i,{D5:()=>x,PR:()=>b,U5:()=>g,ZP:()=>m,bC:()=>p,oe:()=>v,vz:()=>j});var t=s(6029),n=s(99492),l=s(19564),r=s(77650),o=s(17789),a=s(99038),d=s(24729),c=s(70006);let x=(e,i)=>{var s;return(null==e||null==(s=e.organization)?void 0:s.id)!==(null==i?void 0:i.id)},u={PRIVATE:"private",LINK_VIEW:"link-view",LINK_COMMENT:"link-comment",LINK_EDIT:"link-edit",PASSWORD_VIEW:"password-view",PASSWORD_COMMENT:"password-comment",PASSWORD_EDIT:"password-edit",INDIVIDUAL:"individual",ORG_VIEW:"org-view",ORG_COMMENT:"org-comment",ORG_EDIT:"org-edit",ORG_MANAGE:"org-manage",CHANNEL_PRIVATE:"channel-private",PUBLIC:"public"},h=[u.ORG_VIEW,u.ORG_COMMENT,u.ORG_EDIT,u.ORG_MANAGE],p=()=>({[u.PRIVATE]:{title:()=>r.Ru._({id:"IZiYjM",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),subtitle:()=>r.Ru._({id:"nHujJB",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.DW4},[u.LINK_VIEW]:{title:()=>r.Ru._({id:"Pb5t/X",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.CQO},[u.LINK_COMMENT]:{title:()=>r.Ru._({id:"FUtIA5",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.CQO},[u.LINK_EDIT]:{title:()=>r.Ru._({id:"tNOSZi",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.CQO},[u.PASSWORD_VIEW]:{title:()=>r.Ru._({id:"s1I4TC",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.OKD},[u.PASSWORD_COMMENT]:{title:()=>r.Ru._({id:"ZVsBuN",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.OKD},[u.PASSWORD_EDIT]:{title:()=>r.Ru._({id:"IAzUDH",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.OKD},[u.INDIVIDUAL]:{title:()=>r.Ru._({id:"IB6oAl",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),subtitle:e=>"".concat(e," can access this ").concat(a.TP,"."),primaryIcon:n.X46},[u.ORG_VIEW]:{title:e=>e?r.Ru._({id:"S+losC",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP,org:e}}):r.Ru._({id:"Vk2WI0",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.URI,secondaryIcon:n.pS3},[u.ORG_COMMENT]:{title:e=>e?r.Ru._({id:"acq2w5",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP,org:e}}):r.Ru._({id:"2ASSnu",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.URI,secondaryIcon:n.DN2},[u.ORG_EDIT]:{title:e=>e?r.Ru._({id:"FFdz7p",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP,org:e}}):r.Ru._({id:"Ks6kIh",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.URI,secondaryIcon:n.zLW},[u.ORG_MANAGE]:{title:e=>e?r.Ru._({id:"3yNlmN",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP,org:e}}):r.Ru._({id:"4f22gH",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.URI},[u.CHANNEL_PRIVATE]:{title:()=>r.Ru._({id:"Tw6Jzi"}),primaryIcon:d.$Q},[u.PUBLIC]:{title:()=>r.Ru._({id:"NMHF69",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}),primaryIcon:n.Ge5}}),m=(e,i)=>{if(!e)return null;let{workspaceAccess:s,orgAccess:t,accessLinks:n,channels:l,collaborators:r,createdBy:o}=e,a=s||t;if("manage"===a)return u.ORG_MANAGE;if("edit"===a)return u.ORG_EDIT;if("comment"===a)return u.ORG_COMMENT;if("view"===a)return u.ORG_VIEW;if(l&&l.some(e=>null!==e.permission))return u.CHANNEL_PRIVATE;if(r&&(null==r?void 0:r.length)>1)return u.INDIVIDUAL;let d=n&&n.find(e=>"token"===e.type&&""===e.token);if(d){if("view"===d.permission)return u.LINK_VIEW;if("comment"===d.permission)return u.LINK_COMMENT;if("edit"===d.permission)return u.LINK_EDIT}let c=n&&n.find(e=>"password"===e.type&&""===e.token);if(c){if("view"===c.permission)return u.PASSWORD_VIEW;if("comment"===c.permission)return u.PASSWORD_COMMENT;if("edit"===c.permission)return u.PASSWORD_EDIT}return i&&!a&&(null==o?void 0:o.id)===i.id?u.PRIVATE:u.INDIVIDUAL},j=e=>(null==e?void 0:e.orgAccess)?r.Ru._({id:"5Ma3Lv",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.TP}}):null,g=(e,i)=>{var s;return e&&i&&!e.orgAccess&&(null==(s=e.createdBy)?void 0:s.id)===i.id},f=(e,i,s)=>{var r,a;if(!i)return[];let p=(null==e||null==(r=e.channels)?void 0:r.map(e=>{let{id:i,name:s,slug:t}=e;return{id:i,label:s,href:(0,c.gU)({id:i,slug:t}),icon:d.$Q}}))||[],j=m(e,i),g=x(e,s),f=g?[{id:"shared-from-external-org",label:(null==e||null==(a=e.organization)?void 0:a.name)?(0,t.jsx)(l.x6,{id:"lFZJ+N",values:{0:e.organization.name}}):(0,t.jsx)(l.x6,{id:"qn35Ez"}),icon:n.AQM,color:"gray.500"}]:[];if(e.source!==o.ALe.ApiAiGenerated||g||f.push({id:"ai-generated",label:(0,t.jsx)(l.x6,{id:"OZtEcz"}),icon:n.jTw,color:"gray.500",colorScheme:"green"}),j===u.PUBLIC)return[{id:"public",label:(0,t.jsx)(l.x6,{id:"7d1a0d"}),icon:n.Ge5,color:"gray.500"},...f,...p];if(j===u.PRIVATE)return[{id:"private",label:(0,t.jsx)(l.x6,{id:"zwBp5t"}),icon:n.DW4,color:"gray.500"},...f];if(j===u.INDIVIDUAL){let s=(e.collaborators||[]).filter(e=>e.user.id!==i.id).length;return[{id:"collaborators",label:(0,t.jsx)(l.x6,{id:"o2NxSP",values:{numCollaborators:s}}),icon:n.X46,color:"gray.500"},...f]}if(g)return f;if(j&&h.includes(j))return[{id:"workspace",label:(0,t.jsx)(l.x6,{id:"0Gd0NU"}),icon:n.URI,color:"gray.500"},...f,...p];return p},b=e=>{let{doc:i,user:s,currentWorkspace:t,channelToExclude:n}=e;return f(i,s,t).filter(e=>e.id!==n)},v=e=>({title:e?(0,t.jsx)(l.x6,{id:"Cjc2Uk",values:{docTitle:e}}):(0,t.jsx)(l.x6,{id:"og/uYl"}),description:(0,t.jsx)(l.x6,{id:"lO2nUo"}),status:"info",duration:5e3,isClosable:!0,position:"top"})},74907:(e,i,s)=>{"use strict";s.d(i,{w:()=>l});var t=s(6029),n=s(19564);let l=()=>({100:(0,t.jsx)(n.x6,{id:"xKi1hd"}),200:(0,t.jsx)(n.x6,{id:"c7s0mT"}),300:(0,t.jsx)(n.x6,{id:"4domrp"}),400:(0,t.jsx)(n.x6,{id:"3CTvmZ"}),500:(0,t.jsx)(n.x6,{id:"uDtGuX"}),600:(0,t.jsx)(n.x6,{id:"U9FxnD"}),700:(0,t.jsx)(n.x6,{id:"gw5LiU"}),800:(0,t.jsx)(n.x6,{id:"4eWNFN"}),900:(0,t.jsx)(n.x6,{id:"Y4B02e"})})},76733:(e,i,s)=>{"use strict";s.d(i,{L:()=>y});var t=s(6029),n=s(46898),l=s(24302),r=s(94740),o=s(66199),a=s(49611),d=s(18078),c=s(88136),x=s(38676),u=s(25311),h=s(48810),p=s(99492),m=s(48621),j=s(19564),g=s(77650),f=s(55729),b=s(88586),v=s(99038);let y=e=>{let{email:i,name:s,workspaceName:y,workspaceId:w}=e,[C]=(0,b.B74)(),[k,S]=(0,f.useState)(!1),_=(0,n.d)(),I=(0,l.dU)(!1,!0),A=I?"gray.800":void 0,R=I?"white":void 0,E=I?"gray.600":void 0,T=I?"var(--chakra-colors-gray-600)":void 0;return(0,t.jsx)(r.A,{closeOnBlur:!0,children:e=>{let{onClose:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.W,{children:(0,t.jsx)(a.$,{leftIcon:(0,t.jsx)(m.g,{icon:p.AQM}),size:"xs",colorScheme:"gray",mr:1,px:2,h:"auto",py:1,children:(0,t.jsx)(j.x6,{id:"O1wAlQ"})})}),(0,t.jsxs)(d.h,{color:R,bgColor:A,borderColor:E,children:[(0,t.jsx)(c.R,{bgColor:A,sx:T&&{"--popper-arrow-shadow-color":T}}),(0,t.jsx)(x.D,{fontWeight:"bold",borderColor:E,children:(0,t.jsx)(j.x6,{id:"XYV7FR"})}),(0,t.jsxs)(u.e,{children:[(0,t.jsx)(h.E,{fontSize:"sm",children:(0,t.jsx)(j.x6,{id:"hJZ5XP",values:{name:s,workspaceName:y,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.Ix}})}),(0,t.jsx)(a.$,{isDisabled:k,w:"100%",mt:2,onClick:()=>{w&&i&&(S(!0),C({variables:{workspaceId:w,invitees:[{email:i}]}}).then(()=>{_({title:g.Ru._({id:"oNCcm2"}),status:"success",duration:5e3,isClosable:!0,position:"top"})}).catch(e=>{console.error(e),_({title:g.Ru._({id:"h37zlR",values:{0:e.message}}),status:"error",isClosable:!0,position:"top"})}).finally(()=>{S(!1),n()}))},children:(0,t.jsx)(j.x6,{id:"qVqqmP"})})]})]})]})}})}},76983:(e,i,s)=>{"use strict";s.d(i,{l:()=>d});var t=s(6029),n=s(24302),l=s(26420),r=s(99492),o=s(55597),a=s(48621);let d=e=>{let{visibility:i,isFromOtherOrg:s}=e,d=(0,n.dU)("white","var(--chakra-colors-gray-800)");return(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsx)(a.g,{icon:r.AQM}),(0,t.jsxs)(l.a,{as:"span",className:"fa-layers fa-fw",children:[(0,t.jsx)(a.g,{icon:i.primaryIcon}),i.secondaryIcon&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.g,{icon:o.GEE,color:d,transform:"down-6 right-6"}),(0,t.jsx)(a.g,{icon:i.secondaryIcon,transform:"shrink-7 right-6 down-6"})]})]})]})}},81664:(e,i,s)=>{"use strict";s.d(i,{R:()=>t});let t=new(s(83747)).b},86574:(e,i,s)=>{"use strict";s.d(i,{_:()=>d});var t=s(6029),n=s(48810),l=s(26420),r=s(58959),o=s(40452),a=s(47412);s(55729);let d=e=>{let{title:i,subtitle:s,img:d,isDisabled:c=!1,disabledText:x,tooltipText:u,testId:h,infoIcon:p,permissionsControl:m,workspaceGuestInvite:j}=e,g="string"==typeof s?(0,t.jsx)(n.E,{fontSize:"xs",color:"gray.500",children:s}):s,f=(0,t.jsx)(a.Tz,{isDisabled:!u,label:u,placement:"top",children:(0,t.jsx)(l.a,{children:m})});return(0,t.jsxs)(r.z,{w:"100%",justify:"space-between",py:2,"data-testid":"permission-settings-row".concat(h?"-"+h:""),children:[(0,t.jsx)(l.a,{children:(0,t.jsxs)(o.s,{alignItems:"center",children:[d,(0,t.jsxs)(l.a,{marginInlineStart:3,children:[(0,t.jsx)(n.E,{wordBreak:"break-word",noOfLines:1,children:i}),(0,t.jsxs)(o.s,{align:"center",children:[j&&j,g&&g]})]})]})}),(0,t.jsx)(l.a,{children:(0,t.jsx)(a.Tz,{isDisabled:!u,label:(0,t.jsx)(n.E,{children:u}),placement:"top",children:c?(0,t.jsx)(n.E,{size:"sm",color:"gray.500","data-testid":"permission-controls-disabled-".concat(h),children:x}):p?(0,t.jsxs)(r.z,{children:[p,f]}):f})})]})}},88240:(e,i,s)=>{"use strict";s.d(i,{w:()=>t});var t=function(e){return e.PresentationsFromScratch="presentationsFromScratch",e.PresentationsFromNotes="presentationsFromNotes",e.EnhancePptOrPdf="enhancePptOrPdf",e.Websites="websites",e.SocialMedia="socialMedia",e.AiImages="aiImages",e.NotSure="notSure",e}({})},88571:(e,i,s)=>{"use strict";s.d(i,{a:()=>t.a,m:()=>t.m});var t=s(56450)},91140:(e,i,s)=>{"use strict";s.d(i,{j:()=>t});let t=s(55729).lazy(()=>Promise.all([s.e(6171),s.e(6374),s.e(5516),s.e(1707)]).then(s.bind(s,1707)).then(e=>({default:e.default})))},96804:(e,i,s)=>{"use strict";s.d(i,{B:()=>A});var t=s(6029),n=s(46898),l=s(67909),r=s(36071),o=s(54731),a=s(17920),d=s(3674),c=s(40691),x=s(26385),u=s(83638),h=s(25223),p=s(38036),m=s(16426),j=s(61204),g=s(49611),f=s(47412),b=s(19564),v=s(77650),y=s(81278),w=s(55729),C=s(88586),k=s(55252),S=s(44141),_=s(82927),I=s(70006);let A=e=>{var i;let{isOpen:s,onClose:A,existingDoc:R}=e,E=(0,n.d)(),T=(0,w.useRef)(null),[D,P]=(0,w.useState)(!1),{currentWorkspace:O}=(0,_.ur)(),[M,z]=(0,w.useState)(""),[F]=(0,C.Ybb)(),[N]=(0,C.aXl)(),L=(0,k.U)(),{push:G}=(0,y.useRouter)(),B=(0,w.useCallback)(async()=>{if(null==R?void 0:R.id){await (0,S.fb)(R.id),P(!0);try{var e,i;let{data:s}=await N({variables:{duplicateDocInput:{sourceDocId:R.id,source:C.ALe.SitesCopyToSite,title:(null==R?void 0:R.title)||v.Ru._({id:"wja8aL"}),orgId:null==O?void 0:O.id,orgAccess:C.aXG.Manage,themeId:null}}}),t=null==s||null==(e=s.duplicateDoc)?void 0:e.id;if(!t)return void console.error("[CreateSiteModal] Failed to duplicate doc with id",R.id);let{data:n}=await F({variables:{input:{workspaceId:null==O?void 0:O.id,name:M,routes:[{docId:t,path:"/"}],themeId:null==R||null==(i=R.theme)?void 0:i.id}}});if(!(null==n?void 0:n.createSite))return void console.error("[CreateSiteModal] Failed to create site, no site returned");let l=(0,I.pF)({docId:t});G(l),A()}catch(e){E({status:"error",title:(0,t.jsx)(b.x6,{id:"Pdboh4"}),description:(0,t.jsx)(b.x6,{id:"c6YG3V"})}),console.error(e)}P(!1)}},[F,null==O?void 0:O.id,N,null==R?void 0:R.id,null==R||null==(i=R.theme)?void 0:i.id,null==R?void 0:R.title,M,G,E]),U=(0,w.useCallback)(async()=>{P(!0);let{data:e}=await F({variables:{input:{workspaceId:null==O?void 0:O.id,name:M,routes:[]}}}),i=null==e?void 0:e.createSite;if(!i)return void console.error("[CreateSiteModal] Failed to create site, no site returned");L({siteId:null==i?void 0:i.id,routes:null==i?void 0:i.routes,title:"Home",path:"/"})},[L,F,null==O?void 0:O.id,M]),W=(0,w.useCallback)(async()=>(null==R?void 0:R.id)?B():U(),[null==R?void 0:R.id,B,U]),V=M.length>0;return(0,t.jsx)(f.L8,{isDark:!1,children:(0,t.jsxs)(l.aF,{isOpen:s,onClose:A,initialFocusRef:T,size:"2xl",children:[(0,t.jsx)(r.m,{}),(0,t.jsxs)(o.$,{children:[(0,t.jsx)(a.r,{children:(0,t.jsx)(b.x6,{id:"JHMOcq"})}),(0,t.jsx)(d.s,{}),(0,t.jsx)(c.c,{children:(0,t.jsx)(x.B,{spacing:4,children:(0,t.jsxs)(u.MJ,{children:[(0,t.jsx)(h.l,{children:(0,t.jsx)(b.x6,{id:"Lve3H6"})}),(0,t.jsx)(p.p,{ref:T,placeholder:v.Ru._({id:"tlD7N3"}),onChange:e=>{z(e.target.value)},onKeyDown:e=>{V&&"Enter"===e.key&&W()}})]})})}),(0,t.jsx)(m.j,{children:(0,t.jsxs)(j.e,{children:[(0,t.jsx)(g.$,{variant:"ghost",onClick:A,children:(0,t.jsx)(b.x6,{id:"dEgA5A"})}),(0,t.jsx)(g.$,{variant:"solid",onClick:W,isDisabled:!V,isLoading:D,children:(0,t.jsx)(b.x6,{id:"JHMOcq"})})]})})]})]})})}}}]);
//# sourceMappingURL=5712-c74b6ea67907b478.js.map