"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1089],{34806:(e,t,i)=>{i.d(t,{I:()=>n,k:()=>s});var l=i(93766);let o=e=>"".concat(e," !important"),n=e=>({fontFamily:o(e)}),s=e=>{let t={"[data-shape=image]":{".tl-inner-div":{}},img:{'&[src^="blob:"]':{animation:"loading-pulse-animation 1.5s infinite"}}},i=Object.values(l.JM),n=e?"dark":"light";return i.forEach(e=>{t['[data-color="'.concat(e,'"]')]={color:o(l.gA.strokes[n][e]),":not(mask) > [fill], &[fill]":{"&:not([fill=none])":{fill:o(l.gA.fills[n][e]),"text, tspan":{fill:o(l.gA.strokes[n][e])}}},"[stroke]":{"&:not([stroke=none])":{stroke:o(l.gA.strokes[n][e])}}}}),t}},81089:(e,t,i)=>{i.d(t,{UG:()=>ex,lN:()=>ep});var l=i(93766),o=i(6029),n=i(40452),s=i(87613),r=i(83004),a=i(55729),c=i(82927),d=i(58959),u=i(94740),x=i(66199),g=i(18078),h=i(61204),j=i(51684),p=i(77650);let b=a.createContext({});function m(){return a.useContext(b)}var f=i(26420),k=i(16936),v=i(57405),S=i(25223),C=i(83743),A=i(49611),_=i(19564);let R={src:"/_next/static/media/transparent-background.ccc186e7.png"},y={[l.JM.White]:"#f0f1f3",[l.JM.Gray]:"#788492",[l.JM.Green]:"#36b24d",[l.JM.Blue]:"#1c7ed6",[l.JM.Violet]:"#7746f1",[l.JM.Red]:"#ff2133",[l.JM.Orange]:"#ff9433",[l.JM.Yellow]:"#ffc936"},w=e=>e.appState.currentStyle,I=e=>e.document.pageStates[e.appState.currentPageId].selectedIds,M=e=>e.settings.isDarkMode?"dark":"light",F=e=>{let{style:t,colorMode:i}=e;return(0,o.jsx)(f.a,{backgroundColor:t.isFilled?l.gA.fills[i][t.color]:void 0,backgroundImage:t.isFilled?void 0:R.src,backgroundSize:"4em",borderColor:l.gA.strokes[i][t.color],borderWidth:"2px",h:"1em",w:"1em",borderRadius:"md"})},z=Object.keys(l.gA.defaultTextStyle),W=(e,t)=>{let{page:i}=e,l={};if(t.length<=0)return{};{let e=new Set([]);t.map(e=>i.shapes[e]).forEach(t=>{z.forEach(i=>{if(!e.has(i))if(void 0===l[i])l[i]=t.style[i];else{if(l[i]===t.style[i])return;e.add(i)}})}),e.forEach(e=>{delete l[e]})}return l},H=()=>{let e=m(),t=e.useStore(M),i=e.useStore(w),n=e.useStore(I),s=W(e,n),r={...i,...s};return(0,o.jsxs)(u.A,{trigger:"hover",children:[(0,o.jsx)(x.W,{children:(0,o.jsx)(k.K,{icon:(0,o.jsx)(F,{style:r,colorMode:t}),variant:"ghost",size:"sm","aria-label":""})}),(0,o.jsx)(g.h,{w:"fit-content",bg:"#F9FAFBFA",p:4,children:(0,o.jsxs)(v.T,{spacing:2,align:"flex-start",children:[(0,o.jsx)(S.l,{children:(0,o.jsx)(_.x6,{id:"TuM2Yu"})}),(0,o.jsx)(C.r,{columns:2,spacing:2,children:[!0,!1].map(i=>(0,o.jsx)(A.$,{leftIcon:(0,o.jsx)(F,{style:{...r,isFilled:i},colorMode:t}),variant:"ghost",size:"sm",isActive:r.isFilled===i,onClick:()=>e.style({isFilled:i}),children:i?(0,o.jsx)(_.x6,{id:"5bi1la"}):(0,o.jsx)(_.x6,{id:"dD7NPy"})},i?"fill":"outline"))}),(0,o.jsx)(S.l,{children:(0,o.jsx)(_.x6,{id:"1HfW/F"})}),(0,o.jsx)(C.r,{columns:4,spacing:2,w:"100%",children:Object.entries(l.JM).map(i=>{let[l,n]=i;return y[n]?(0,o.jsx)(k.K,{icon:(0,o.jsx)(F,{style:{...r,color:n},colorMode:t}),variant:"ghost",size:"md","aria-label":l,isActive:r.color===n,onClick:()=>e.style({color:n})},n):null})})]})})]})};var T=i(45460),O=i(48621),D=i(47412);let J=(0,T.R)((e,t)=>{let{label:i,icon:l,tooltipPlacement:n="top",...s}=e;return(0,o.jsx)(D.Tz,{placement:n,label:i,isDisabled:!i,children:(0,o.jsx)(k.K,{"aria-label":i||"",ref:t,size:"sm",variant:"",icon:(0,o.jsx)(O.g,{icon:l}),color:"trueblue.600",textShadow:"0px 1px 0px rgba(0,0,0,0)",fontWeight:"500",borderRadius:"md",borderWidth:"1px",backdropFilter:"blur(20px)",borderColor:"transparent",_hover:{bg:"gray.50",borderColor:"gray.200"},_focus:{bg:"gray.50",borderColor:"gray.200"},_active:{bg:"trueblue.100",borderColor:"trueblue.200"},...s})})}),P=e=>{let{children:t,...i}=e;return(0,o.jsx)(n.s,{bg:"#F9FAFBDD",p:1,borderWidth:"1px",borderColor:"whiteAlpha.600",borderRadius:"xl",shadow:"xl",...i,children:t})},E={[l.Hu.Start]:j.ecg,[l.Hu.Middle]:j._ur,[l.Hu.End]:j.jbh},U=()=>{let e=m(),t=e.useStore(w),i=e.useStore(I),n=W(e,i),s={...t,...n};return(0,o.jsxs)(u.A,{trigger:"hover",children:[(0,o.jsx)(x.W,{children:(0,o.jsx)(J,{icon:E[s.textAlign||l.Hu.Start]})}),(0,o.jsx)(g.h,{background:"none",shadow:"none",w:"fit-content",children:(0,o.jsx)(P,{direction:"column",children:(0,o.jsxs)(h.e,{children:[(0,o.jsx)(J,{icon:j.ecg,label:p.Ru._({id:"IR6Txi"}),onClick:()=>e.style({textAlign:l.Hu.Start}),isActive:s.textAlign===l.Hu.Start},"align-left"),(0,o.jsx)(J,{icon:j._ur,label:p.Ru._({id:"8nOdkO"}),onClick:()=>e.style({textAlign:l.Hu.Middle}),isActive:s.textAlign===l.Hu.Middle},"align-center"),(0,o.jsx)(J,{icon:j.jbh,label:p.Ru._({id:"pd0UH2"}),onClick:()=>e.style({textAlign:l.Hu.End}),isActive:s.textAlign===l.Hu.End},"align-right"),(0,o.jsx)(J,{icon:j.Tip,label:p.Ru._({id:"18P2qJ"}),onClick:()=>e.style({textAlign:l.Hu.Justify}),isActive:s.textAlign===l.Hu.Justify},"justify")]})})})]})},q=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.some(t=>void 0!==e.document.pages[e.appState.currentPageId].shapes[t].children),B=e=>"idle"===e.appState.status&&e.document.pageStates[e.appState.currentPageId].selectedIds.length>0,G=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,L=e=>{let t=e.appState.currentPageId,i=e.document.pages[t];for(let l of e.document.pageStates[t].selectedIds)if("text"in i.shapes[l])return!0;return!1},N=a.memo(function(){let e=m(),{isGammaOrgUser:t}=(0,c.ur)(),i=e.useStore(B),s=e.useStore(q),r=e.useStore(G),a=e.useStore(L);return(0,o.jsx)(n.s,{w:"100%",direction:"row",position:"absolute",bottom:2,align:"flex-end",justify:"center",zIndex:1,children:(0,o.jsx)(P,{children:(0,o.jsxs)(d.z,{spacing:2,children:[t&&(0,o.jsx)(J,{icon:j.XYS,label:p.Ru._({id:"SpTWH3"}),onClick:()=>e.exportImage(l.Xi.SVG,{scale:1,quality:1})},"download"),i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{icon:j.yLS,label:p.Ru._({id:"/Wgayn"}),onClick:()=>e.delete(),"data-testid":"drawing-edit-toolbar-delete"},"delete"),(0,o.jsx)(Q,{}),r>=2&&(0,o.jsx)(V,{}),r>=2||s?(0,o.jsx)(J,{icon:j.cWs,label:s?"Ungroup selection":"Group selection",onClick:()=>s?e.ungroup():e.group(),isActive:s},"group"):null]}),(0,o.jsx)(H,{}),a&&(0,o.jsx)(U,{})]})})})}),Q=()=>{let e=m();return(0,o.jsxs)(u.A,{trigger:"hover",children:[(0,o.jsx)(x.W,{children:(0,o.jsx)(J,{icon:j.B4x})}),(0,o.jsx)(g.h,{background:"none",shadow:"none",w:"fit-content",children:(0,o.jsxs)(P,{direction:"row",children:[(0,o.jsx)(J,{icon:j.bKR,label:p.Ru._({id:"J6qWQV"}),onClick:()=>e.moveToFront()},"front"),(0,o.jsx)(J,{icon:j.B4x,label:p.Ru._({id:"9xFjqz"}),onClick:()=>e.moveForward()},"forward"),(0,o.jsx)(J,{icon:j.PW6,label:p.Ru._({id:"OfSb1W"}),onClick:()=>e.moveBackward()},"backward"),(0,o.jsx)(J,{icon:j.jb9,label:p.Ru._({id:"/zBSYY"}),onClick:()=>e.moveToBack()},"back")]})})]})},V=()=>{let e=m();return(0,o.jsxs)(u.A,{trigger:"hover",children:[(0,o.jsx)(x.W,{children:(0,o.jsx)(J,{icon:j.gD3})}),(0,o.jsx)(g.h,{background:"none",shadow:"none",w:"fit-content",children:(0,o.jsxs)(P,{direction:"column",children:[(0,o.jsxs)(h.e,{children:[(0,o.jsx)(J,{icon:j.gD3,label:p.Ru._({id:"IR6Txi"}),onClick:()=>e.align(l.qx.Left)},"align-left"),(0,o.jsx)(J,{icon:j.im,label:p.Ru._({id:"8nOdkO"}),onClick:()=>e.align(l.qx.CenterHorizontal)},"align-center"),(0,o.jsx)(J,{icon:j.j7A,label:p.Ru._({id:"pd0UH2"}),onClick:()=>e.align(l.qx.Right)},"align-right"),(0,o.jsx)(J,{icon:j.yC$,label:p.Ru._({id:"8lqfXb"}),onClick:()=>e.distribute(l.Od.Horizontal)},"distribute-h")]}),(0,o.jsxs)(h.e,{children:[(0,o.jsx)(J,{icon:j.MVg,label:p.Ru._({id:"/Q0jUh"}),onClick:()=>e.align(l.qx.Top)},"align-top"),(0,o.jsx)(J,{icon:j.cse,label:p.Ru._({id:"QhuQN2"}),onClick:()=>e.align(l.qx.CenterVertical)},"align-middle"),(0,o.jsx)(J,{icon:j.QaE,label:p.Ru._({id:"EPnxoe"}),onClick:()=>e.align(l.qx.Bottom)},"align-bottom"),(0,o.jsx)(J,{icon:j.iHb,label:p.Ru._({id:"a1NrWf"}),onClick:()=>e.distribute(l.Od.Vertical)},"distribute-v")]})]})})]})};var K=i(96500),X=i(55597);let Y=()=>[{icon:X.eX_,label:p.Ru._({id:"rG3WVm"}),tool:"select"},{icon:j.IP$,label:p.Ru._({id:"Ajc4TJ"}),tool:"erase"},{icon:X.adM,label:p.Ru._({id:"rjuFFw"}),tool:l.gs.Line},{icon:X.U6Q,label:p.Ru._({id:"zFkhx3"}),tool:l.gs.Arrow},{icon:X.vti,label:p.Ru._({id:"30KLDI"}),tool:l.gs.Rectangle},{icon:X.GEE,label:p.Ru._({id:"7xMmki"}),tool:l.gs.Ellipse},{icon:X.CKr,label:p.Ru._({id:"ucHvJP"}),tool:l.gs.Triangle},{icon:X.jwR,label:p.Ru._({id:"xeiujy"}),tool:l.gs.Text}],$=e=>e.appState.activeTool,Z=a.memo(function(){let e=m(),t=e.useStore($);return(0,o.jsx)(n.s,{h:"100%",direction:"column",position:"absolute",right:2,align:"flex-end",justify:"center",zIndex:1,children:(0,o.jsx)(P,{children:(0,o.jsx)(v.T,{spacing:2,children:Y().map(i=>{let{label:l,icon:n,tool:s}=i;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(J,{icon:n,label:l,onClick:()=>e.selectTool(s),isActive:t===s,tooltipPlacement:"left","data-testid":"drawing-insert-toolbar-".concat(s)},l),"select"==s&&(0,o.jsx)(K.c,{},"selectDivider")]})})})})})});var ee=i(78140),et=i(36999),ei=i(41283),el=i(85595);let eo=e=>e.document.pageStates[e.appState.currentPageId].camera.zoom,en=e=>e.settings.showGrid,es=a.memo(function(){let e=m(),t=e.useStore(en);return(0,o.jsx)(n.s,{position:"absolute",top:2,left:2,zIndex:1,children:(0,o.jsx)(P,{children:(0,o.jsxs)(d.z,{spacing:2,children:[(0,o.jsx)(er,{}),(0,o.jsx)(J,{icon:X.XgR,label:t?p.Ru._({id:"IsBZFj"}):p.Ru._({id:"mWgfWA"}),isActive:t,onClick:()=>e.setSetting("showGrid",!t)},"grid")]})})})}),er=a.memo(function(){let e=m(),t=e.useStore(eo);return(0,o.jsxs)(ee.W,{children:[(0,o.jsxs)(et.I,{as:A.$,"data-test-id":"zoom-menu-button",size:"sm",variant:"ghost",leftIcon:(0,o.jsx)(O.g,{icon:j.$UM}),children:[Math.round(100*t),"%"]}),(0,o.jsxs)(ei.c,{children:[(0,o.jsx)(el.D,{command:"#+",onClick:e.zoomIn,children:(0,o.jsx)(_.x6,{id:"AWOSPo"})}),(0,o.jsx)(el.D,{command:"#-",onClick:e.zoomOut,children:(0,o.jsx)(_.x6,{id:"FjkaiT"})}),(0,o.jsx)(el.D,{command:"⇧0",onClick:e.resetZoom,children:(0,o.jsx)(_.x6,{id:"41NrIs"})}),(0,o.jsx)(el.D,{command:"⇧1",onClick:e.zoomToFit,"data-test-id":"zoom-to-fit-button",children:(0,o.jsx)(_.x6,{id:"pLI1Is"})})]})]})});var ea=i(87996);let ec=e=>({onAssetCreate:(0,a.useCallback)(async(t,i,o)=>{if(!e)return console.warn("[useAssetUpload] OrgId is required to upload assets"),!1;let n=URL.createObjectURL(i);console.debug("[useAssetUpload] Handling upload for file",{file:i,id:o,tempUrl:n});let s=e=>{let i=t.assets.find(e=>e.id===o);if(i){console.debug("[useAssetUpload] Upload complete. Replacing temp asset",{id:o,src:e.src});let l={document:{assets:{[o]:{...i,src:e.src}}}};t.patchState(l,"upload"),t.persist(l,"upload")}};return(0,ea.QM)(i,e,{onOriginalFileUpload:s,onUploadComplete:s}),t.patchState({document:{assets:{[o]:{id:o,type:l.zO.Image,fileName:i.name,src:n}}}}),n},[e]),onAssetDelete:(0,a.useCallback)(async(e,t)=>!0,[])});var ed=i(34806);let eu={dash:l.c.Solid,isFilled:!0,color:l.JM.White},ex=e=>{let{isDark:t,font:i,...d}=e,{currentWorkspace:u}=(0,c.ur)(),[x,g]=(0,a.useState)(),[h,j]=(0,a.useState)(!1),p=(0,a.useCallback)(e=>{g(e),e.style(eu,[]),j(!0)},[]),{onAssetCreate:m,onAssetDelete:f}=ec(null==u?void 0:u.id);(0,a.useEffect)(()=>{x&&void 0!==t&&x.setSetting("isDarkMode",t)},[x,t]);let k=(0,a.useMemo)(()=>(0,ed.k)(t),[t]),v=(0,a.useMemo)(()=>(0,ed.I)(i),[i]);return(0,o.jsxs)(n.s,{sx:{".tl-canvas":{"div, text, textarea":{...v},...k,'g[cursor="grab"][aria-label="link handle"]':{display:"none"}}},onDrop:()=>{},onPaste:()=>{},position:"relative",h:"100%",w:"100%",className:"highlight-mask",children:[(0,o.jsx)(r.mL,{styles:{"#__textLabelMeasure, #__textMeasure":{...v}}}),(0,o.jsxs)(b.Provider,{value:x||{},children:[(0,o.jsx)(l.Z1,{onAssetCreate:m,onAssetDelete:f,...d,onMount:(0,s.H)(d.onMount,p)}),h&&!d.readOnly&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(N,{}),(0,o.jsx)(Z,{})]}),h&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(es,{})})]})]})};var eg=i(58423),eh=i(48331);let ej=e=>eg.Aq.getCommonBounds(e.map(l.ju.getRotatedBounds)),ep=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,{shapes:i,pageState:{camera:o},rendererBounds:n}=e;if(0===i.length)return;let s=ej(i);if(!s)return;let r=l.ju.getCameraZoom(Math.min((n.width-t)/s.width,(n.height-t)/s.height)),a=(n.width-s.width*r)/2/r,c=(n.height-s.height*r)/2/r;e.setCamera(eh.l.toFixed(eh.l.sub([a,c],[s.minX,s.minY])),r,"zoomed_to_fit")}}}]);
//# sourceMappingURL=1089-18110ed841225395.js.map